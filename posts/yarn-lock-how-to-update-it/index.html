<!DOCTYPE html><html lang="en" dir="ltr" data-theme="dark" data-has-toc data-has-sidebar class="astro-7dtmslok"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Yarn.lock: How to update it | Ayc0</title><link rel="canonical" href="https://ayc0.github.io/posts/yarn-lock-how-to-update-it/"/><link rel="sitemap" href="/sitemap-index.xml"/><link rel="alternate" type="application/rss+xml" title="RSS Feed for ayc0.github.io" href="https://ayc0.github.io/rss.xml"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><meta name="generator" content="Astro v5.14.1"/><meta name="generator" content="Starlight v0.36.0"/><meta property="og:title" content="Yarn.lock: How to update it"/><meta property="og:type" content="article"/><meta property="og:url" content="https://ayc0.github.io/posts/yarn-lock-how-to-update-it/"/><meta property="og:locale" content="en"/><meta property="og:description" content="Yarn comes with a lock file `yarn.lock` that isn’t made for human to edit it. But sometimes you need to do a specific edit in it (like dropping a specific package). This article highlights a few different ways to do so"/><meta property="og:site_name" content="Ayc0"/><meta name="twitter:card" content="summary_large_image"/><meta name="description" content="Yarn comes with a lock file `yarn.lock` that isn’t made for human to edit it. But sometimes you need to do a specific edit in it (like dropping a specific package). This article highlights a few different ways to do so"/> <meta property="og:image" content="https://ayc0.github.io//_astro/pkcen3s6x5403jl6usey.DFl-Z8wv.jpeg"> <meta name="twitter:image" content="https://ayc0.github.io//_astro/pkcen3s6x5403jl6usey.DFl-Z8wv.jpeg"><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-yhs5w42p" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg><svg aria-hidden="true" class="dark astro-yhs5w42p" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg><svg aria-hidden="true" class="auto astro-yhs5w42p" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg></template><link rel="stylesheet" href="/_astro/print.DNXP8c50.css" media="print"><link rel="stylesheet" href="/_astro/index.BpPvn_73.css">
<style>@layer starlight.components{:root{--sl-badge-default-border: var(--sl-color-accent);--sl-badge-default-bg: var(--sl-color-accent-low);--sl-badge-default-text: #fff;--sl-badge-note-border: var(--sl-color-blue);--sl-badge-note-bg: var(--sl-color-blue-low);--sl-badge-note-text: #fff;--sl-badge-danger-border: var(--sl-color-red);--sl-badge-danger-bg: var(--sl-color-red-low);--sl-badge-danger-text: #fff;--sl-badge-success-border: var(--sl-color-green);--sl-badge-success-bg: var(--sl-color-green-low);--sl-badge-success-text: #fff;--sl-badge-caution-border: var(--sl-color-orange);--sl-badge-caution-bg: var(--sl-color-orange-low);--sl-badge-caution-text: #fff;--sl-badge-tip-border: var(--sl-color-purple);--sl-badge-tip-bg: var(--sl-color-purple-low);--sl-badge-tip-text: #fff}[data-theme=light]:root{--sl-badge-default-bg: var(--sl-color-accent-high);--sl-badge-note-bg: var(--sl-color-blue-high);--sl-badge-danger-bg: var(--sl-color-red-high);--sl-badge-success-bg: var(--sl-color-green-high);--sl-badge-caution-bg: var(--sl-color-orange-high);--sl-badge-tip-bg: var(--sl-color-purple-high)}.sl-badge:where(.astro-3vwuzbpg){display:inline-block;border:1px solid var(--sl-color-border-badge);border-radius:.25rem;font-family:var(--sl-font-system-mono);line-height:normal;color:var(--sl-color-text-badge);background-color:var(--sl-color-bg-badge);overflow-wrap:anywhere}.sidebar-content .sl-badge:where(.astro-3vwuzbpg){line-height:1;font-size:var(--sl-text-xs);padding:.125rem .375rem}.sidebar-content a[aria-current=page]>.sl-badge:where(.astro-3vwuzbpg){--sl-color-bg-badge: transparent;--sl-color-border-badge: currentColor;color:inherit}.default:where(.astro-3vwuzbpg){--sl-color-bg-badge: var(--sl-badge-default-bg);--sl-color-border-badge: var(--sl-badge-default-border);--sl-color-text-badge: var(--sl-badge-default-text)}.note:where(.astro-3vwuzbpg){--sl-color-bg-badge: var(--sl-badge-note-bg);--sl-color-border-badge: var(--sl-badge-note-border);--sl-color-text-badge: var(--sl-badge-note-text)}.danger:where(.astro-3vwuzbpg){--sl-color-bg-badge: var(--sl-badge-danger-bg);--sl-color-border-badge: var(--sl-badge-danger-border);--sl-color-text-badge: var(--sl-badge-danger-text)}.success:where(.astro-3vwuzbpg){--sl-color-bg-badge: var(--sl-badge-success-bg);--sl-color-border-badge: var(--sl-badge-success-border);--sl-color-text-badge: var(--sl-badge-success-text)}.tip:where(.astro-3vwuzbpg){--sl-color-bg-badge: var(--sl-badge-tip-bg);--sl-color-border-badge: var(--sl-badge-tip-border);--sl-color-text-badge: var(--sl-badge-tip-text)}.caution:where(.astro-3vwuzbpg){--sl-color-bg-badge: var(--sl-badge-caution-bg);--sl-color-border-badge: var(--sl-badge-caution-border);--sl-color-text-badge: var(--sl-badge-caution-text)}.small:where(.astro-3vwuzbpg){font-size:var(--sl-text-xs);padding:.125rem .25rem}.medium:where(.astro-3vwuzbpg){font-size:var(--sl-text-sm);padding:.175rem .35rem}.large:where(.astro-3vwuzbpg){font-size:var(--sl-text-base);padding:.225rem .45rem}.sl-markdown-content :is(h1,h2,h3,h4,h5,h6) .sl-badge:where(.astro-3vwuzbpg){vertical-align:middle}}
@layer starlight.components{.card-grid:where(.astro-vwtbixzi){display:grid;grid-template-columns:100%;gap:1rem}.card-grid:where(.astro-vwtbixzi)>*{margin-top:0!important}@media (min-width: 50rem){.card-grid:where(.astro-vwtbixzi){grid-template-columns:1fr 1fr;gap:1.5rem}.stagger:where(.astro-vwtbixzi){--stagger-height: 5rem;padding-bottom:var(--stagger-height)}.stagger:where(.astro-vwtbixzi)>*:nth-child(2n){transform:translateY(var(--stagger-height))}}}
@layer starlight.components{.card:where(.astro-hauq3fvu){--sl-card-border: var(--sl-color-purple);--sl-card-bg: var(--sl-color-purple-low);border:1px solid var(--sl-color-gray-5);background-color:var(--sl-color-black);padding:clamp(1rem,calc(.125rem + 3vw),2.5rem);flex-direction:column;gap:clamp(.5rem,calc(.125rem + 1vw),1rem)}.card:where(.astro-hauq3fvu):nth-child(4n+1){--sl-card-border: var(--sl-color-orange);--sl-card-bg: var(--sl-color-orange-low)}.card:where(.astro-hauq3fvu):nth-child(4n+3){--sl-card-border: var(--sl-color-green);--sl-card-bg: var(--sl-color-green-low)}.card:where(.astro-hauq3fvu):nth-child(4n+4){--sl-card-border: var(--sl-color-red);--sl-card-bg: var(--sl-color-red-low)}.card:where(.astro-hauq3fvu):nth-child(4n+5){--sl-card-border: var(--sl-color-blue);--sl-card-bg: var(--sl-color-blue-low)}.title:where(.astro-hauq3fvu){font-weight:600;font-size:var(--sl-text-h4);color:var(--sl-color-white);line-height:var(--sl-line-height-headings);gap:1rem;align-items:center}.card:where(.astro-hauq3fvu) .icon:where(.astro-hauq3fvu){border:1px solid var(--sl-card-border);background-color:var(--sl-card-bg);padding:.2em;border-radius:.25rem;flex-shrink:0}.card:where(.astro-hauq3fvu) .body:where(.astro-hauq3fvu){margin:0;font-size:clamp(var(--sl-text-sm),calc(.5rem + 1vw),var(--sl-text-body))}}
@layer starlight.components{svg:where(.astro-yhs5w42p){color:var(--sl-icon-color);font-size:var(--sl-icon-size, 1em);width:1em;height:1em}}
@layer starlight.components{.sl-link-card:where(.astro-yaqysplk){display:grid;grid-template-columns:1fr auto;gap:.5rem;border:1px solid var(--sl-color-gray-5);border-radius:.5rem;padding:1rem;box-shadow:var(--sl-shadow-sm);position:relative}a:where(.astro-yaqysplk){text-decoration:none;line-height:var(--sl-line-height-headings)}a:where(.astro-yaqysplk):before{content:"";position:absolute;inset:0}.stack:where(.astro-yaqysplk){flex-direction:column;gap:.5rem}.title:where(.astro-yaqysplk){color:var(--sl-color-white);font-weight:600;font-size:var(--sl-text-lg)}.description:where(.astro-yaqysplk){color:var(--sl-color-gray-3);line-height:1.5}.icon:where(.astro-yaqysplk){color:var(--sl-color-gray-3)}.sl-link-card:where(.astro-yaqysplk):hover{background:var(--sl-color-gray-7, var(--sl-color-gray-6));border-color:var(--sl-color-gray-2)}.sl-link-card:where(.astro-yaqysplk):hover .icon:where(.astro-yaqysplk){color:var(--sl-color-white)}}
@layer starlight.components{.sl-steps{--bullet-size: calc(var(--sl-line-height) * 1rem);--bullet-margin: .375rem;list-style:none;counter-reset:steps-counter var(--sl-steps-start, 0);padding-inline-start:0}.sl-steps>li{counter-increment:steps-counter;position:relative;padding-inline-start:calc(var(--bullet-size) + 1rem);padding-bottom:1px;min-height:calc(var(--bullet-size) + var(--bullet-margin))}.sl-steps>li+li{margin-top:0}.sl-steps>li:before{content:counter(steps-counter);position:absolute;top:0;inset-inline-start:0;width:var(--bullet-size);height:var(--bullet-size);line-height:var(--bullet-size);font-size:var(--sl-text-xs);font-weight:600;text-align:center;color:var(--sl-color-white);background-color:var(--sl-color-gray-6);border-radius:99rem;box-shadow:inset 0 0 0 1px var(--sl-color-gray-5)}.sl-steps>li:after{--guide-width: 1px;content:"";position:absolute;top:calc(var(--bullet-size) + var(--bullet-margin));bottom:var(--bullet-margin);inset-inline-start:calc((var(--bullet-size) - var(--guide-width)) / 2);width:var(--guide-width);background-color:var(--sl-color-hairline-light)}}@layer starlight.content{.sl-steps>li>:first-child{--lh: calc(1em * var(--sl-line-height));--shift-y: calc(.5 * (var(--bullet-size) - var(--lh)));transform:translateY(var(--shift-y));margin-bottom:var(--shift-y)}.sl-steps>li>:first-child:where(h1,h2,h3,h4,h5,h6){--lh: calc(1em * var(--sl-line-height-headings))}@supports (--prop: 1lh){.sl-steps>li>:first-child{--lh: 1lh}}}
@layer starlight.components{.sl-link-button:where(.astro-zbpnroza){align-items:center;border:1px solid transparent;border-radius:999rem;display:inline-flex;font-size:var(--sl-text-sm);gap:.5em;line-height:1.1875;outline-offset:.25rem;padding:.4375rem 1.125rem;text-decoration:none}.sl-link-button:where(.astro-zbpnroza).primary{background:var(--sl-color-text-accent);border-color:var(--sl-color-text-accent);color:var(--sl-color-black)}.sl-link-button:where(.astro-zbpnroza).primary:hover{color:var(--sl-color-black)}.sl-link-button:where(.astro-zbpnroza).secondary{border-color:inherit;color:var(--sl-color-white)}.sl-link-button:where(.astro-zbpnroza).minimal{color:var(--sl-color-white);padding-inline:0}.sl-link-button:where(.astro-zbpnroza) svg{flex-shrink:0}@media (min-width: 50rem){.sl-link-button:where(.astro-zbpnroza){font-size:var(--sl-text-base);padding:.9375rem 1.25rem}}.sl-markdown-content .sl-link-button:where(.astro-zbpnroza){margin-inline-end:1rem}.sl-markdown-content .sl-link-button:where(.astro-zbpnroza):not(:where(p *)){margin-block:1rem}}
</style><script type="module" src="/_astro/page.7qqag-5g.js"></script></head> <body class="astro-7dtmslok"> <a href="#_top" class="astro-ehgxmqdb">Skip to content</a>  <div class="page sl-flex astro-wiam6bwg"> <header class="header astro-wiam6bwg"><div class="header astro-bj72ozhn"> <div class="title-wrapper sl-flex astro-bj72ozhn"> <a href="/" class="site-title sl-flex astro-j5tervuf">  <span class="astro-j5tervuf" translate="no"> Ayc0 </span> </a>  </div> <div class="sl-flex print:hidden astro-bj72ozhn"> <site-search class="astro-bj72ozhn astro-s3spneol" data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}"> <button data-open-modal disabled aria-label="Search" aria-keyshortcuts="Control+K" class="astro-s3spneol"> <svg aria-hidden="true" class="astro-s3spneol astro-yhs5w42p" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg> <span class="sl-hidden md:sl-block astro-s3spneol" aria-hidden="true">Search</span> <kbd class="sl-hidden md:sl-flex astro-s3spneol" style="display: none;"> <kbd class="astro-s3spneol">Ctrl</kbd><kbd class="astro-s3spneol">K</kbd> </kbd> </button> <dialog style="padding:0" aria-label="Search" class="astro-s3spneol"> <div class="dialog-frame sl-flex astro-s3spneol">  <button data-close-modal class="sl-flex md:sl-hidden astro-s3spneol"> Cancel </button> <div class="search-container astro-s3spneol"> <div id="starlight__search" class="astro-s3spneol"></div> </div> </div> </dialog> </site-search>  <script>
	(() => {
		const openBtn = document.querySelector('button[data-open-modal]');
		const shortcut = openBtn?.querySelector('kbd');
		if (!openBtn || !(shortcut instanceof HTMLElement)) return;
		const platformKey = shortcut.querySelector('kbd');
		if (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {
			platformKey.textContent = '⌘';
			openBtn.setAttribute('aria-keyshortcuts', 'Meta+K');
		}
		shortcut.style.display = '';
	})();
</script> <script type="module" src="/_astro/Search.astro_astro_type_script_index_0_lang.cjYDvRdi.js"></script>   </div> <div class="sl-hidden md:sl-flex print:hidden right-group astro-bj72ozhn"> <div class="sl-flex social-icons astro-bj72ozhn"> <a href="https://github.com/Ayc0" rel="me" class="sl-flex astro-ovhmvnkl"><span class="sr-only astro-ovhmvnkl">GitHub</span><svg aria-hidden="true" class="astro-ovhmvnkl astro-yhs5w42p" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a><a href="https://bsky.app/profile/ayc0.github.io" rel="me" class="sl-flex astro-ovhmvnkl"><span class="sr-only astro-ovhmvnkl">Bluesky</span><svg aria-hidden="true" class="astro-ovhmvnkl astro-yhs5w42p" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 10.8c-1-2.1-4-6-6.8-8C2.6 1 1.6 1.3.9 1.6.1 1.9 0 3 0 3.8c0 .7.4 5.6.6 6.4C1.4 13 4.3 14 7 13.6h.4H7c-4 .6-7.4 2-2.8 7 5 5.3 6.8-1 7.8-4.2 1 3.2 2 9.3 7.7 4.3 4.3-4.3 1.2-6.5-2.7-7a9 9 0 0 1-.4-.1h.4c2.7.3 5.6-.6 6.4-3.4.2-.8.6-5.7.6-6.4 0-.7-.1-1.9-.9-2.2-.7-.3-1.7-.7-4.3 1.2-2.8 2-5.7 5.9-6.8 8"/></svg></a><a href="https://ayc0.github.io/rss.xml" rel="me" class="sl-flex astro-ovhmvnkl"><span class="sr-only astro-ovhmvnkl">RSS</span><svg aria-hidden="true" class="astro-ovhmvnkl astro-yhs5w42p" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M2.88 16.88a3 3 0 0 0 0 4.24 3 3 0 0 0 4.24 0 3 3 0 0 0-4.24-4.24Zm2.83 2.83a1 1 0 0 1-1.42-1.42 1 1 0 0 1 1.42 0 1 1 0 0 1 0 1.42ZM5 12a1 1 0 0 0 0 2 5 5 0 0 1 5 5 1 1 0 0 0 2 0 7 7 0 0 0-7-7Zm0-4a1 1 0 0 0 0 2 9 9 0 0 1 9 9 1 1 0 0 0 2 0 11.08 11.08 0 0 0-3.22-7.78A11.08 11.08 0 0 0 5 8Zm10.61.39A15.11 15.11 0 0 0 5 4a1 1 0 0 0 0 2 13 13 0 0 1 13 13 1 1 0 0 0 2 0 15.11 15.11 0 0 0-4.39-10.61Z"/></svg></a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-lr772bx4"> <span class="sr-only astro-lr772bx4">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-lr772bx4 astro-yhs5w42p" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select autocomplete="off" class="astro-lr772bx4"> <option value="dark" class="astro-lr772bx4">Dark</option><option value="light" class="astro-lr772bx4">Light</option><option value="auto" selected class="astro-lr772bx4">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-lr772bx4 astro-yhs5w42p" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script> <script type="module">const r="starlight-theme",o=e=>e==="auto"||e==="dark"||e==="light"?e:"auto",c=()=>o(typeof localStorage<"u"&&localStorage.getItem(r));function n(e){typeof localStorage<"u"&&localStorage.setItem(r,e==="light"||e==="dark"?e:"")}const l=()=>matchMedia("(prefers-color-scheme: light)").matches?"light":"dark";function t(e){StarlightThemeProvider.updatePickers(e),document.documentElement.dataset.theme=e==="auto"?l():e,n(e)}matchMedia("(prefers-color-scheme: light)").addEventListener("change",()=>{c()==="auto"&&t("auto")});class s extends HTMLElement{constructor(){super(),t(c()),this.querySelector("select")?.addEventListener("change",a=>{a.currentTarget instanceof HTMLSelectElement&&t(o(a.currentTarget.value))})}}customElements.define("starlight-theme-select",s);
//# sourceMappingURL=ThemeSelect.astro_astro_type_script_index_0_lang.Znk7Hhgg.js.map</script> <script type="module">class s extends HTMLElement{constructor(){super();const e=this.querySelector("select");e&&(e.addEventListener("change",t=>{t.currentTarget instanceof HTMLSelectElement&&(window.location.pathname=t.currentTarget.value)}),window.addEventListener("pageshow",t=>{if(!t.persisted)return;const n=e.querySelector("option[selected]")?.index;n!==e.selectedIndex&&(e.selectedIndex=n??0)}))}}customElements.define("starlight-lang-select",s);
//# sourceMappingURL=LanguageSelect.astro_astro_type_script_index_0_lang.Ce-i7NLC.js.map</script> </div> </div> </header>  <div class="main-frame astro-wiam6bwg">     <script type="module">const a=document.getElementById("starlight__sidebar"),n=a?.querySelector("sl-sidebar-state-persist"),o="sl-sidebar-state",i=()=>{let t=[];const e=n?.dataset.hash||"";try{const s=sessionStorage.getItem(o),r=JSON.parse(s||"{}");Array.isArray(r.open)&&r.hash===e&&(t=r.open)}catch{}return{hash:e,open:t,scroll:a?.scrollTop||0}},c=t=>{try{sessionStorage.setItem(o,JSON.stringify(t))}catch{}},d=()=>c(i()),l=(t,e)=>{const s=i();s.open[e]=t,c(s)};n?.addEventListener("click",t=>{if(!(t.target instanceof Element))return;const e=t.target.closest("summary")?.closest("details");if(!e)return;const s=e.querySelector("sl-sidebar-restore"),r=parseInt(s?.dataset.index||"");isNaN(r)||l(!e.open,r)});addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&d()});addEventListener("pageHide",d);
//# sourceMappingURL=Page.astro_astro_type_script_index_0_lang.BHQeG8Vj.js.map</script> <div class="lg:sl-flex astro-cc6hbr37"> <aside class="right-sidebar-container print:hidden astro-cc6hbr37"> <div class="right-sidebar astro-cc6hbr37"> <div class="lg:sl-hidden astro-47aacpag"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-76mlu7jd"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-76mlu7jd"><details id="starlight__mobile-toc" class="astro-76mlu7jd"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-76mlu7jd"><span class="toggle sl-flex astro-76mlu7jd">On this page<svg aria-hidden="true" class="caret astro-76mlu7jd astro-yhs5w42p" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg></span><span class="display-current astro-76mlu7jd"></span></summary><div class="dropdown astro-76mlu7jd"><ul class="isMobile astro-wivpmdcq" style="--depth: 0;"> <li class="astro-wivpmdcq" style="--depth: 0;"> <a href="#_top" class="astro-wivpmdcq" style="--depth: 0;"> <span class="astro-wivpmdcq" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-wivpmdcq" style="--depth: 0;"> <a href="#introduction" class="astro-wivpmdcq" style="--depth: 0;"> <span class="astro-wivpmdcq" style="--depth: 0;">Introduction</span> </a>  </li><li class="astro-wivpmdcq" style="--depth: 0;"> <a href="#problem" class="astro-wivpmdcq" style="--depth: 0;"> <span class="astro-wivpmdcq" style="--depth: 0;">Problem</span> </a>  </li><li class="astro-wivpmdcq" style="--depth: 0;"> <a href="#solutions" class="astro-wivpmdcq" style="--depth: 0;"> <span class="astro-wivpmdcq" style="--depth: 0;">Solutions</span> </a> <ul class="isMobile astro-wivpmdcq" style="--depth: 1;"> <li class="astro-wivpmdcq" style="--depth: 1;"> <a href="#manually-editing-the-lock-file" class="astro-wivpmdcq" style="--depth: 1;"> <span class="astro-wivpmdcq" style="--depth: 1;">Manually editing the lock file</span> </a>  </li><li class="astro-wivpmdcq" style="--depth: 1;"> <a href="#the-resolutions-field" class="astro-wivpmdcq" style="--depth: 1;"> <span class="astro-wivpmdcq" style="--depth: 1;">The resolutions field</span> </a>  </li><li class="astro-wivpmdcq" style="--depth: 1;"> <a href="#removing-the-yarnlock-file" class="astro-wivpmdcq" style="--depth: 1;"> <span class="astro-wivpmdcq" style="--depth: 1;">Removing the yarn.lock file</span> </a>  </li><li class="astro-wivpmdcq" style="--depth: 1;"> <a href="#yarn-dedupe-recommended" class="astro-wivpmdcq" style="--depth: 1;"> <span class="astro-wivpmdcq" style="--depth: 1;">yarn dedupe (recommended)</span> </a>  </li> </ul>  </li><li class="astro-wivpmdcq" style="--depth: 0;"> <a href="#bonus-listing-all-versions-of-a-package" class="astro-wivpmdcq" style="--depth: 0;"> <span class="astro-wivpmdcq" style="--depth: 0;">Bonus: listing all versions of a package</span> </a> <ul class="isMobile astro-wivpmdcq" style="--depth: 1;"> <li class="astro-wivpmdcq" style="--depth: 1;"> <a href="#yarn-1" class="astro-wivpmdcq" style="--depth: 1;"> <span class="astro-wivpmdcq" style="--depth: 1;">Yarn 1</span> </a>  </li><li class="astro-wivpmdcq" style="--depth: 1;"> <a href="#yarn-2" class="astro-wivpmdcq" style="--depth: 1;"> <span class="astro-wivpmdcq" style="--depth: 1;">Yarn 2+</span> </a>  </li> </ul>  </li><li class="astro-wivpmdcq" style="--depth: 0;"> <a href="#conclusion" class="astro-wivpmdcq" style="--depth: 0;"> <span class="astro-wivpmdcq" style="--depth: 0;">Conclusion</span> </a>  </li> </ul> </div></details></nav></mobile-starlight-toc><script type="module" src="/_astro/MobileTableOfContents.astro_astro_type_script_index_0_lang.C181hMzK.js"></script></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-47aacpag"><div class="sl-container astro-47aacpag"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-wivpmdcq" style="--depth: 0;"> <li class="astro-wivpmdcq" style="--depth: 0;"> <a href="#_top" class="astro-wivpmdcq" style="--depth: 0;"> <span class="astro-wivpmdcq" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-wivpmdcq" style="--depth: 0;"> <a href="#introduction" class="astro-wivpmdcq" style="--depth: 0;"> <span class="astro-wivpmdcq" style="--depth: 0;">Introduction</span> </a>  </li><li class="astro-wivpmdcq" style="--depth: 0;"> <a href="#problem" class="astro-wivpmdcq" style="--depth: 0;"> <span class="astro-wivpmdcq" style="--depth: 0;">Problem</span> </a>  </li><li class="astro-wivpmdcq" style="--depth: 0;"> <a href="#solutions" class="astro-wivpmdcq" style="--depth: 0;"> <span class="astro-wivpmdcq" style="--depth: 0;">Solutions</span> </a> <ul class="astro-wivpmdcq" style="--depth: 1;"> <li class="astro-wivpmdcq" style="--depth: 1;"> <a href="#manually-editing-the-lock-file" class="astro-wivpmdcq" style="--depth: 1;"> <span class="astro-wivpmdcq" style="--depth: 1;">Manually editing the lock file</span> </a>  </li><li class="astro-wivpmdcq" style="--depth: 1;"> <a href="#the-resolutions-field" class="astro-wivpmdcq" style="--depth: 1;"> <span class="astro-wivpmdcq" style="--depth: 1;">The resolutions field</span> </a>  </li><li class="astro-wivpmdcq" style="--depth: 1;"> <a href="#removing-the-yarnlock-file" class="astro-wivpmdcq" style="--depth: 1;"> <span class="astro-wivpmdcq" style="--depth: 1;">Removing the yarn.lock file</span> </a>  </li><li class="astro-wivpmdcq" style="--depth: 1;"> <a href="#yarn-dedupe-recommended" class="astro-wivpmdcq" style="--depth: 1;"> <span class="astro-wivpmdcq" style="--depth: 1;">yarn dedupe (recommended)</span> </a>  </li> </ul>  </li><li class="astro-wivpmdcq" style="--depth: 0;"> <a href="#bonus-listing-all-versions-of-a-package" class="astro-wivpmdcq" style="--depth: 0;"> <span class="astro-wivpmdcq" style="--depth: 0;">Bonus: listing all versions of a package</span> </a> <ul class="astro-wivpmdcq" style="--depth: 1;"> <li class="astro-wivpmdcq" style="--depth: 1;"> <a href="#yarn-1" class="astro-wivpmdcq" style="--depth: 1;"> <span class="astro-wivpmdcq" style="--depth: 1;">Yarn 1</span> </a>  </li><li class="astro-wivpmdcq" style="--depth: 1;"> <a href="#yarn-2" class="astro-wivpmdcq" style="--depth: 1;"> <span class="astro-wivpmdcq" style="--depth: 1;">Yarn 2+</span> </a>  </li> </ul>  </li><li class="astro-wivpmdcq" style="--depth: 0;"> <a href="#conclusion" class="astro-wivpmdcq" style="--depth: 0;"> <span class="astro-wivpmdcq" style="--depth: 0;">Conclusion</span> </a>  </li> </ul> </nav></starlight-toc><script type="module" src="/_astro/TableOfContents.astro_astro_type_script_index_0_lang.CKWWgpjV.js"></script></div></div> </div> </aside> <div class="main-pane astro-cc6hbr37">  <main data-pagefind-body class="astro-7dtmslok" lang="en" dir="ltr">    <div class="content-panel astro-5rxjxqii"> <div class="sl-container astro-5rxjxqii"> <h1 id="_top" class="astro-nabvmdom"> Yarn.lock: How to update it  </h1>   <p class="astro-nabvmdom"> 5 min read  • Posted on September 5, 2021 (Edited on Jan 24, 2025) </p> <div class="sl-markdown-content astro-nabvmdom" style="margin-top: 0"><code data-tag=yarn>#yarn</code> <code data-tag=tip>#tip</code></div> </div> </div>  <div class="content-panel astro-5rxjxqii"> <div class="sl-container astro-5rxjxqii"> <div class="sl-markdown-content"> <div class="sl-heading-wrapper level-h2"><h2 id="introduction">Introduction</h2><a class="sl-anchor-link" href="#introduction"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Introduction”</span></a></div>
<p>Knowing how to read a <code dir="auto">yarn.lock</code> file is important: it lists the packages that your application will end up using. Sure, your dependencies are listed in your <code dir="auto">package.json</code>, it only lists your direct deps, not the deps of your deps.</p>
<p>So, if you really care about your app, you should be able to read this lock file, and here is another post about this:</p>
<div data-pagefind-ignore> <div class="sl-link-card astro-yaqysplk"> <span class="sl-flex stack astro-yaqysplk"> <a href="/posts/yarn-lock-how-to-read-it" class="astro-yaqysplk"> <span class="title astro-yaqysplk">Yarn.lock: How to read it</span> </a> <span class="description astro-yaqysplk"><p>2 min read</p><p>Yarn comes with a lock file `yarn.lock` that isn’t made for human to read it. But when using the tool, you sometimes need to go through it to be able to understand it (specially when reviewing PRs)</p></span> </span> <svg aria-hidden="true" class="icon rtl:flip astro-yaqysplk astro-yhs5w42p" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.333em;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg> </div>  </div>
<p>If you spot something weird in the lockfile, this article will tell you how to fix it.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="problem">Problem</h2><a class="sl-anchor-link" href="#problem"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Problem”</span></a></div>
<p>Note: I’ll use the semver syntax, more information on it here: <a href="https://jubianchi.github.io/semver-check/">https://jubianchi.github.io/semver-check/</a>.</p>
<p>Let’s say you depend on a module <code dir="auto">A</code> that itself depends on <code dir="auto">B</code> with the version <code dir="auto">^1.1.1</code>. When <code dir="auto">A</code> will be installed, yarn will resolve the latest version of <code dir="auto">B</code> matching this version range (let say here <code dir="auto">1.1.4</code>). Now you’ll have in your lock file something like: “A depends on B@^1.1.1, resolved resolved to 1.1.4”.</p>
<p>Later, you want to install a package <code dir="auto">C</code>, depending on <code dir="auto">B@^1.1.5</code>. And when <code dir="auto">C</code> is added, <code dir="auto">B@1.1.5</code> just came out. So you end up with <code dir="auto">B@1.1.4</code> <strong>AND</strong> <code dir="auto">B@1.1.5</code> in your node_modules.</p>
<p>You ended up here:</p>
<p><img src="/_astro/yarn-deps-initial.Bp6WYYdO_2tEVgq.webp" alt="Illustration showing that A imports B@^1.1.1 resolved in B@1.1.4, and that C imports B@^1.1.5 resolved in B@1.1.5, resulting in having 2 versions of B" loading="lazy" decoding="async" fetchpriority="auto" width="1297" height="639"></p>
<p>But ideally, you should end up like that:</p>
<p><img src="/_astro/yarn-deps-desired.C-1X1V9o_ZVffwD.webp" alt="Illustration showing that A imports B@^1.1.1 resolved, and C imports B@^1.1.5, both resolved in B@1.1.5, resulting in having only 1 version of B" loading="lazy" decoding="async" fetchpriority="auto" width="1345" height="639"></p>
<p>The behaviour is indeed intended: the main goal of lock file is to ensure that your dependencies won’t change if you don’t ask for it. As you didn’t ask for an update of A, it shouldn’t update neither it nor its dependencies. And as updating B from 1.1.4 to 1.1.5 could introduce some regression, <code dir="auto">yarn</code> won’t update it.</p>
<p><strong>Real world example:</strong> you are using <a href="https://github.com/facebook/create-react-app"><code dir="auto">create-react-app</code></a>, and you want to also to use <a href="https://github.com/xojs/xo"><code dir="auto">xo</code></a>, as both come with their own version of ESLint pre-installed, you could end up with 2 ESLint installed.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="solutions">Solutions</h2><a class="sl-anchor-link" href="#solutions"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Solutions”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="manually-editing-the-lock-file">Manually editing the lock file</h3><a class="sl-anchor-link" href="#manually-editing-the-lock-file"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Manually editing the lock file”</span></a></div>
<p>I personally really like this solution, as this is the one that allows you to fully manipulate the resolution mechanism.</p>
<p>With our previous example, we should have something like the following in the <code dir="auto">yarn.lock</code> file:</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.p1z7b.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="lock"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">"B@^1.1.1":</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">version "1.1.4"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">resolved "https://registry.yarnpkg.com/B-1.1.4.tgz#???"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">integrity sha512-???==</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">"B@^1.1.5":</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">version "1.1.5"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">resolved "https://registry.yarnpkg.com/B-1.1.5.tgz#???"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">integrity sha512-???==</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="&#x22;B@^1.1.1&#x22;:  version &#x22;1.1.4&#x22;  resolved &#x22;https://registry.yarnpkg.com/B-1.1.4.tgz#???&#x22;  integrity sha512-???==&#x22;B@^1.1.5&#x22;:  version &#x22;1.1.5&#x22;  resolved &#x22;https://registry.yarnpkg.com/B-1.1.5.tgz#???&#x22;  integrity sha512-???=="><div></div></button></div></figure></div>
<p>We can simply edit the file, and merge the 2 versions like that:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="lock"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">"B@^1.1.1", "B@^1.1.5":</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">version "1.1.5"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">resolved "https://registry.yarnpkg.com/B-1.1.5.tgz#???"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#d6deeb;--1:#403f53">  </span></span><span style="--0:#d6deeb;--1:#403f53">integrity sha512-???==</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="&#x22;B@^1.1.1&#x22;, &#x22;B@^1.1.5&#x22;:  version &#x22;1.1.5&#x22;  resolved &#x22;https://registry.yarnpkg.com/B-1.1.5.tgz#???&#x22;  integrity sha512-???=="><div></div></button></div></figure></div>
<p>Once this has been changed, we just have to run <code dir="auto">yarn install</code> and 💥, B@1.1.4 will no longer be installed, only B@1.1.5.</p>
<aside aria-label="Note" class="starlight-aside starlight-aside--note"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z"></path></svg>Note</p><div class="starlight-aside__content"><p>All of those examples are using yarn v1’s lock file’s syntax. And technically yarn v1 &#x26; yarn v2+ syntaxes for the lock file are not exactly the same. But they are very similar, so I’ll consider them equal for this blog post (if you want to see the differences, see the <a href="https://dev.to/arcanis/introducing-yarn-2-4eh1#new-lockfile-format">changelog</a>).</p></div></aside>
<div class="sl-heading-wrapper level-h3"><h3 id="the-resolutions-field">The <code dir="auto">resolutions</code> field</h3><a class="sl-anchor-link" href="#the-resolutions-field"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “The resolutions field”</span></a></div>
<p><code dir="auto">Yarn</code> comes with a custom <code dir="auto">resolutions</code> field you can set in your package.json</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#096E72">"resolutions"</span><span style="--0:#D6DEEB;--1:#403F53">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">"B"</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#C789D6;--1:#7C5686">1.1.5</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;resolutions&#x22;: {    &#x22;B&#x22;: &#x22;1.1.5&#x22;  }}"><div></div></button></div></figure></div>
<p>This will force <strong>all</strong> versions of B to resolve to this one version <code dir="auto">1.1.5</code>.</p>
<p>I don’t like this approach, as it’ll force all versions (even incompatible ones like a potential v2 that could also be used in your deps) to be updated to this unique one. So I’d reserve this for modules you <strong>know</strong> cannot exist in multiple versions, but I wouldn’t use it otherwise.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="removing-the-yarnlock-file">Removing the <code dir="auto">yarn.lock</code> file</h3><a class="sl-anchor-link" href="#removing-the-yarnlock-file"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Removing the yarn.lock file”</span></a></div>
<p>If you remove the lock file completely and then run <code dir="auto">yarn install</code>, yarn will re-resolve all versions to the latest allowed by their specified ranges, and thus fix all those duplicated deps.</p>
<p>I don’t recommend doing that as not all packages respect the semver convention. So you could introduce a lot of regressions in your code.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="yarn-dedupe-recommended"><code dir="auto">yarn dedupe</code> (recommended)</h3><a class="sl-anchor-link" href="#yarn-dedupe-recommended"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “yarn dedupe (recommended)”</span></a></div>
<p>If you’re using yarn 2+, you have access to the command <code dir="auto">yarn dedupe B</code> (to dedupe all the B packages).</p>
<p>If you’re running on yarn 2+, I strongly recommend using this, as it’s the easiest and safest method of all of those listed here.</p>
<p><a href="https://yarnpkg.com/cli/dedupe">https://yarnpkg.com/cli/dedupe</a></p>
<div class="sl-heading-wrapper level-h2"><h2 id="bonus-listing-all-versions-of-a-package">Bonus: listing all versions of a package</h2><a class="sl-anchor-link" href="#bonus-listing-all-versions-of-a-package"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Bonus: listing all versions of a package”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="yarn-1">Yarn 1</h3><a class="sl-anchor-link" href="#yarn-1"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Yarn 1”</span></a></div>
<p>If you using yarn 1, you can use <code dir="auto">yarn list --pattern &#x3C;package-name></code> to see all the different versions (and where they are coming from) of a package:</p>
<p><img src="/_astro/mcsxmz3rhti0lro89ur0.Cn5GuOsA_ZyLPYU.webp" alt="output of yarn 1' &#34;yarn list&#34; command" loading="lazy" decoding="async" fetchpriority="auto" width="496" height="494"></p>
<p><a href="https://classic.yarnpkg.com/en/docs/cli/list">https://classic.yarnpkg.com/en/docs/cli/list</a></p>
<div class="sl-heading-wrapper level-h3"><h3 id="yarn-2">Yarn 2+</h3><a class="sl-anchor-link" href="#yarn-2"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Yarn 2+”</span></a></div>
<p>Yarn berry (version 2 and above), has the command <code dir="auto">yarn why</code> (it already existed in yarn 1, but the output was completely different).</p>
<p><img src="/_astro/ep7g6avdbbj7qgalznb6.DDj0ONSf_1iBi3l.webp" alt="Output of the command &#34;yarn why '<'package'>'&#34;, showing all the versions of this package installed, why it was installed, what version range was required each time, and which versions were resolved" loading="lazy" decoding="async" fetchpriority="auto" width="632" height="860"></p>
<p>The main difference between <code dir="auto">yarn list</code> in yarn 1 and <code dir="auto">yarn why</code> in yarn 2+ is that, in addition to having the version installed + the parent that required this package, you also have the version ranges that were requested each time.</p>
<p>Also, the tree is flatten here to only have the most meaningful information. But if you want to have a deep tree (like in yarn 1), you can run <code dir="auto">yarn why &#x3C;package> -R</code>:</p>
<p><img src="/_astro/g7z3svnxfq8oz43ogycn.CcDYatmN_Z24xkDo.webp" alt="Output of the command &#34;yarn why '<'package'>' -R&#34;, showing the same results as before, but also including all of the parent deps of those deps, recursively" loading="lazy" decoding="async" fetchpriority="auto" width="1148" height="1238"></p>
<div class="sl-heading-wrapper level-h2"><h2 id="conclusion">Conclusion</h2><a class="sl-anchor-link" href="#conclusion"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Conclusion”</span></a></div>
<p>When working on removing duplicated packages, knowing how to read and modify your <code dir="auto">yarn.lock</code> file is quite empowering.</p>
<p>And if you’re running yarn 2+, you can just use <code dir="auto">yarn dedupe &#x3C;package></code>, which will save you a lot of work.</p> </div> <footer class="sl-flex astro-w3ok7wb5"> <div class="meta sl-flex astro-w3ok7wb5">  <p>Last updated: <time datetime="2025-01-24T00:00:00.000Z">Jan 24, 2025</time></p> </div> <div class="pagination-links print:hidden astro-hpgazm5r" dir="ltr">   </div>   </footer>  </div> </div>   </main> </div> </div>   </div> </div>  <script type="module">delete document.documentElement.dataset.hasSidebar;
//# sourceMappingURL=PageFrame.astro_astro_type_script_index_0_lang.BPqoaBcd.js.map</script>  <!-- 100% privacy-first analytics --><script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script> <noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade"></noscript><!-- Datadog --><script src="https://www.datadoghq-browser-agent.com/eu1/v6/datadog-rum.js" type="text/javascript"></script><script>(function(){const MODE = "production";
const GITHUB_RUN_ID = "18575322669";
const datadogClientToken = "pub65a306a096de7824a32d9879df04de68";

  window.DD_RUM &&
    window.DD_RUM.init({
      clientToken: datadogClientToken,
      applicationId: "d5dc836c-8af7-48c6-85d4-ada010f382f5",
      site: "datadoghq.eu",
      service: "ayc0.github.io",
      env: MODE,
      version: GITHUB_RUN_ID,
      sessionSampleRate: 100,
      sessionReplaySampleRate: 20,
      defaultPrivacyLevel: "allow",
    });
})();</script><script type="text/javascript" src="https://www.datadoghq-browser-agent.com/eu1/v6/datadog-logs.js"></script><script>(function(){const GITHUB_RUN_ID = "18575322669";
const datadogClientToken = "pub65a306a096de7824a32d9879df04de68";

  window.DD_LOGS &&
    window.DD_LOGS.init({
      clientToken: datadogClientToken,
      site: "datadoghq.eu",
      version: GITHUB_RUN_ID,
      forwardErrorsToLogs: true,
      sessionSampleRate: 100,
    });
})();</script> </body></html>