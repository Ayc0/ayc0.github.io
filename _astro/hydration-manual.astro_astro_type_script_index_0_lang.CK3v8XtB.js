import{j as M}from"./jsx-runtime.D_zvdyIk.js";import"./index.CRdpAhVf.js";import{c as T}from"./client.DSuMSfvy.js";import"./index.Bb8JjhAW.js";class b{diff(e,n,t={}){let i;typeof t=="function"?(i=t,t={}):"callback"in t&&(i=t.callback);const d=this.castInput(e,t),a=this.castInput(n,t),u=this.removeEmpty(this.tokenize(d,t)),s=this.removeEmpty(this.tokenize(a,t));return this.diffWithOptionsObj(u,s,t,i)}diffWithOptionsObj(e,n,t,i){var d;const a=r=>{if(r=this.postProcess(r,t),i){setTimeout(function(){i(r)},0);return}else return r},u=n.length,s=e.length;let l=1,o=u+s;t.maxEditLength!=null&&(o=Math.min(o,t.maxEditLength));const p=(d=t.timeout)!==null&&d!==void 0?d:1/0,C=Date.now()+p,c=[{oldPos:-1,lastComponent:void 0}];let f=this.extractCommon(c[0],n,e,0,t);if(c[0].oldPos+1>=s&&f+1>=u)return a(this.buildValues(c[0].lastComponent,n,e));let v=-1/0,x=1/0;const E=()=>{for(let r=Math.max(v,-l);r<=Math.min(x,l);r+=2){let m;const P=c[r-1],g=c[r+1];P&&(c[r-1]=void 0);let L=!1;if(g){const y=g.oldPos-r;L=g&&0<=y&&y<u}const j=P&&P.oldPos+1<s;if(!L&&!j){c[r]=void 0;continue}if(!j||L&&P.oldPos<g.oldPos?m=this.addToPath(g,!0,!1,0,t):m=this.addToPath(P,!1,!0,1,t),f=this.extractCommon(m,n,e,r,t),m.oldPos+1>=s&&f+1>=u)return a(this.buildValues(m.lastComponent,n,e))||!0;c[r]=m,m.oldPos+1>=s&&(x=Math.min(x,r-1)),f+1>=u&&(v=Math.max(v,r+1))}l++};if(i)(function r(){setTimeout(function(){if(l>o||Date.now()>C)return i(void 0);E()||r()},0)})();else for(;l<=o&&Date.now()<=C;){const r=E();if(r)return r}}addToPath(e,n,t,i,d){const a=e.lastComponent;return a&&!d.oneChangePerToken&&a.added===n&&a.removed===t?{oldPos:e.oldPos+i,lastComponent:{count:a.count+1,added:n,removed:t,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:t,previousComponent:a}}}extractCommon(e,n,t,i,d){const a=n.length,u=t.length;let s=e.oldPos,l=s-i,o=0;for(;l+1<a&&s+1<u&&this.equals(t[s+1],n[l+1],d);)l++,s++,o++,d.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return o&&!d.oneChangePerToken&&(e.lastComponent={count:o,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=s,l}equals(e,n,t){return t.comparator?t.comparator(e,n):e===n||!!t.ignoreCase&&e.toLowerCase()===n.toLowerCase()}removeEmpty(e){const n=[];for(let t=0;t<e.length;t++)e[t]&&n.push(e[t]);return n}castInput(e,n){return e}tokenize(e,n){return Array.from(e)}join(e){return e.join("")}postProcess(e,n){return e}get useLongestToken(){return!1}buildValues(e,n,t){const i=[];let d;for(;e;)i.push(e),d=e.previousComponent,delete e.previousComponent,e=d;i.reverse();const a=i.length;let u=0,s=0,l=0;for(;u<a;u++){const o=i[u];if(o.removed)o.value=this.join(t.slice(l,l+o.count)),l+=o.count;else{if(!o.added&&this.useLongestToken){let p=n.slice(s,s+o.count);p=p.map(function(C,c){const f=t[l+c];return f.length>C.length?f:C}),o.value=this.join(p)}else o.value=this.join(n.slice(s,s+o.count));s+=o.count,o.added||(l+=o.count)}}return i}}class I extends b{}const O=new I;function R(h,e,n){return O.diff(h,e,n)}const w=document.getElementById("root"),D=w.innerHTML;T.hydrateRoot(w,M.jsx("div",{children:"World"}),{onRecoverableError:h=>{console.warn("[CUSTOM] Recoverable error",h);const e=w.innerHTML;console.log({before:D,after:e,diff:R(D,e)})}});
//# sourceMappingURL=hydration-manual.astro_astro_type_script_index_0_lang.CK3v8XtB.js.map
