{"version":3,"file":"client.BUuyOUFw.js","sources":["../../node_modules/@astrojs/react/static-html.js","../../node_modules/@astrojs/react/client.js"],"sourcesContent":["import { createElement as h } from 'react';\n\n/**\n * Astro passes `children` as a string of HTML, so we need\n * a wrapper `div` to render that content as VNodes.\n *\n * As a bonus, we can signal to React that this subtree is\n * entirely static and will never change via `shouldComponentUpdate`.\n */\nconst StaticHtml = ({ value, name, hydrate = true }) => {\n\tif (!value) return null;\n\tconst tagName = hydrate ? 'astro-slot' : 'astro-static-slot';\n\treturn h(tagName, {\n\t\tname,\n\t\tsuppressHydrationWarning: true,\n\t\tdangerouslySetInnerHTML: { __html: value },\n\t});\n};\n\n/**\n * This tells React to opt-out of re-rendering this subtree,\n * In addition to being a performance optimization,\n * this also allows other frameworks to attach to `children`.\n *\n * See https://preactjs.com/guide/v8/external-dom-mutations\n */\nStaticHtml.shouldComponentUpdate = () => false;\n\nexport default StaticHtml;\n","import { createElement, startTransition } from 'react';\nimport { createRoot, hydrateRoot } from 'react-dom/client';\nimport StaticHtml from './static-html.js';\n\nfunction isAlreadyHydrated(element) {\n\tfor (const key in element) {\n\t\tif (key.startsWith('__reactContainer')) {\n\t\t\treturn key;\n\t\t}\n\t}\n}\n\nfunction createReactElementFromDOMElement(element) {\n\tlet attrs = {};\n\tfor (const attr of element.attributes) {\n\t\tattrs[attr.name] = attr.value;\n\t}\n\t// If the element has no children, we can create a simple React element\n\tif (element.firstChild === null) {\n\t\treturn createElement(element.localName, attrs);\n\t}\n\n\treturn createElement(\n\t\telement.localName,\n\t\tattrs,\n\t\tArray.from(element.childNodes)\n\t\t\t.map((c) => {\n\t\t\t\tif (c.nodeType === Node.TEXT_NODE) {\n\t\t\t\t\treturn c.data;\n\t\t\t\t} else if (c.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\t\treturn createReactElementFromDOMElement(c);\n\t\t\t\t} else {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.filter((a) => !!a),\n\t);\n}\n\nfunction getChildren(childString, experimentalReactChildren) {\n\tif (experimentalReactChildren && childString) {\n\t\tlet children = [];\n\t\tlet template = document.createElement('template');\n\t\ttemplate.innerHTML = childString;\n\t\tfor (let child of template.content.children) {\n\t\t\tchildren.push(createReactElementFromDOMElement(child));\n\t\t}\n\t\treturn children;\n\t} else if (childString) {\n\t\treturn createElement(StaticHtml, { value: childString });\n\t} else {\n\t\treturn undefined;\n\t}\n}\n\n// Keep a map of roots so we can reuse them on re-renders\nlet rootMap = new WeakMap();\nconst getOrCreateRoot = (element, creator) => {\n\tlet root = rootMap.get(element);\n\tif (!root) {\n\t\troot = creator();\n\t\trootMap.set(element, root);\n\t}\n\treturn root;\n};\n\nexport default (element) =>\n\t(Component, props, { default: children, ...slotted }, { client }) => {\n\t\tif (!element.hasAttribute('ssr')) return;\n\n\t\tconst actionKey = element.getAttribute('data-action-key');\n\t\tconst actionName = element.getAttribute('data-action-name');\n\t\tconst stringifiedActionResult = element.getAttribute('data-action-result');\n\n\t\tconst formState =\n\t\t\tactionKey && actionName && stringifiedActionResult\n\t\t\t\t? [JSON.parse(stringifiedActionResult), actionKey, actionName]\n\t\t\t\t: undefined;\n\n\t\tconst renderOptions = {\n\t\t\tidentifierPrefix: element.getAttribute('prefix'),\n\t\t\tformState,\n\t\t};\n\t\tfor (const [key, value] of Object.entries(slotted)) {\n\t\t\tprops[key] = createElement(StaticHtml, { value, name: key });\n\t\t}\n\n\t\tconst componentEl = createElement(\n\t\t\tComponent,\n\t\t\tprops,\n\t\t\tgetChildren(children, element.hasAttribute('data-react-children')),\n\t\t);\n\t\tconst rootKey = isAlreadyHydrated(element);\n\t\t// HACK: delete internal react marker for nested components to suppress aggressive warnings\n\t\tif (rootKey) {\n\t\t\tdelete element[rootKey];\n\t\t}\n\t\tif (client === 'only') {\n\t\t\treturn startTransition(() => {\n\t\t\t\tconst root = getOrCreateRoot(element, () => {\n\t\t\t\t\tconst r = createRoot(element);\n\t\t\t\t\telement.addEventListener('astro:unmount', () => r.unmount(), { once: true });\n\t\t\t\t\treturn r;\n\t\t\t\t});\n\t\t\t\troot.render(componentEl);\n\t\t\t});\n\t\t}\n\t\tstartTransition(() => {\n\t\t\tconst root = getOrCreateRoot(element, () => {\n\t\t\t\tconst r = hydrateRoot(element, componentEl, renderOptions);\n\t\t\t\telement.addEventListener('astro:unmount', () => r.unmount(), { once: true });\n\t\t\t\treturn r;\n\t\t\t});\n\t\t\troot.render(componentEl);\n\t\t});\n\t};\n"],"names":["StaticHtml","value","name","hydrate","tagName","h","isAlreadyHydrated","element","key","createReactElementFromDOMElement","attrs","attr","createElement","c","a","getChildren","childString","experimentalReactChildren","children","template","child","rootMap","getOrCreateRoot","creator","root","client","Component","props","slotted","actionKey","actionName","stringifiedActionResult","formState","renderOptions","componentEl","rootKey","startTransition","r","createRoot","hydrateRoot"],"mappings":"iFASA,MAAMA,EAAa,CAAC,CAAE,MAAAC,EAAO,KAAAC,EAAM,QAAAC,EAAU,EAAI,IAAO,CACvD,GAAI,CAACF,EAAO,OAAO,KACnB,MAAMG,EAAUD,EAAU,aAAe,oBACzC,OAAOE,EAAAA,cAAED,EAAS,CACjB,KAAAF,EACA,yBAA0B,GAC1B,wBAAyB,CAAE,OAAQD,CAAO,CAC5C,CAAE,CACF,EASAD,EAAW,sBAAwB,IAAM,GCtBzC,SAASM,EAAkBC,EAAS,CACnC,UAAWC,KAAOD,EACjB,GAAIC,EAAI,WAAW,kBAAkB,EACpC,OAAOA,CAGV,CAEA,SAASC,EAAiCF,EAAS,CAClD,IAAIG,EAAQ,CAAE,EACd,UAAWC,KAAQJ,EAAQ,WAC1BG,EAAMC,EAAK,IAAI,EAAIA,EAAK,MAGzB,OAAIJ,EAAQ,aAAe,KACnBK,gBAAcL,EAAQ,UAAWG,CAAK,EAGvCE,EAAa,cACnBL,EAAQ,UACRG,EACA,MAAM,KAAKH,EAAQ,UAAU,EAC3B,IAAKM,GACDA,EAAE,WAAa,KAAK,UAChBA,EAAE,KACCA,EAAE,WAAa,KAAK,aACvBJ,EAAiCI,CAAC,EAEzC,MAED,EACA,OAAQC,GAAM,CAAC,CAACA,CAAC,CACnB,CACF,CAEA,SAASC,EAAYC,EAAaC,EAA2B,CAC5D,GAAIA,GAA6BD,EAAa,CAC7C,IAAIE,EAAW,CAAE,EACbC,EAAW,SAAS,cAAc,UAAU,EAChDA,EAAS,UAAYH,EACrB,QAASI,KAASD,EAAS,QAAQ,SAClCD,EAAS,KAAKT,EAAiCW,CAAK,CAAC,EAEtD,OAAOF,CACP,KAAM,QAAIF,EACHJ,EAAa,cAACZ,EAAY,CAAE,MAAOgB,CAAW,CAAE,EAEvD,MAEF,CAGA,IAAIK,EAAU,IAAI,QAClB,MAAMC,EAAkB,CAACf,EAASgB,IAAY,CAC7C,IAAIC,EAAOH,EAAQ,IAAId,CAAO,EAC9B,OAAKiB,IACJA,EAAOD,EAAS,EAChBF,EAAQ,IAAId,EAASiB,CAAI,GAEnBA,CACR,EAEAC,EAAgBlB,GACf,CAACmB,EAAWC,EAAO,CAAE,QAAST,EAAU,GAAGU,CAAO,EAAI,CAAE,OAAAH,KAAa,CACpE,GAAI,CAAClB,EAAQ,aAAa,KAAK,EAAG,OAElC,MAAMsB,EAAYtB,EAAQ,aAAa,iBAAiB,EAClDuB,EAAavB,EAAQ,aAAa,kBAAkB,EACpDwB,EAA0BxB,EAAQ,aAAa,oBAAoB,EAEnEyB,EACLH,GAAaC,GAAcC,EACxB,CAAC,KAAK,MAAMA,CAAuB,EAAGF,EAAWC,CAAU,EAC3D,OAEEG,EAAgB,CACrB,iBAAkB1B,EAAQ,aAAa,QAAQ,EAC/C,UAAAyB,CACA,EACD,SAAW,CAACxB,EAAKP,CAAK,IAAK,OAAO,QAAQ2B,CAAO,EAChDD,EAAMnB,CAAG,EAAII,gBAAcZ,EAAY,CAAE,MAAAC,EAAO,KAAMO,EAAK,EAG5D,MAAM0B,EAActB,EAAa,cAChCc,EACAC,EACAZ,EAAYG,EAAUX,EAAQ,aAAa,qBAAqB,CAAC,CACjE,EACK4B,EAAU7B,EAAkBC,CAAO,EAKzC,GAHI4B,GACH,OAAO5B,EAAQ4B,CAAO,EAEnBV,IAAW,OACd,OAAOW,EAAe,gBAAC,IAAM,CACfd,EAAgBf,EAAS,IAAM,CAC3C,MAAM8B,EAAIC,EAAU,WAAC/B,CAAO,EAC5B,OAAAA,EAAQ,iBAAiB,gBAAiB,IAAM8B,EAAE,UAAW,CAAE,KAAM,GAAM,EACpEA,CACZ,CAAK,EACI,OAAOH,CAAW,CAC3B,CAAI,EAEFE,EAAAA,gBAAgB,IAAM,CACRd,EAAgBf,EAAS,IAAM,CAC3C,MAAM8B,EAAIE,EAAW,YAAChC,EAAS2B,EAAaD,CAAa,EACzD,OAAA1B,EAAQ,iBAAiB,gBAAiB,IAAM8B,EAAE,UAAW,CAAE,KAAM,GAAM,EACpEA,CACX,CAAI,EACI,OAAOH,CAAW,CAC1B,CAAG,CACD","x_google_ignoreList":[0,1]}