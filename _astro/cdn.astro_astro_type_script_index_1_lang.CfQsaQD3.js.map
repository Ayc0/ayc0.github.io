{"version":3,"file":"cdn.astro_astro_type_script_index_1_lang.CfQsaQD3.js","sources":["../../src/components/experiments/page-react-extension/extension.ts"],"sourcesContent":["// const renderers = new Map();\n// let uidCounter = 0;\n\n// window.customDevTools = false;\n// if (!window.__REACT_DEVTOOLS_GLOBAL_HOOK__) {\n//   customDevTools = true;\n//   console.log(\n//     \"%c[CUSTOM] Injecting custom React DevTools hook!\",\n//     \"color:orangered\",\n//   );\n//   window.__REACT_DEVTOOLS_GLOBAL_HOOK__ = {\n//     // rendererInterfaces: new Map(),\n//     // listeners: {},\n\n//     // backends: new Map(),\n\n//     // Fast Refresh for web relies on this.\n//     renderers,\n//     // hasUnsupportedRendererAttached: false,\n\n//     // emit: () => {},\n//     // getFiberRoots: () => {},\n//     inject: (renderer) => {\n//       const id = ++uidCounter;\n//       // console.log(\"inject\", renderer);\n//       renderers.set(id, renderer);\n//     },\n//     // on: () => {},\n//     // off: () => {},\n//     // sub: () => {},\n\n//     // This is a legacy flag.\n//     // React v16 checks the hook for this to ensure DevTools is new enough.\n//     supportsFiber: true,\n\n//     // React Flight Client checks the hook for this to ensure DevTools is new enough.\n//     supportsFlight: true,\n\n//     // React calls these methods.\n//     // checkDCE: () => {},\n//     // onCommitFiberUnmount: () => {}, // ✅\n//     // onCommitFiberRoot: () => {}, // ✅\n//     // // React v18.0+\n//     // onPostCommitFiberRoot: () => {}, // ✅\n//     // setStrictMode: () => {},\n\n//     // // Schedule Profiler runtime helpers.\n//     // // These internal React modules to report their own boundaries\n//     // // which in turn enables the profiler to dim or filter internal frames.\n//     // getInternalModuleRanges: () => {},\n//     // registerInternalModuleStart: () => {},\n//     // registerInternalModuleStop: () => {},\n//   };\n// }\n\n// const initialOnCommitFiberRoot =\n//   window.__REACT_DEVTOOLS_GLOBAL_HOOK__.onCommitFiberRoot;\n\n// window.__REACT_DEVTOOLS_GLOBAL_HOOK__.onCommitFiberRoot = (...args) => {\n//   try {\n//     initialOnCommitFiberRoot(...args);\n//   } catch (e) {}\n\n//   console.log(\"onCommitFiberRoot\", args);\n// };\n\n// const initialOnCommitFiberUnmount =\n//   window.__REACT_DEVTOOLS_GLOBAL_HOOK__.onCommitFiberUnmount;\n\n// window.__REACT_DEVTOOLS_GLOBAL_HOOK__.onCommitFiberUnmount = (...args) => {\n//   try {\n//     initialOnCommitFiberUnmount(...args);\n//   } catch (e) {}\n\n//   console.log(\"onCommitFiberUnmount\", args);\n// };\n\n// const initialOnPostCommitFiberRoot =\n//   window.__REACT_DEVTOOLS_GLOBAL_HOOK__.onPostCommitFiberRoot;\n\n// window.__REACT_DEVTOOLS_GLOBAL_HOOK__.onPostCommitFiberRoot = (...args) => {\n//   try {\n//     initialOnPostCommitFiberRoot(...args);\n//   } catch (e) {}\n\n//   console.log(\"onPostCommitFiberRoot\", args);\n\n// };\n\nimport { instrument, traverseRenderedFibers } from \"bippy\"; // must be imported BEFORE react\n\ninstrument({\n  onCommitFiberRoot(_rendererID, root) {\n    // console.log(\"root ready to commit\", rendererID, root);\n    traverseRenderedFibers(root, (fiber) => {\n      console.log(\"fiber rendered\", fiber);\n    });\n  },\n  onPostCommitFiberRoot(rendererID, root) {\n    console.log(\"root with effects committed\", rendererID, root);\n    // See https://unpkg.com/browse/react-dom@18.3.1/umd/react-dom.development.js#L12003\n    console.log(\n      \"[CUSTOM] Root mode:\",\n      root.tag === 1 ? \"ConcurrentRoot\" : \"LegacyRoot\",\n    );\n  },\n  onCommitFiberUnmount(rendererID, fiber) {\n    console.log(\"fiber unmounted\", rendererID, fiber);\n  },\n});\n"],"names":["instrument","_rendererID","root","traverseRenderedFibers","fiber","rendererID"],"mappings":"uDA2FAA,EAAW,CACT,kBAAkBC,EAAaC,EAAM,CAEnCC,EAAuBD,EAAOE,GAAU,CACtC,QAAQ,IAAI,iBAAkBA,CAAK,CACrC,CAAC,CACH,EACA,sBAAsBC,EAAYH,EAAM,CACtC,QAAQ,IAAI,8BAA+BG,EAAYH,CAAI,EAE3D,QAAQ,IACN,sBACAA,EAAK,MAAQ,EAAI,iBAAmB,YAAA,CAExC,EACA,qBAAqBG,EAAYD,EAAO,CACtC,QAAQ,IAAI,kBAAmBC,EAAYD,CAAK,CAClD,CACF,CAAC"}