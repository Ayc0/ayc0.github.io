{"version":3,"file":"a.BSrEmNWG.js","sources":["../../src/components/post-react-life-cycles-and-timings/frame.tsx","../../src/components/post-react-life-cycles-and-timings/a.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport classes from \"./frame.module.css\";\n\nexport const createFrame = () => {\n  const console = { log: (..._messages: string[]) => {}, clear: () => {} };\n\n  const Logs = () => {\n    const [logs, setLogs] = React.useState<React.ReactNode[]>([]);\n\n    console.log = (...messages: string[]) => {\n      React.startTransition(() =>\n        setLogs((logs) => [...logs, messages.join(\" \")]),\n      );\n    };\n\n    console.clear = () => {\n      React.startTransition(() =>\n        setLogs([\n          <span className={classes[\"clear-console\"]}>Console was cleared</span>,\n        ]),\n      );\n    };\n\n    return (\n      <pre className={classes.console}>\n        <code>\n          {logs.map((log, index) => (\n            <>\n              {index !== 0 ? <hr className={classes[\"log-separator\"]} /> : null}\n              <div className={classes.log}>{log}</div>\n            </>\n          ))}\n        </code>\n      </pre>\n    );\n  };\n\n  const Frame = ({ children }: { children: React.ReactNode }) => {\n    return (\n      <div className={classes.frame}>\n        <div className={`not-content ${classes.window}`}>{children}</div>\n\n        <Logs />\n      </div>\n    );\n  };\n\n  const useConsole = () => {\n    const ref = React.useRef<HTMLDivElement | null>(null);\n    const getRef = () => (ref.current ? \"node\" : \"null\");\n\n    return {\n      console: {\n        clear: () => console.clear(),\n        log: (...messages: string[]) => console.log(...messages, getRef()),\n      },\n      setNode: (node: HTMLDivElement | null) => {\n        ref.current = node;\n      },\n    };\n  };\n\n  return {\n    console,\n    useConsole,\n    Frame,\n  };\n};\n","import * as React from \"react\";\n\nimport { createFrame } from \"./frame\";\n\nconst { console, useConsole, Frame } = createFrame();\n\n// ---\n\nfunction Component() {\n  const { console, setNode } = useConsole();\n\n  console.log(\"render\");\n\n  React.useLayoutEffect(() => {\n    console.log(\"useLayoutEffect\");\n    return () => {\n      console.log(\"useLayoutEffect cleanup\");\n    };\n  });\n\n  React.useEffect(() => {\n    console.log(\"useEffect\");\n    return () => {\n      console.log(\"useEffect cleanup\");\n    };\n  });\n\n  return (\n    <div\n      ref={(node) => {\n        setNode(node);\n        console.log(\"ref\");\n      }}\n    >\n      Hello\n    </div>\n  );\n}\n\n// ---\n\nexport function A() {\n  const [state, setState] = React.useState<null | Record<string, unknown>>(\n    null,\n  );\n\n  return (\n    <Frame>\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          marginBlock: \"1rem\",\n        }}\n      >\n        <button\n          disabled={!!state}\n          onClick={() => {\n            console.clear();\n            setState({});\n          }}\n        >\n          Mount\n        </button>\n\n        <button\n          disabled={!state}\n          onClick={() => {\n            console.clear();\n            setState({});\n          }}\n        >\n          Re-render\n        </button>\n\n        <button\n          disabled={!state}\n          onClick={() => {\n            console.clear();\n            setState(null);\n          }}\n        >\n          Unmount\n        </button>\n      </div>\n\n      <div\n        style={{\n          borderTop: \"1px solid var(--sl-color-gray-5)\",\n          padding: \"1rem\",\n          minHeight: \"4rem\",\n        }}\n      >\n        {state ? <Component /> : null}\n      </div>\n    </Frame>\n  );\n}\n"],"names":["createFrame","console","_messages","Logs","logs","setLogs","React.useState","messages","React.startTransition","classes","jsx","log","index","jsxs","Fragment","ref","React.useRef","getRef","node","children","useConsole","Frame","Component","setNode","React.useLayoutEffect","React.useEffect","A","state","setState"],"mappings":"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"}