import{j as Zt}from"./jsx-runtime.D_zvdyIk.js";import{a as ad,g as nd,R as Jt,r as St}from"./index.DeO6U63H.js";import{r as Pc}from"./index.Bb8JjhAW.js";const id=Math.PI/180;function ld(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const $a=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},V={_global:$a,version:"10.2.0",isBrowser:ld(),isUnminified:/param/.test(function(u){}.toString()),dblClickWindow:400,getAngle(u){return V.angleDeg?u*id:u},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return V.DD.isDragging},isTransforming(){var u,e;return(e=(u=V.Transformer)===null||u===void 0?void 0:u.isTransforming())!==null&&e!==void 0?e:!1},isDragReady(){return!!V.DD.node},releaseCanvasOnDestroy:!0,document:$a.document,_injectGlobal(u){typeof $a.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),$a.Konva=u}},Bt=u=>{V[u.prototype.getClassName()]=u};V._injectGlobal(V);const sd=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,mc=()=>{if(typeof document>"u")throw new Error(sd)};class Ee{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Ee(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){const n=this.m;return{x:n[0]*e.x+n[2]*e.y+n[4],y:n[1]*e.x+n[3]*e.y+n[5]}}translate(e,n){return this.m[4]+=this.m[0]*e+this.m[2]*n,this.m[5]+=this.m[1]*e+this.m[3]*n,this}scale(e,n){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=n,this.m[3]*=n,this}rotate(e){const n=Math.cos(e),l=Math.sin(e),r=this.m[0]*n+this.m[2]*l,o=this.m[1]*n+this.m[3]*l,h=this.m[0]*-l+this.m[2]*n,f=this.m[1]*-l+this.m[3]*n;return this.m[0]=r,this.m[1]=o,this.m[2]=h,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,n){const l=this.m[0]+this.m[2]*n,r=this.m[1]+this.m[3]*n,o=this.m[2]+this.m[0]*e,h=this.m[3]+this.m[1]*e;return this.m[0]=l,this.m[1]=r,this.m[2]=o,this.m[3]=h,this}multiply(e){const n=this.m[0]*e.m[0]+this.m[2]*e.m[1],l=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],o=this.m[1]*e.m[2]+this.m[3]*e.m[3],h=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],f=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=n,this.m[1]=l,this.m[2]=r,this.m[3]=o,this.m[4]=h,this.m[5]=f,this}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*e,l=-this.m[1]*e,r=-this.m[2]*e,o=this.m[0]*e,h=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=l,this.m[2]=r,this.m[3]=o,this.m[4]=h,this.m[5]=f,this}getMatrix(){return this.m}decompose(){const e=this.m[0],n=this.m[1],l=this.m[2],r=this.m[3],o=this.m[4],h=this.m[5],f=e*r-n*l,g={x:o,y:h,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||n!=0){const m=Math.sqrt(e*e+n*n);g.rotation=n>0?Math.acos(e/m):-Math.acos(e/m),g.scaleX=m,g.scaleY=f/m,g.skewX=(e*l+n*r)/f,g.skewY=0}else if(l!=0||r!=0){const m=Math.sqrt(l*l+r*r);g.rotation=Math.PI/2-(r>0?Math.acos(-l/m):-Math.acos(l/m)),g.scaleX=f/m,g.scaleY=m,g.skewX=0,g.skewY=(e*l+n*r)/f}return g.rotation=x._getRotation(g.rotation),g}}const rd="[object Array]",ud="[object Number]",od="[object String]",hd="[object Boolean]",cd=Math.PI/180,fd=180/Math.PI,vi="#",dd="",gd="0",md="Konva warning: ",pc="Konva error: ",pd="rgb(",qr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},vd=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let Ul=[],yi=null;const yd=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(u){setTimeout(u,16)},x={_isElement(u){return!!(u&&u.nodeType==1)},_isFunction(u){return!!(u&&u.constructor&&u.call&&u.apply)},_isPlainObject(u){return!!u&&u.constructor===Object},_isArray(u){return Object.prototype.toString.call(u)===rd},_isNumber(u){return Object.prototype.toString.call(u)===ud&&!isNaN(u)&&isFinite(u)},_isString(u){return Object.prototype.toString.call(u)===od},_isBoolean(u){return Object.prototype.toString.call(u)===hd},isObject(u){return u instanceof Object},isValidSelector(u){if(typeof u!="string")return!1;const e=u[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(u){return u===0||u>0?1:-1},requestAnimFrame(u){Ul.push(u),Ul.length===1&&yd(function(){const e=Ul;Ul=[],e.forEach(function(n){n()})})},createCanvasElement(){mc();const u=document.createElement("canvas");try{u.style=u.style||{}}catch{}return u},createImageElement(){return mc(),document.createElement("img")},_isInDocument(u){for(;u=u.parentNode;)if(u==document)return!0;return!1},_urlToImage(u,e){const n=x.createImageElement();n.onload=function(){e(n)},n.src=u},_rgbToHex(u,e,n){return((1<<24)+(u<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb(u){u=u.replace(vi,dd);const e=parseInt(u,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){let u=(Math.random()*16777215<<0).toString(16);for(;u.length<6;)u=gd+u;return vi+u},isCanvasFarblingActive(){if(yi!==null)return yi;if(typeof document>"u")return yi=!1,!1;const u=this.createCanvasElement();u.width=10,u.height=10;const e=u.getContext("2d",{willReadFrequently:!0});e.clearRect(0,0,10,10),e.fillStyle="#282828",e.fillRect(0,0,10,10);const n=e.getImageData(0,0,10,10).data;let l=!1;for(let r=0;r<100;r++)if(n[r*4]!==40||n[r*4+1]!==40||n[r*4+2]!==40||n[r*4+3]!==255){l=!0;break}return yi=l,this.releaseCanvas(u),yi},getHitColor(){const u=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(u):u},getHitColorKey(u,e,n){return this.isCanvasFarblingActive()&&(u=Math.round(u/5)*5,e=Math.round(e/5)*5,n=Math.round(n/5)*5),vi+this._rgbToHex(u,e,n)},getSnappedHexColor(u){const e=this._hexToRgb(u);return vi+this._rgbToHex(Math.round(e.r/5)*5,Math.round(e.g/5)*5,Math.round(e.b/5)*5)},getRGB(u){let e;return u in qr?(e=qr[u],{r:e[0],g:e[1],b:e[2]}):u[0]===vi?this._hexToRgb(u.substring(1)):u.substr(0,4)===pd?(e=vd.exec(u.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(u){return u=u||"black",x._namedColorToRBA(u)||x._hex3ColorToRGBA(u)||x._hex4ColorToRGBA(u)||x._hex6ColorToRGBA(u)||x._hex8ColorToRGBA(u)||x._rgbColorToRGBA(u)||x._rgbaColorToRGBA(u)||x._hslColorToRGBA(u)},_namedColorToRBA(u){const e=qr[u.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(u){if(u.indexOf("rgb(")===0){u=u.match(/rgb\(([^)]+)\)/)[1];const e=u.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(u){if(u.indexOf("rgba(")===0){u=u.match(/rgba\(([^)]+)\)/)[1];const e=u.split(/ *, */).map((n,l)=>n.slice(-1)==="%"?l===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(u){if(u[0]==="#"&&u.length===9)return{r:parseInt(u.slice(1,3),16),g:parseInt(u.slice(3,5),16),b:parseInt(u.slice(5,7),16),a:parseInt(u.slice(7,9),16)/255}},_hex6ColorToRGBA(u){if(u[0]==="#"&&u.length===7)return{r:parseInt(u.slice(1,3),16),g:parseInt(u.slice(3,5),16),b:parseInt(u.slice(5,7),16),a:1}},_hex4ColorToRGBA(u){if(u[0]==="#"&&u.length===5)return{r:parseInt(u[1]+u[1],16),g:parseInt(u[2]+u[2],16),b:parseInt(u[3]+u[3],16),a:parseInt(u[4]+u[4],16)/255}},_hex3ColorToRGBA(u){if(u[0]==="#"&&u.length===4)return{r:parseInt(u[1]+u[1],16),g:parseInt(u[2]+u[2],16),b:parseInt(u[3]+u[3],16),a:1}},_hslColorToRGBA(u){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(u)){const[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(u),l=Number(n[0])/360,r=Number(n[1])/100,o=Number(n[2])/100;let h,f,g;if(r===0)return g=o*255,{r:Math.round(g),g:Math.round(g),b:Math.round(g),a:1};o<.5?h=o*(1+r):h=o+r-o*r;const m=2*o-h,p=[0,0,0];for(let S=0;S<3;S++)f=l+1/3*-(S-1),f<0&&f++,f>1&&f--,6*f<1?g=m+(h-m)*6*f:2*f<1?g=h:3*f<2?g=m+(h-m)*(2/3-f)*6:g=m,p[S]=g*255;return{r:Math.round(p[0]),g:Math.round(p[1]),b:Math.round(p[2]),a:1}}},haveIntersection(u,e){return!(e.x>u.x+u.width||e.x+e.width<u.x||e.y>u.y+u.height||e.y+e.height<u.y)},cloneObject(u){const e={};for(const n in u)this._isPlainObject(u[n])?e[n]=this.cloneObject(u[n]):this._isArray(u[n])?e[n]=this.cloneArray(u[n]):e[n]=u[n];return e},cloneArray(u){return u.slice(0)},degToRad(u){return u*cd},radToDeg(u){return u*fd},_degToRad(u){return x.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),x.degToRad(u)},_radToDeg(u){return x.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),x.radToDeg(u)},_getRotation(u){return V.angleDeg?x.radToDeg(u):u},_capitalize(u){return u.charAt(0).toUpperCase()+u.slice(1)},throw(u){throw new Error(pc+u)},error(u){console.error(pc+u)},warn(u){V.showWarnings&&console.warn(md+u)},each(u,e){for(const n in u)e(n,u[n])},_inRange(u,e,n){return e<=u&&u<n},_getProjectionToSegment(u,e,n,l,r,o){let h,f,g;const m=(u-n)*(u-n)+(e-l)*(e-l);if(m==0)h=u,f=e,g=(r-n)*(r-n)+(o-l)*(o-l);else{const p=((r-u)*(n-u)+(o-e)*(l-e))/m;p<0?(h=u,f=e,g=(u-r)*(u-r)+(e-o)*(e-o)):p>1?(h=n,f=l,g=(n-r)*(n-r)+(l-o)*(l-o)):(h=u+p*(n-u),f=e+p*(l-e),g=(h-r)*(h-r)+(f-o)*(f-o))}return[h,f,g]},_getProjectionToLine(u,e,n){const l=x.cloneObject(u);let r=Number.MAX_VALUE;return e.forEach(function(o,h){if(!n&&h===e.length-1)return;const f=e[(h+1)%e.length],g=x._getProjectionToSegment(o.x,o.y,f.x,f.y,u.x,u.y),m=g[0],p=g[1],S=g[2];S<r&&(l.x=m,l.y=p,r=S)}),l},_prepareArrayForTween(u,e,n){const l=[],r=[];if(u.length>e.length){const h=e;e=u,u=h}for(let h=0;h<u.length;h+=2)l.push({x:u[h],y:u[h+1]});for(let h=0;h<e.length;h+=2)r.push({x:e[h],y:e[h+1]});const o=[];return r.forEach(function(h){const f=x._getProjectionToLine(h,l,n);o.push(f.x),o.push(f.y)}),o},_prepareToStringify(u){let e;u.visitedByCircularReferenceRemoval=!0;for(const n in u)if(u.hasOwnProperty(n)&&u[n]&&typeof u[n]=="object"){if(e=Object.getOwnPropertyDescriptor(u,n),u[n].visitedByCircularReferenceRemoval||x._isElement(u[n]))if(e.configurable)delete u[n];else return null;else if(x._prepareToStringify(u[n])===null)if(e.configurable)delete u[n];else return null}return delete u.visitedByCircularReferenceRemoval,u},_assign(u,e){for(const n in e)u[n]=e[n];return u},_getFirstPointerId(u){return u.touches?u.changedTouches[0].identifier:u.pointerId||999},releaseCanvas(...u){V.releaseCanvasOnDestroy&&u.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(u,e,n,l){let r=e<0?e:0,o=n<0?n:0;e=Math.abs(e),n=Math.abs(n);let h=0,f=0,g=0,m=0;typeof l=="number"?h=f=g=m=Math.min(l,e/2,n/2):(h=Math.min(l[0]||0,e/2,n/2),f=Math.min(l[1]||0,e/2,n/2),m=Math.min(l[2]||0,e/2,n/2),g=Math.min(l[3]||0,e/2,n/2)),u.moveTo(r+h,o),u.lineTo(r+e-f,o),u.arc(r+e-f,o+f,f,Math.PI*3/2,0,!1),u.lineTo(r+e,o+n-m),u.arc(r+e-m,o+n-m,m,0,Math.PI/2,!1),u.lineTo(r+g,o+n),u.arc(r+g,o+n-g,g,Math.PI/2,Math.PI,!1),u.lineTo(r,o+h),u.arc(r+h,o+h,h,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(u,e,n,l,r){l=Math.abs(l);for(let o=0;o<n;o++){const h=e[(o-1+n)%n],f=e[o],g=e[(o+1)%n],m={x:f.x-h.x,y:f.y-h.y},p={x:g.x-f.x,y:g.y-f.y},S=Math.hypot(m.x,m.y),y=Math.hypot(p.x,p.y);let E;typeof r=="number"?E=r:E=o<r.length?r[o]:0,E=l*Math.cos(Math.PI/n)*Math.min(1,E/l*2);const M={x:m.x/S,y:m.y/S},R={x:p.x/y,y:p.y/y},A={x:f.x-M.x*E,y:f.y-M.y*E},N={x:f.x+R.x*E,y:f.y+R.y*E};o===0?u.moveTo(A.x,A.y):u.lineTo(A.x,A.y),u.arcTo(f.x,f.y,N.x,N.y,E)}}};function Sd(u){const e=[],n=u.length,l=x;for(let r=0;r<n;r++){let o=u[r];l._isNumber(o)?o=Math.round(o*1e3)/1e3:l._isString(o)||(o=o+""),e.push(o)}return e}const vc=",",_d="(",Cd=")",Ed="([",bd="])",xd=";",Td="()",Ad="=",yc=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Md=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],Rd=100;let Ll=null;function Sc(){if(Ll!==null)return Ll;try{const e=x.createCanvasElement().getContext("2d");return e?!!e&&"filter"in e:(Ll=!1,!1)}catch{return Ll=!1,!1}}class Wl{constructor(e){this.canvas=e,V.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){let l=this.traceArr,r=l.length,o="",h,f,g,m;for(h=0;h<r;h++)f=l[h],g=f.method,g?(m=f.args,o+=g,e?o+=Td:x._isArray(m[0])?o+=Ed+m.join(vc)+bd:(n&&(m=m.map(p=>typeof p=="number"?Math.floor(p):p)),o+=_d+m.join(vc)+Cd)):(o+=f.property,e||(o+=Ad+f.val)),o+=xd;return o}clearTrace(){this.traceArr=[]}_trace(e){let n=this.traceArr,l;n.push(e),l=n.length,l>=Rd&&n.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){const n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}_applyMiterLimit(e){const n=e.attrs.miterLimit;n!=null&&this.setAttr("miterLimit",n)}setAttr(e,n){this._context[e]=n}arc(e,n,l,r,o,h){this._context.arc(e,n,l,r,o,h)}arcTo(e,n,l,r,o){this._context.arcTo(e,n,l,r,o)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,l,r,o,h){this._context.bezierCurveTo(e,n,l,r,o,h)}clearRect(e,n,l,r){this._context.clearRect(e,n,l,r)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){const l=arguments;if(l.length===2)return this._context.createImageData(e,n);if(l.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,l,r){return this._context.createLinearGradient(e,n,l,r)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,l,r,o,h){return this._context.createRadialGradient(e,n,l,r,o,h)}drawImage(e,n,l,r,o,h,f,g,m){const p=arguments,S=this._context;p.length===3?S.drawImage(e,n,l):p.length===5?S.drawImage(e,n,l,r,o):p.length===9&&S.drawImage(e,n,l,r,o,h,f,g,m)}ellipse(e,n,l,r,o,h,f,g){this._context.ellipse(e,n,l,r,o,h,f,g)}isPointInPath(e,n,l,r){return l?this._context.isPointInPath(l,e,n,r):this._context.isPointInPath(e,n,r)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,l,r){this._context.fillRect(e,n,l,r)}strokeRect(e,n,l,r){this._context.strokeRect(e,n,l,r)}fillText(e,n,l,r){r?this._context.fillText(e,n,l,r):this._context.fillText(e,n,l)}measureText(e){return this._context.measureText(e)}getImageData(e,n,l,r){return this._context.getImageData(e,n,l,r)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,l,r){this._context.rect(e,n,l,r)}roundRect(e,n,l,r,o){this._context.roundRect(e,n,l,r,o)}putImageData(e,n,l){this._context.putImageData(e,n,l)}quadraticCurveTo(e,n,l,r){this._context.quadraticCurveTo(e,n,l,r)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,l,r,o,h){this._context.setTransform(e,n,l,r,o,h)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,l,r){this._context.strokeText(e,n,l,r)}transform(e,n,l,r,o,h){this._context.transform(e,n,l,r,o,h)}translate(e,n){this._context.translate(e,n)}_enableTrace(){let e=this,n=yc.length,l=this.setAttr,r,o;const h=function(f){let g=e[f],m;e[f]=function(){return o=Sd(Array.prototype.slice.call(arguments,0)),m=g.apply(e,arguments),e._trace({method:f,args:o}),m}};for(r=0;r<n;r++)h(yc[r]);e.setAttr=function(){l.apply(e,arguments);const f=arguments[0];let g=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(g=g/this.canvas.getPixelRatio()),e._trace({property:f,val:g})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}Md.forEach(function(u){Object.defineProperty(Wl.prototype,u,{get(){return this._context[u]},set(e){this._context[u]=e}})});class Nd extends Wl{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){const n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),l=e.getFillPriority();if(n&&l==="color"){this._fillColor(e);return}const r=e.getFillPatternImage();if(r&&l==="pattern"){this._fillPattern(e);return}const o=e.getFillLinearGradientColorStops();if(o&&l==="linear-gradient"){this._fillLinearGradient(e);return}const h=e.getFillRadialGradientColorStops();if(h&&l==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):r?this._fillPattern(e):o?this._fillLinearGradient(e):h&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),l=e.getStrokeLinearGradientEndPoint(),r=e.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(n.x,n.y,l.x,l.y);if(r){for(let h=0;h<r.length;h+=2)o.addColorStop(r[h],r[h+1]);this.setAttr("strokeStyle",o)}}_stroke(e){const n=e.dash(),l=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!l){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),l||this.restore()}}_applyShadow(e){var n,l,r;const o=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",h=(l=e.getShadowBlur())!==null&&l!==void 0?l:5,f=(r=e.getShadowOffset())!==null&&r!==void 0?r:{x:0,y:0},g=e.getAbsoluteScale(),m=this.canvas.getPixelRatio(),p=g.x*m,S=g.y*m;this.setAttr("shadowColor",o),this.setAttr("shadowBlur",h*Math.min(Math.abs(p),Math.abs(S))),this.setAttr("shadowOffsetX",f.x*p),this.setAttr("shadowOffsetY",f.y*S)}}class zd extends Wl{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const n=e.getStrokeScaleEnabled();if(!n){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(e);const l=e.hitStrokeWidth(),r=l==="auto"?e.strokeWidth():l;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),n||this.restore()}}}let Yl;function Od(){if(Yl)return Yl;const u=x.createCanvasElement(),e=u.getContext("2d");return Yl=(function(){const n=V._global.devicePixelRatio||1,l=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/l})(),x.releaseCanvas(u),Yl}class ou{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const l=(e||{}).pixelRatio||V.pixelRatio||Od();this.pixelRatio=l,this._canvas=x.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(r){return x.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Ra extends ou{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new Nd(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}class hu extends ou{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new zd(this),this.setSize(e.width,e.height)}}const _t={get isDragging(){let u=!1;return _t._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(u=!0)}),u},justDragged:!1,get node(){let u;return _t._dragElements.forEach(e=>{u=e.node}),u},_dragElements:new Map,_drag(u){const e=[];_t._dragElements.forEach((n,l)=>{const{node:r}=n,o=r.getStage();o.setPointersPositions(u),n.pointerId===void 0&&(n.pointerId=x._getFirstPointerId(u));const h=o._changedPointerPositions.find(f=>f.id===n.pointerId);if(h){if(n.dragStatus!=="dragging"){const f=r.dragDistance();if(Math.max(Math.abs(h.x-n.startPointerPos.x),Math.abs(h.y-n.startPointerPos.y))<f||(r.startDrag({evt:u}),!r.isDragging()))return}r._setDragPosition(u,n),e.push(r)}}),e.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:u},!0)})},_endDragBefore(u){const e=[];_t._dragElements.forEach(n=>{const{node:l}=n,r=l.getStage();if(u&&r.setPointersPositions(u),!r._changedPointerPositions.find(f=>f.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(_t.justDragged=!0,V._mouseListenClick=!1,V._touchListenClick=!1,V._pointerListenClick=!1,n.dragStatus="stopped");const h=n.node.getLayer()||n.node instanceof V.Stage&&n.node;h&&e.indexOf(h)===-1&&e.push(h)}),e.forEach(n=>{n.draw()})},_endDragAfter(u){_t._dragElements.forEach((e,n)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:u},!0),e.dragStatus!=="dragging"&&_t._dragElements.delete(n)})}};V.isBrowser&&(window.addEventListener("mouseup",_t._endDragBefore,!0),window.addEventListener("touchend",_t._endDragBefore,!0),window.addEventListener("touchcancel",_t._endDragBefore,!0),window.addEventListener("mousemove",_t._drag),window.addEventListener("touchmove",_t._drag),window.addEventListener("mouseup",_t._endDragAfter,!1),window.addEventListener("touchend",_t._endDragAfter,!1),window.addEventListener("touchcancel",_t._endDragAfter,!1));function Na(u){return x._isString(u)?'"'+u+'"':Object.prototype.toString.call(u)==="[object Number]"||x._isBoolean(u)?u:Object.prototype.toString.call(u)}function Fc(u){return u>255?255:u<0?0:Math.round(u)}function j(){if(V.isUnminified)return function(u,e){return x._isNumber(u)||x.warn(Na(u)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),u}}function kl(u){if(V.isUnminified)return function(e,n){let l=x._isNumber(e),r=x._isArray(e)&&e.length==u;return!l&&!r&&x.warn(Na(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+u+")"),e}}function cu(){if(V.isUnminified)return function(u,e){return x._isNumber(u)||u==="auto"||x.warn(Na(u)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),u}}function tn(){if(V.isUnminified)return function(u,e){return x._isString(u)||x.warn(Na(u)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),u}}function Wc(){if(V.isUnminified)return function(u,e){const n=x._isString(u),l=Object.prototype.toString.call(u)==="[object CanvasGradient]"||u&&u.addColorStop;return n||l||x.warn(Na(u)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),u}}function Dd(){if(V.isUnminified)return function(u,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&u instanceof n||(x._isArray(u)?u.forEach(function(l){x._isNumber(l)||x.warn('"'+e+'" attribute has non numeric element '+l+". Make sure that all elements are numbers.")}):x.warn(Na(u)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),u}}function Ue(){if(V.isUnminified)return function(u,e){return u===!0||u===!1||x.warn(Na(u)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),u}}function Gd(u){if(V.isUnminified)return function(e,n){return e==null||x.isObject(e)||x.warn(Na(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+u),e}}const Si="get",_i="set",C={addGetterSetter(u,e,n,l,r){C.addGetter(u,e,n),C.addSetter(u,e,l,r),C.addOverloadedGetterSetter(u,e)},addGetter(u,e,n){const l=Si+x._capitalize(e);u.prototype[l]=u.prototype[l]||function(){const r=this.attrs[e];return r===void 0?n:r}},addSetter(u,e,n,l){const r=_i+x._capitalize(e);u.prototype[r]||C.overWriteSetter(u,e,n,l)},overWriteSetter(u,e,n,l){const r=_i+x._capitalize(e);u.prototype[r]=function(o){return n&&o!==void 0&&o!==null&&(o=n.call(this,o,e)),this._setAttr(e,o),l&&l.call(this),this}},addComponentsGetterSetter(u,e,n,l,r){const o=n.length,h=x._capitalize,f=Si+h(e),g=_i+h(e);u.prototype[f]=function(){const p={};for(let S=0;S<o;S++){const y=n[S];p[y]=this.getAttr(e+h(y))}return p};const m=Gd(n);u.prototype[g]=function(p){const S=this.attrs[e];l&&(p=l.call(this,p,e)),m&&m.call(this,p,e);for(const y in p)p.hasOwnProperty(y)&&this._setAttr(e+h(y),p[y]);return p||n.forEach(y=>{this._setAttr(e+h(y),void 0)}),this._fireChangeEvent(e,S,p),r&&r.call(this),this},C.addOverloadedGetterSetter(u,e)},addOverloadedGetterSetter(u,e){const n=x._capitalize(e),l=_i+n,r=Si+n;u.prototype[e]=function(){return arguments.length?(this[l](arguments[0]),this):this[r]()}},addDeprecatedGetterSetter(u,e,n,l){x.error("Adding deprecated "+e);const r=Si+x._capitalize(e),o=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";u.prototype[r]=function(){x.error(o);const h=this.attrs[e];return h===void 0?n:h},C.addSetter(u,e,l,function(){x.error(o)}),C.addOverloadedGetterSetter(u,e)},backCompat(u,e){x.each(e,function(n,l){const r=u.prototype[l],o=Si+x._capitalize(n),h=_i+x._capitalize(n);function f(){r.apply(this,arguments),x.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}u.prototype[n]=f,u.prototype[o]=f,u.prototype[h]=f})},afterSetFilter(){this._filterUpToDate=!1}};function Hd(u){const e=/(\w+)\(([^)]+)\)/g;let n;for(;(n=e.exec(u))!==null;){const[,l,r]=n;switch(l){case"blur":{const o=parseFloat(r.replace("px",""));return function(h){this.blurRadius(o*.5);const f=V.Filters;f&&f.Blur&&f.Blur.call(this,h)}}case"brightness":{const o=r.includes("%")?parseFloat(r)/100:parseFloat(r);return function(h){this.brightness(o);const f=V.Filters;f&&f.Brightness&&f.Brightness.call(this,h)}}case"contrast":{const o=parseFloat(r);return function(h){const f=100*(Math.sqrt(o)-1);this.contrast(f);const g=V.Filters;g&&g.Contrast&&g.Contrast.call(this,h)}}case"grayscale":return function(o){const h=V.Filters;h&&h.Grayscale&&h.Grayscale.call(this,o)};case"sepia":return function(o){const h=V.Filters;h&&h.Sepia&&h.Sepia.call(this,o)};case"invert":return function(o){const h=V.Filters;h&&h.Invert&&h.Invert.call(this,o)};default:x.warn(`CSS filter "${l}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const Zl="absoluteOpacity",_c="allEventListeners",ia="absoluteTransform",Cc="absoluteScale",Ia="canvas",Bd="Change",Ud="children",Ld="konva",Ir="listening",Yd="mouseenter",Xd="mouseleave",qd="pointerenter",jd="pointerleave",Vd="touchenter",Kd="touchleave",Ec="set",bc="Shape",Jl=" ",xc="stage",Aa="transform",Qd="Stage",$r="visible",wd=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Jl);let Zd=1;class Y{constructor(e){this._id=Zd++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Aa||e===ia)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){let l=this._cache.get(e);return(l===void 0||(e===Aa||e===ia)&&l.dirty===!0)&&(l=n.call(this),this._cache.set(e,l)),l}_calculate(e,n,l){if(!this._attachedDepsListeners.get(e)){const r=n.map(o=>o+"Change.konva").join(Jl);this.on(r,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,l)}_getCanvasCache(){return this._cache.get(Ia)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===ia&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Ia)){const{scene:e,filter:n,hit:l}=this._cache.get(Ia);x.releaseCanvas(e._canvas,n._canvas,l._canvas),this._cache.delete(Ia)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const n=e||{};let l={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(l=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let r=Math.ceil(n.width||l.width),o=Math.ceil(n.height||l.height),h=n.pixelRatio,f=n.x===void 0?Math.floor(l.x):n.x,g=n.y===void 0?Math.floor(l.y):n.y,m=n.offset||0,p=n.drawBorder||!1,S=n.hitCanvasPixelRatio||1;if(!r||!o){x.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const y=Math.abs(Math.round(l.x)-f)>.5?1:0,E=Math.abs(Math.round(l.y)-g)>.5?1:0;r+=m*2+y,o+=m*2+E,f-=m,g-=m;const _=new Ra({pixelRatio:h,width:r,height:o}),M=new Ra({pixelRatio:h,width:0,height:0,willReadFrequently:!0}),R=new hu({pixelRatio:S,width:r,height:o}),A=_.getContext(),N=R.getContext(),H=new Ra({width:_.width/_.pixelRatio+Math.abs(f),height:_.height/_.pixelRatio+Math.abs(g),pixelRatio:_.pixelRatio}),O=H.getContext();return R.isCache=!0,_.isCache=!0,this._cache.delete(Ia),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(_.getContext()._context.imageSmoothingEnabled=!1,M.getContext()._context.imageSmoothingEnabled=!1),A.save(),N.save(),O.save(),A.translate(-f,-g),N.translate(-f,-g),O.translate(-f,-g),H.x=f,H.y=g,this._isUnderCache=!0,this._clearSelfAndDescendantCache(Zl),this._clearSelfAndDescendantCache(Cc),this.drawScene(_,this,H),this.drawHit(R,this),this._isUnderCache=!1,A.restore(),N.restore(),p&&(A.save(),A.beginPath(),A.rect(0,0,r,o),A.closePath(),A.setAttr("strokeStyle","red"),A.setAttr("lineWidth",5),A.stroke(),A.restore()),x.releaseCanvas(H._canvas),this._cache.set(Ia,{scene:_,filter:M,hit:R,x:f,y:g}),this._requestDraw(),this}isCached(){return this._cache.has(Ia)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){const l=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let r=1/0,o=1/0,h=-1/0,f=-1/0;const g=this.getAbsoluteTransform(n);return l.forEach(function(m){const p=g.point(m);r===void 0&&(r=h=p.x,o=f=p.y),r=Math.min(r,p.x),o=Math.min(o,p.y),h=Math.max(h,p.x),f=Math.max(f,p.y)}),{x:r,y:o,width:h-r,height:f-o}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);const l=this._getCachedSceneCanvas(),r=l.pixelRatio;e.drawImage(l._canvas,0,0,l.width/r,l.height/r),e.restore()}_drawCachedHitCanvas(e){const n=this._getCanvasCache(),l=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(l._canvas,0,0,l.width/l.pixelRatio,l.height/l.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),n=this._getCanvasCache(),l=n.scene,r=n.filter,o=r.getContext(),h,f,g,m;if(!e||e.length===0)return l;if(this._filterUpToDate)return r;let p=!0;for(let y=0;y<e.length;y++)if(typeof e[y]=="string"&&Sc(),typeof e[y]!="string"||!Sc()){p=!1;break}const S=l.pixelRatio;if(r.setSize(l.width/l.pixelRatio,l.height/l.pixelRatio),p){const y=e.join(" ");return o.save(),o.setAttr("filter",y),o.drawImage(l._canvas,0,0,l.getWidth()/S,l.getHeight()/S),o.restore(),this._filterUpToDate=!0,r}try{for(h=e.length,o.clear(),o.drawImage(l._canvas,0,0,l.getWidth()/S,l.getHeight()/S),f=o.getImageData(0,0,r.getWidth(),r.getHeight()),g=0;g<h;g++)m=e[g],typeof m=="string"&&(m=Hd(m)),m.call(this,f),o.putImageData(f,0,0)}catch(y){x.error("Unable to apply filter. "+y.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,r}on(e,n){if(this._cache&&this._cache.delete(_c),arguments.length===3)return this._delegate.apply(this,arguments);const l=e.split(Jl);for(let r=0;r<l.length;r++){const h=l[r].split("."),f=h[0],g=h[1]||"";this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:g,handler:n})}return this}off(e,n){let l=(e||"").split(Jl),r=l.length,o,h,f,g,m,p;if(this._cache&&this._cache.delete(_c),!e)for(h in this.eventListeners)this._off(h);for(o=0;o<r;o++)if(f=l[o],g=f.split("."),m=g[0],p=g[1],m)this.eventListeners[m]&&this._off(m,p,n);else for(h in this.eventListeners)this._off(h,p,n);return this}dispatchEvent(e){const n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(l){n.call(this,l.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,l){const r=this;this.on(e,function(o){const h=o.target.findAncestors(n,!0,r);for(let f=0;f<h.length;f++)o=x.cloneObject(o),o.currentTarget=h[f],l.call(h[f],o)})}remove(){return this.isDragging()&&this.stopDrag(),_t._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ia),this._clearSelfAndDescendantCache(Zl),this._clearSelfAndDescendantCache(Cc),this._clearSelfAndDescendantCache(xc),this._clearSelfAndDescendantCache($r),this._clearSelfAndDescendantCache(Ir)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const n="get"+x._capitalize(e);return x._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){let e=this.getParent(),n=[];for(;e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let n,l;if(!e)return this;for(n in e)n!==Ud&&(l=Ec+x._capitalize(n),x._isFunction(this[l])?this[l](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(Ir,this._isListening)}_isListening(e){if(!this.listening())return!1;const l=this.getParent();return l&&l!==e&&this!==e?l._isListening(e):!0}isVisible(){return this._getCache($r,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const l=this.getParent();return l&&l!==e&&this!==e?l._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);const l=this.getLayer();let r=!1;_t._dragElements.forEach(h=>{h.dragStatus==="dragging"&&(h.node.nodeType==="Stage"||h.node.getLayer()===l)&&(r=!0)});const o=!n&&!V.hitOnDragEnabled&&(r||V.isTransforming());return this.isListening()&&this.isVisible()&&!o}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),n=this,l=0,r,o,h,f;function g(p){for(r=[],o=p.length,h=0;h<o;h++)f=p[h],l++,f.nodeType!==bc&&(r=r.concat(f.getChildren().slice())),f._id===n._id&&(h=o);r.length>0&&r[0].getDepth()<=e&&g(r)}const m=this.getStage();return n.nodeType!==Qd&&m&&g(m.getChildren()),l}getDepth(){let e=0,n=this.parent;for(;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Aa),this._clearSelfAndDescendantCache(ia)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const n=e.getPointerPosition();if(!n)return null;const l=this.getAbsoluteTransform().copy();return l.invert(),l.point(n)}getAbsolutePosition(e){let n=!1,l=this.parent;for(;l;){if(l.isCached()){n=!0;break}l=l.parent}n&&!e&&(e=!0);const r=this.getAbsoluteTransform(e).getMatrix(),o=new Ee,h=this.offset();return o.m=r.slice(),o.translate(h.x,h.y),o.getTranslation()}setAbsolutePosition(e){const{x:n,y:l,...r}=this._clearTransform();this.attrs.x=n,this.attrs.y=l,this._clearCache(Aa);const o=this._getAbsoluteTransform().copy();return o.invert(),o.translate(e.x,e.y),e={x:this.attrs.x+o.getTranslation().x,y:this.attrs.y+o.getTranslation().y},this._setTransform(r),this.setPosition({x:e.x,y:e.y}),this._clearCache(Aa),this._clearSelfAndDescendantCache(ia),this}_setTransform(e){let n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let n=e.x,l=e.y,r=this.x(),o=this.y();return n!==void 0&&(r+=n),l!==void 0&&(o+=l),this.setPosition({x:r,y:o}),this}_eachAncestorReverse(e,n){let l=[],r=this.getParent(),o,h;if(!(n&&n._id===this._id)){for(l.unshift(this);r&&(!n||r._id!==n._id);)l.unshift(r),r=r.parent;for(o=l.length,h=0;h<o;h++)e(l[h])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return x.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return x.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return x.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return x.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return x.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&x.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Zl,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),n,l,r,o,h;const f={attrs:{},className:this.getClassName()};for(n in e)l=e[n],h=x.isObject(l)&&!x._isPlainObject(l)&&!x._isArray(l),!h&&(r=typeof this[n]=="function"&&this[n],delete e[n],o=r?r.call(this):null,e[n]=l,o!==l&&(f.attrs[n]=l));return x._prepareToStringify(f)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,l){const r=[];n&&this._isMatch(e)&&r.push(this);let o=this.parent;for(;o;){if(o===l)return r;o._isMatch(e)&&r.push(o),o=o.parent}return r}isAncestorOf(e){return!1}findAncestor(e,n,l){return this.findAncestors(e,n,l)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let n=e.replace(/ /g,"").split(","),l=n.length,r,o;for(r=0;r<l;r++)if(o=n[r],x.isValidSelector(o)||(x.warn('Selector "'+o+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),x.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),x.warn("Konva is awesome, right?")),o.charAt(0)==="#"){if(this.id()===o.slice(1))return!0}else if(o.charAt(0)==="."){if(this.hasName(o.slice(1)))return!0}else if(this.className===o||this.nodeType===o)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(xc,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,n={},l){return n.target=n.target||this,l?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(ia,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let n;if(e)return n=new Ee,this._eachAncestorReverse(function(l){const r=l.transformsEnabled();r==="all"?n.multiply(l.getTransform()):r==="position"&&n.translate(l.x()-l.offsetX(),l.y()-l.offsetY())},e),n;{n=this._cache.get(ia)||new Ee,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const l=this.transformsEnabled();if(l==="all")n.multiply(this.getTransform());else if(l==="position"){const r=this.attrs.x||0,o=this.attrs.y||0,h=this.attrs.offsetX||0,f=this.attrs.offsetY||0;n.translate(r-h,o-f)}return n.dirty=!1,n}}getAbsoluteScale(e){let n=this;for(;n;)n._isUnderCache&&(e=n),n=n.getParent();const r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Aa,this._getTransform)}_getTransform(){var e,n;const l=this._cache.get(Aa)||new Ee;l.reset();const r=this.x(),o=this.y(),h=V.getAngle(this.rotation()),f=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,g=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,m=this.attrs.skewX||0,p=this.attrs.skewY||0,S=this.attrs.offsetX||0,y=this.attrs.offsetY||0;return(r!==0||o!==0)&&l.translate(r,o),h!==0&&l.rotate(h),(m!==0||p!==0)&&l.skew(m,p),(f!==1||g!==1)&&l.scale(f,g),(S!==0||y!==0)&&l.translate(-1*S,-1*y),l.dirty=!1,l}clone(e){let n=x.cloneObject(this.attrs),l,r,o,h,f;for(l in e)n[l]=e[l];const g=new this.constructor(n);for(l in this.eventListeners)for(r=this.eventListeners[l],o=r.length,h=0;h<o;h++)f=r[h],f.name.indexOf(Ld)<0&&(g.eventListeners[l]||(g.eventListeners[l]=[]),g.eventListeners[l].push(f));return g}_toKonvaCanvas(e){e=e||{};const n=this.getClientRect(),l=this.getStage(),r=e.x!==void 0?e.x:Math.floor(n.x),o=e.y!==void 0?e.y:Math.floor(n.y),h=e.pixelRatio||1,f=new Ra({width:e.width||Math.ceil(n.width)||(l?l.width():0),height:e.height||Math.ceil(n.height)||(l?l.height():0),pixelRatio:h}),g=f.getContext(),m=new Ra({width:f.width/f.pixelRatio+Math.abs(r),height:f.height/f.pixelRatio+Math.abs(o),pixelRatio:f.pixelRatio});return e.imageSmoothingEnabled===!1&&(g._context.imageSmoothingEnabled=!1),g.save(),(r||o)&&g.translate(-1*r,-1*o),this.drawScene(f,void 0,m),g.restore(),f}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const n=e.mimeType||null,l=e.quality||null,r=this._toKonvaCanvas(e).toDataURL(n,l);return e.callback&&e.callback(r),r}toImage(e){return new Promise((n,l)=>{try{const r=e?.callback;r&&delete e.callback,x._urlToImage(this.toDataURL(e),function(o){n(o),r?.(o)})}catch(r){l(r)}})}toBlob(e){return new Promise((n,l)=>{try{const r=e?.callback;r&&delete e.callback,this.toCanvas(e).toBlob(o=>{n(o),r?.(o)},e?.mimeType,e?.quality)}catch(r){l(r)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():V.dragDistance}_off(e,n,l){let r=this.eventListeners[e],o,h,f;for(o=0;o<r.length;o++)if(h=r[o].name,f=r[o].handler,(h!=="konva"||n==="konva")&&(!n||h===n)&&(!l||l===f)){if(r.splice(o,1),r.length===0){delete this.eventListeners[e];break}o--}}_fireChangeEvent(e,n,l){this._fire(e+Bd,{oldVal:n,newVal:l})}addName(e){if(!this.hasName(e)){const n=this.name(),l=n?n+" "+e:e;this.name(l)}return this}hasName(e){if(!e)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const n=(this.name()||"").split(/\s/g),l=n.indexOf(e);return l!==-1&&(n.splice(l,1),this.name(n.join(" "))),this}setAttr(e,n){const l=this[Ec+x._capitalize(e)];return x._isFunction(l)?l.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(V.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){const l=this.attrs[e];l===n&&!x.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,l,n),this._requestDraw())}_setComponentAttr(e,n,l){let r;l!==void 0&&(r=this.attrs[e],r||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=l,this._fireChangeEvent(e,r,l))}_fireAndBubble(e,n,l){n&&this.nodeType===bc&&(n.target=this);const r=[Yd,Xd,qd,jd,Vd,Kd];if(!(r.indexOf(e)!==-1&&(l&&(this===l||this.isAncestorOf&&this.isAncestorOf(l))||this.nodeType==="Stage"&&!l))){this._fire(e,n);const h=r.indexOf(e)!==-1&&l&&l.isAncestorOf&&l.isAncestorOf(this)&&!l.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!h&&(l&&l.parent?this._fireAndBubble.call(this.parent,e,n,l):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,l;const{nodeType:r}=this,o=Y.protoListenerMap.get(r)||{};let h=o?.[e];if(h===void 0){h=[];let f=Object.getPrototypeOf(this);for(;f;){const g=(l=(n=f.eventListeners)===null||n===void 0?void 0:n[e])!==null&&l!==void 0?l:[];h.push(...g),f=Object.getPrototypeOf(f)}o[e]=h,Y.protoListenerMap.set(r,o)}return h}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const l=this._getProtoListeners(e);if(l)for(let o=0;o<l.length;o++)l[o].handler.call(this,n);const r=this.eventListeners[e];if(r)for(let o=0;o<r.length;o++)r[o].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const n=e?e.pointerId:void 0,l=this.getStage(),r=this.getAbsolutePosition();if(!l)return;const o=l._getPointerById(n)||l._changedPointerPositions[0]||r;_t._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-r.x,y:o.y-r.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){_t._dragElements.has(this._id)||this._createDragElement(e);const l=_t._dragElements.get(this._id);l.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const l=this.getStage()._getPointerById(n.pointerId);if(!l)return;let r={x:l.x-n.offset.x,y:l.y-n.offset.y};const o=this.dragBoundFunc();if(o!==void 0){const h=o.call(this,r,e);h?r=h:x.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==r.x||this._lastPos.y!==r.y)&&(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}stopDrag(e){const n=_t._dragElements.get(this._id);n&&(n.dragStatus="stopped"),_t._endDragBefore(e),_t._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=_t._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||V.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let r=!1;_t._dragElements.forEach(o=>{this.isAncestorOf(o.node)&&(r=!0)}),r||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=_t._dragElements.get(this._id),l=n&&n.dragStatus==="dragging",r=n&&n.dragStatus==="ready";l?this.stopDrag():r&&_t._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const l={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return x.haveIntersection(l,this.getClientRect())}static create(e,n){return x._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){let l=Y.prototype.getClassName.call(e),r=e.children,o,h,f;n&&(e.attrs.container=n),V[l]||(x.warn('Can not find a node with class name "'+l+'". Fallback to "Shape".'),l="Shape");const g=V[l];if(o=new g(e.attrs),r)for(h=r.length,f=0;f<h;f++)o.add(Y._createNode(r[f]));return o}}Y.protoListenerMap=new Map;Y.prototype.nodeType="Node";Y.prototype._attrsAffectingSize=[];Y.prototype.eventListeners={};Y.prototype.on.call(Y.prototype,wd,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Aa),this._clearSelfAndDescendantCache(ia)});Y.prototype.on.call(Y.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache($r)});Y.prototype.on.call(Y.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Ir)});Y.prototype.on.call(Y.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Zl)});const At=C.addGetterSetter;At(Y,"zIndex");At(Y,"absolutePosition");At(Y,"position");At(Y,"x",0,j());At(Y,"y",0,j());At(Y,"globalCompositeOperation","source-over",tn());At(Y,"opacity",1,j());At(Y,"name","",tn());At(Y,"id","",tn());At(Y,"rotation",0,j());C.addComponentsGetterSetter(Y,"scale",["x","y"]);At(Y,"scaleX",1,j());At(Y,"scaleY",1,j());C.addComponentsGetterSetter(Y,"skew",["x","y"]);At(Y,"skewX",0,j());At(Y,"skewY",0,j());C.addComponentsGetterSetter(Y,"offset",["x","y"]);At(Y,"offsetX",0,j());At(Y,"offsetY",0,j());At(Y,"dragDistance",void 0,j());At(Y,"width",0,j());At(Y,"height",0,j());At(Y,"listening",!0,Ue());At(Y,"preventDefault",!0,Ue());At(Y,"filters",void 0,function(u){return this._filterUpToDate=!1,u});At(Y,"visible",!0,Ue());At(Y,"transformsEnabled","all",tn());At(Y,"size");At(Y,"dragBoundFunc");At(Y,"draggable",!1,Ue());C.backCompat(Y,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class be extends Y{constructor(){super(...arguments),this.children=[]}getChildren(e){const n=this.children||[];return e?n.filter(e):n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let l=0;l<e.length;l++)this.add(e[l]);return this}const n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){const l=[];return this._descendants(r=>{const o=r._isMatch(e);return o&&l.push(r),!!(o&&n)}),l}_descendants(e){let n=!1;const l=this.getChildren();for(const r of l){if(n=e(r),n)return!0;if(r.hasChildren()&&(n=r._descendants(e),n))return!0}return!1}toObject(){const e=Y.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){let n=e.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){const n=Y.prototype.clone.call(this,e);return this.getChildren().forEach(function(l){n.add(l.clone())}),n}getAllIntersections(e){const n=[];return this.find("Shape").forEach(l=>{l.isVisible()&&l.intersects(e)&&n.push(l)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(l){l._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,l){n.index=l}),this._requestDraw()}drawScene(e,n,l){const r=this.getLayer(),o=e||r&&r.getCanvas(),h=o&&o.getContext(),f=this._getCanvasCache(),g=f&&f.scene,m=o&&o.isCache;if(!this.isVisible()&&!m)return this;if(g){h.save();const p=this.getAbsoluteTransform(n).getMatrix();h.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(h),h.restore()}else this._drawChildren("drawScene",o,n,l);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;const l=this.getLayer(),r=e||l&&l.hitCanvas,o=r&&r.getContext(),h=this._getCanvasCache();if(h&&h.hit){o.save();const g=this.getAbsoluteTransform(n).getMatrix();o.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",r,n);return this}_drawChildren(e,n,l,r){var o;const h=n&&n.getContext(),f=this.clipWidth(),g=this.clipHeight(),m=this.clipFunc(),p=typeof f=="number"&&typeof g=="number"||m,S=l===this;if(p){h.save();const E=this.getAbsoluteTransform(l);let _=E.getMatrix();h.transform(_[0],_[1],_[2],_[3],_[4],_[5]),h.beginPath();let M;if(m)M=m.call(this,h,this);else{const R=this.clipX(),A=this.clipY();h.rect(R||0,A||0,f,g)}h.clip.apply(h,M),_=E.copy().invert().getMatrix(),h.transform(_[0],_[1],_[2],_[3],_[4],_[5])}const y=!S&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";y&&(h.save(),h._applyGlobalCompositeOperation(this)),(o=this.children)===null||o===void 0||o.forEach(function(E){E[e](n,l,r)}),y&&h.restore(),p&&h.restore()}getClientRect(e={}){var n;const l=e.skipTransform,r=e.relativeTo;let o,h,f,g,m={x:1/0,y:1/0,width:0,height:0};const p=this;(n=this.children)===null||n===void 0||n.forEach(function(E){if(!E.visible())return;const _=E.getClientRect({relativeTo:p,skipShadow:e.skipShadow,skipStroke:e.skipStroke});_.width===0&&_.height===0||(o===void 0?(o=_.x,h=_.y,f=_.x+_.width,g=_.y+_.height):(o=Math.min(o,_.x),h=Math.min(h,_.y),f=Math.max(f,_.x+_.width),g=Math.max(g,_.y+_.height)))});const S=this.find("Shape");let y=!1;for(let E=0;E<S.length;E++)if(S[E]._isVisible(this)){y=!0;break}return y&&o!==void 0?m={x:o,y:h,width:f-o,height:g-h}:m={x:0,y:0,width:0,height:0},l?m:this._transformedRect(m,r)}}C.addComponentsGetterSetter(be,"clip",["x","y","width","height"]);C.addGetterSetter(be,"clipX",void 0,j());C.addGetterSetter(be,"clipY",void 0,j());C.addGetterSetter(be,"clipWidth",void 0,j());C.addGetterSetter(be,"clipHeight",void 0,j());C.addGetterSetter(be,"clipFunc");const Gi=new Map,kc=V._global.PointerEvent!==void 0;function jr(u){return Gi.get(u)}function fu(u){return{evt:u,pointerId:u.pointerId}}function Ic(u,e){return Gi.get(u)===e}function $c(u,e){Ni(u),e.getStage()&&(Gi.set(u,e),kc&&e._fire("gotpointercapture",fu(new PointerEvent("gotpointercapture"))))}function Ni(u,e){const n=Gi.get(u);if(!n)return;const l=n.getStage();l&&l.content,Gi.delete(u),kc&&n._fire("lostpointercapture",fu(new PointerEvent("lostpointercapture")))}const Jd="Stage",Pd="string",Tc="px",Fd="mouseout",t0="mouseleave",e0="mouseover",a0="mouseenter",n0="mousemove",i0="mousedown",l0="mouseup",xi="pointermove",Ti="pointerdown",Ln="pointerup",Ai="pointercancel",Wd="lostpointercapture",Xl="pointerout",Mi="pointerleave",ql="pointerover",jl="pointerenter",tu="contextmenu",s0="touchstart",r0="touchend",u0="touchmove",o0="touchcancel",eu="wheel",kd=5,Id=[[a0,"_pointerenter"],[i0,"_pointerdown"],[n0,"_pointermove"],[l0,"_pointerup"],[t0,"_pointerleave"],[s0,"_pointerdown"],[u0,"_pointermove"],[r0,"_pointerup"],[o0,"_pointercancel"],[e0,"_pointerover"],[eu,"_wheel"],[tu,"_contextmenu"],[Ti,"_pointerdown"],[xi,"_pointermove"],[Ln,"_pointerup"],[Ai,"_pointercancel"],[Mi,"_pointerleave"],[Wd,"_lostpointercapture"]],Vr={mouse:{[Xl]:Fd,[Mi]:t0,[ql]:e0,[jl]:a0,[xi]:n0,[Ti]:i0,[Ln]:l0,[Ai]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Xl]:"touchout",[Mi]:"touchleave",[ql]:"touchover",[jl]:"touchenter",[xi]:u0,[Ti]:s0,[Ln]:r0,[Ai]:o0,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Xl]:Xl,[Mi]:Mi,[ql]:ql,[jl]:jl,[xi]:xi,[Ti]:Ti,[Ln]:Ln,[Ai]:Ai,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Ri=u=>u.indexOf("pointer")>=0?"pointer":u.indexOf("touch")>=0?"touch":"mouse",Bn=u=>{const e=Ri(u);if(e==="pointer")return V.pointerEventsEnabled&&Vr.pointer;if(e==="touch")return Vr.touch;if(e==="mouse")return Vr.mouse};function Ac(u={}){return(u.clipFunc||u.clipWidth||u.clipHeight)&&x.warn("Stage does not support clipping. Please use clip for Layers or Groups."),u}const $d="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",zi=[];let Il=class extends be{constructor(e){super(Ac(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),zi.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Ac(this.attrs)}),this._checkVisibility()}_validateAdd(e){const n=e.getType()==="Layer",l=e.getType()==="FastLayer";n||l||x.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===Pd){let n;if(e.charAt(0)==="."){const l=e.slice(1);e=document.getElementsByClassName(l)[0]}else e.charAt(0)!=="#"?n=e:n=e.slice(1),e=document.getElementById(n);if(!e)throw"Can not find container in document with id "+n}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const e=this.children,n=e.length;for(let l=0;l<n;l++)e[l].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),be.prototype.clone.call(this,e)}destroy(){super.destroy();const e=this.content;e&&x._isInDocument(e)&&this.container().removeChild(e);const n=zi.indexOf(this);return n>-1&&zi.splice(n,1),x.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(x.warn($d),null)}_getPointerById(e){return this._pointerPositions.find(n=>n.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e={...e},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();const n=new Ra({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),l=n.getContext()._context,r=this.children;return(e.x||e.y)&&l.translate(-1*e.x,-1*e.y),r.forEach(function(o){if(!o.isVisible())return;const h=o._toKonvaCanvas(e);l.drawImage(h._canvas,e.x,e.y,h.getWidth()/h.getPixelRatio(),h.getHeight()/h.getPixelRatio())}),n}getIntersection(e){if(!e)return null;const n=this.children,l=n.length,r=l-1;for(let o=r;o>=0;o--){const h=n[o].getIntersection(e);if(h)return h}return null}_resizeDOM(){const e=this.width(),n=this.height();this.content&&(this.content.style.width=e+Tc,this.content.style.height=n+Tc),this.bufferCanvas.setSize(e,n),this.bufferHitCanvas.setSize(e,n),this.children.forEach(l=>{l.setSize({width:e,height:n}),l.draw()})}add(e,...n){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(e);const l=this.children.length;return l>kd&&x.warn("The stage has "+l+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),V.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return Ic(e,this)}setPointerCapture(e){$c(e,this)}releaseCapture(e){Ni(e)}getLayers(){return this.children}_bindContentEvents(){V.isBrowser&&Id.forEach(([e,n])=>{this.content.addEventListener(e,l=>{this[n](l)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const n=Bn(e.type);n&&this._fire(n.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const n=Bn(e.type);n&&this._fire(n.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let n=this[e+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(e){const n=Bn(e.type),l=Ri(e.type);if(!n)return;this.setPointersPositions(e);const r=this._getTargetShape(l),o=!(V.isDragging()||V.isTransforming())||V.hitOnDragEnabled;r&&o?(r._fireAndBubble(n.pointerout,{evt:e}),r._fireAndBubble(n.pointerleave,{evt:e}),this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this[l+"targetShape"]=null):o&&(this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){const n=Bn(e.type),l=Ri(e.type);if(!n)return;this.setPointersPositions(e);let r=!1;this._changedPointerPositions.forEach(o=>{const h=this.getIntersection(o);if(_t.justDragged=!1,V["_"+l+"ListenClick"]=!0,!h||!h.isListening()){this[l+"ClickStartShape"]=void 0;return}V.capturePointerEventsEnabled&&h.setPointerCapture(o.id),this[l+"ClickStartShape"]=h,h._fireAndBubble(n.pointerdown,{evt:e,pointerId:o.id}),r=!0;const f=e.type.indexOf("touch")>=0;h.preventDefault()&&e.cancelable&&f&&e.preventDefault()}),r||this._fire(n.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){const n=Bn(e.type),l=Ri(e.type);if(!n)return;const r=e.type.indexOf("touch")>=0||e.pointerType==="touch";if(V.isDragging()&&_t.node.preventDefault()&&e.cancelable&&r&&e.preventDefault(),this.setPointersPositions(e),!(!(V.isDragging()||V.isTransforming())||V.hitOnDragEnabled))return;const h={};let f=!1;const g=this._getTargetShape(l);this._changedPointerPositions.forEach(m=>{const p=jr(m.id)||this.getIntersection(m),S=m.id,y={evt:e,pointerId:S},E=g!==p;if(E&&g&&(g._fireAndBubble(n.pointerout,{...y},p),g._fireAndBubble(n.pointerleave,{...y},p)),p){if(h[p._id])return;h[p._id]=!0}p&&p.isListening()?(f=!0,E&&(p._fireAndBubble(n.pointerover,{...y},g),p._fireAndBubble(n.pointerenter,{...y},g),this[l+"targetShape"]=p),p._fireAndBubble(n.pointermove,{...y})):g&&(this._fire(n.pointerover,{evt:e,target:this,currentTarget:this,pointerId:S}),this[l+"targetShape"]=null)}),f||this._fire(n.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const n=Bn(e.type),l=Ri(e.type);if(!n)return;this.setPointersPositions(e);const r=this[l+"ClickStartShape"],o=this[l+"ClickEndShape"],h={};let f=!1;this._changedPointerPositions.forEach(g=>{const m=jr(g.id)||this.getIntersection(g);if(m){if(m.releaseCapture(g.id),h[m._id])return;h[m._id]=!0}const p=g.id,S={evt:e,pointerId:p};let y=!1;V["_"+l+"InDblClickWindow"]?(y=!0,clearTimeout(this[l+"DblTimeout"])):_t.justDragged||(V["_"+l+"InDblClickWindow"]=!0,clearTimeout(this[l+"DblTimeout"])),this[l+"DblTimeout"]=setTimeout(function(){V["_"+l+"InDblClickWindow"]=!1},V.dblClickWindow),m&&m.isListening()?(f=!0,this[l+"ClickEndShape"]=m,m._fireAndBubble(n.pointerup,{...S}),V["_"+l+"ListenClick"]&&r&&r===m&&(m._fireAndBubble(n.pointerclick,{...S}),y&&o&&o===m&&m._fireAndBubble(n.pointerdblclick,{...S}))):(this[l+"ClickEndShape"]=null,f||(this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),f=!0),V["_"+l+"ListenClick"]&&this._fire(n.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:p}),y&&this._fire(n.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:p}))}),f||this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),V["_"+l+"ListenClick"]=!1,e.cancelable&&l!=="touch"&&l!=="pointer"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(tu,{evt:e}):this._fire(tu,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(eu,{evt:e}):this._fire(eu,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const n=jr(e.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(Ln,fu(e)),Ni(e.pointerId)}_lostpointercapture(e){Ni(e.pointerId)}setPointersPositions(e){const n=this._getContentPosition();let l=null,r=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,o=>{this._pointerPositions.push({id:o.identifier,x:(o.clientX-n.left)/n.scaleX,y:(o.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,o=>{this._changedPointerPositions.push({id:o.identifier,x:(o.clientX-n.left)/n.scaleX,y:(o.clientY-n.top)/n.scaleY})})):(l=(e.clientX-n.left)/n.scaleX,r=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:l,y:r},this._pointerPositions=[{x:l,y:r,id:x._getFirstPointerId(e)}],this._changedPointerPositions=[{x:l,y:r,id:x._getFirstPointerId(e)}])}_setPointerPosition(e){x.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Ra({width:this.width(),height:this.height()}),this.bufferHitCanvas=new hu({pixelRatio:1,width:this.width(),height:this.height()}),!V.isBrowser)return;const e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return x.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};Il.prototype.nodeType=Jd;Bt(Il);C.addGetterSetter(Il,"container");V.isBrowser&&document.addEventListener("visibilitychange",()=>{zi.forEach(u=>{u.batchDraw()})});const h0="hasShadow",c0="shadowRGBA",f0="patternImage",d0="linearGradient",g0="radialGradient";let Vl;function Kr(){return Vl||(Vl=x.createCanvasElement().getContext("2d"),Vl)}const Oi={};function t2(u){const e=this.attrs.fillRule;e?u.fill(e):u.fill()}function e2(u){u.stroke()}function a2(u){const e=this.attrs.fillRule;e?u.fill(e):u.fill()}function n2(u){u.stroke()}function i2(){this._clearCache(h0)}function l2(){this._clearCache(c0)}function s2(){this._clearCache(f0)}function r2(){this._clearCache(d0)}function u2(){this._clearCache(g0)}class U extends Y{constructor(e){super(e);let n,l=0;for(;n=x.getHitColor(),!(n&&!(n in Oi));)if(l++,l>=1e4){x.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),n=x.getRandomColor();break}this.colorKey=n,Oi[n]=this}getContext(){return x.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return x.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h0,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(f0,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const n=Kr().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const l=new Ee;l.translate(this.fillPatternX(),this.fillPatternY()),l.rotate(V.getAngle(this.fillPatternRotation())),l.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),l.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const r=l.getMatrix(),o=typeof DOMMatrix>"u"?{a:r[0],b:r[1],c:r[2],d:r[3],e:r[4],f:r[5]}:new DOMMatrix(r);n.setTransform(o)}return n}}_getLinearGradient(){return this._getCache(d0,this.__getLinearGradient)}__getLinearGradient(){const e=this.fillLinearGradientColorStops();if(e){const n=Kr(),l=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),o=n.createLinearGradient(l.x,l.y,r.x,r.y);for(let h=0;h<e.length;h+=2)o.addColorStop(e[h],e[h+1]);return o}}_getRadialGradient(){return this._getCache(g0,this.__getRadialGradient)}__getRadialGradient(){const e=this.fillRadialGradientColorStops();if(e){const n=Kr(),l=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),o=n.createRadialGradient(l.x,l.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius());for(let h=0;h<e.length;h+=2)o.addColorStop(e[h],e[h+1]);return o}}getShadowRGBA(){return this._getCache(c0,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const e=x.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){const n=this.getStage();if(!n)return!1;const l=n.bufferHitCanvas;return l.getContext().clear(),this.drawHit(l,void 0,!0),l.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return Y.prototype.destroy.call(this),delete Oi[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var n;if(!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const r=e||this.hasFill(),o=this.hasStroke(),h=this.getAbsoluteOpacity()!==1;if(r&&o&&h)return!0;const f=this.hasShadow(),g=this.shadowForStrokeEnabled();return!!(r&&o&&f&&g)}setStrokeHitEnabled(e){x.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let n=!1,l=this.getParent();for(;l;){if(l.isCached()){n=!0;break}l=l.getParent()}const r=e.skipTransform,o=e.relativeTo||n&&this.getStage()||void 0,h=this.getSelfRect(),g=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,m=h.width+g,p=h.height+g,S=!e.skipShadow&&this.hasShadow(),y=S?this.shadowOffsetX():0,E=S?this.shadowOffsetY():0,_=m+Math.abs(y),M=p+Math.abs(E),R=S&&this.shadowBlur()||0,A=_+R*2,N=M+R*2,H={width:A,height:N,x:-(g/2+R)+Math.min(y,0)+h.x,y:-(g/2+R)+Math.min(E,0)+h.y};return r?H:this._transformedRect(H,o)}drawScene(e,n,l){const r=this.getLayer(),o=e||r.getCanvas(),h=o.getContext(),f=this._getCanvasCache(),g=this.getSceneFunc(),m=this.hasShadow();let p;const S=n===this;if(!this.isVisible()&&!S)return this;if(f){h.save();const y=this.getAbsoluteTransform(n).getMatrix();return h.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedSceneCanvas(h),h.restore(),this}if(!g)return this;if(h.save(),this._useBufferCanvas()){p=this.getStage();const y=l||p.bufferCanvas,E=y.getContext();l?(E.save(),E.setTransform(1,0,0,1,0,0),E.clearRect(0,0,y.width,y.height),E.restore()):E.clear(),E.save(),E._applyLineJoin(this),E._applyMiterLimit(this);const _=this.getAbsoluteTransform(n).getMatrix();E.transform(_[0],_[1],_[2],_[3],_[4],_[5]),g.call(this,E,this),E.restore();const M=y.pixelRatio;m&&h._applyShadow(this),S||(h._applyOpacity(this),h._applyGlobalCompositeOperation(this)),h.drawImage(y._canvas,y.x||0,y.y||0,y.width/M,y.height/M)}else{if(h._applyLineJoin(this),h._applyMiterLimit(this),!S){const y=this.getAbsoluteTransform(n).getMatrix();h.transform(y[0],y[1],y[2],y[3],y[4],y[5]),h._applyOpacity(this),h._applyGlobalCompositeOperation(this)}m&&h._applyShadow(this),g.call(this,h,this)}return h.restore(),this}drawHit(e,n,l=!1){if(!this.shouldDrawHit(n,l))return this;const r=this.getLayer(),o=e||r.hitCanvas,h=o&&o.getContext(),f=this.hitFunc()||this.sceneFunc(),g=this._getCanvasCache(),m=g&&g.hit;if(this.colorKey||x.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),m){h.save();const S=this.getAbsoluteTransform(n).getMatrix();return h.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedHitCanvas(h),h.restore(),this}if(!f)return this;if(h.save(),h._applyLineJoin(this),h._applyMiterLimit(this),!(this===n)){const S=this.getAbsoluteTransform(n).getMatrix();h.transform(S[0],S[1],S[2],S[3],S[4],S[5])}return f.call(this,h,this),h.restore(),this}drawHitFromCache(e=0){const n=this._getCanvasCache(),l=this._getCachedSceneCanvas(),r=n.hit,o=r.getContext(),h=r.getWidth(),f=r.getHeight();o.clear(),o.drawImage(l._canvas,0,0,h,f);try{const g=o.getImageData(0,0,h,f),m=g.data,p=m.length,S=x._hexToRgb(this.colorKey);for(let y=0;y<p;y+=4)m[y+3]>e?(m[y]=S.r,m[y+1]=S.g,m[y+2]=S.b,m[y+3]=255):m[y+3]=0;o.putImageData(g,0,0)}catch(g){x.error("Unable to draw hit graph from cached scene canvas. "+g.message)}return this}hasPointerCapture(e){return Ic(e,this)}setPointerCapture(e){$c(e,this)}releaseCapture(e){Ni(e)}}U.prototype._fillFunc=t2;U.prototype._strokeFunc=e2;U.prototype._fillFuncHit=a2;U.prototype._strokeFuncHit=n2;U.prototype._centroid=!1;U.prototype.nodeType="Shape";Bt(U);U.prototype.eventListeners={};U.prototype.on.call(U.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",i2);U.prototype.on.call(U.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",l2);U.prototype.on.call(U.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",s2);U.prototype.on.call(U.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",r2);U.prototype.on.call(U.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",u2);C.addGetterSetter(U,"stroke",void 0,Wc());C.addGetterSetter(U,"strokeWidth",2,j());C.addGetterSetter(U,"fillAfterStrokeEnabled",!1);C.addGetterSetter(U,"hitStrokeWidth","auto",cu());C.addGetterSetter(U,"strokeHitEnabled",!0,Ue());C.addGetterSetter(U,"perfectDrawEnabled",!0,Ue());C.addGetterSetter(U,"shadowForStrokeEnabled",!0,Ue());C.addGetterSetter(U,"lineJoin");C.addGetterSetter(U,"lineCap");C.addGetterSetter(U,"miterLimit");C.addGetterSetter(U,"sceneFunc");C.addGetterSetter(U,"hitFunc");C.addGetterSetter(U,"dash");C.addGetterSetter(U,"dashOffset",0,j());C.addGetterSetter(U,"shadowColor",void 0,tn());C.addGetterSetter(U,"shadowBlur",0,j());C.addGetterSetter(U,"shadowOpacity",1,j());C.addComponentsGetterSetter(U,"shadowOffset",["x","y"]);C.addGetterSetter(U,"shadowOffsetX",0,j());C.addGetterSetter(U,"shadowOffsetY",0,j());C.addGetterSetter(U,"fillPatternImage");C.addGetterSetter(U,"fill",void 0,Wc());C.addGetterSetter(U,"fillPatternX",0,j());C.addGetterSetter(U,"fillPatternY",0,j());C.addGetterSetter(U,"fillLinearGradientColorStops");C.addGetterSetter(U,"strokeLinearGradientColorStops");C.addGetterSetter(U,"fillRadialGradientStartRadius",0);C.addGetterSetter(U,"fillRadialGradientEndRadius",0);C.addGetterSetter(U,"fillRadialGradientColorStops");C.addGetterSetter(U,"fillPatternRepeat","repeat");C.addGetterSetter(U,"fillEnabled",!0);C.addGetterSetter(U,"strokeEnabled",!0);C.addGetterSetter(U,"shadowEnabled",!0);C.addGetterSetter(U,"dashEnabled",!0);C.addGetterSetter(U,"strokeScaleEnabled",!0);C.addGetterSetter(U,"fillPriority","color");C.addComponentsGetterSetter(U,"fillPatternOffset",["x","y"]);C.addGetterSetter(U,"fillPatternOffsetX",0,j());C.addGetterSetter(U,"fillPatternOffsetY",0,j());C.addComponentsGetterSetter(U,"fillPatternScale",["x","y"]);C.addGetterSetter(U,"fillPatternScaleX",1,j());C.addGetterSetter(U,"fillPatternScaleY",1,j());C.addComponentsGetterSetter(U,"fillLinearGradientStartPoint",["x","y"]);C.addComponentsGetterSetter(U,"strokeLinearGradientStartPoint",["x","y"]);C.addGetterSetter(U,"fillLinearGradientStartPointX",0);C.addGetterSetter(U,"strokeLinearGradientStartPointX",0);C.addGetterSetter(U,"fillLinearGradientStartPointY",0);C.addGetterSetter(U,"strokeLinearGradientStartPointY",0);C.addComponentsGetterSetter(U,"fillLinearGradientEndPoint",["x","y"]);C.addComponentsGetterSetter(U,"strokeLinearGradientEndPoint",["x","y"]);C.addGetterSetter(U,"fillLinearGradientEndPointX",0);C.addGetterSetter(U,"strokeLinearGradientEndPointX",0);C.addGetterSetter(U,"fillLinearGradientEndPointY",0);C.addGetterSetter(U,"strokeLinearGradientEndPointY",0);C.addComponentsGetterSetter(U,"fillRadialGradientStartPoint",["x","y"]);C.addGetterSetter(U,"fillRadialGradientStartPointX",0);C.addGetterSetter(U,"fillRadialGradientStartPointY",0);C.addComponentsGetterSetter(U,"fillRadialGradientEndPoint",["x","y"]);C.addGetterSetter(U,"fillRadialGradientEndPointX",0);C.addGetterSetter(U,"fillRadialGradientEndPointY",0);C.addGetterSetter(U,"fillPatternRotation",0);C.addGetterSetter(U,"fillRule",void 0,tn());C.backCompat(U,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const o2="beforeDraw",h2="draw",m0=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],c2=m0.length;let en=class extends be{constructor(e){super(e),this.canvas=new Ra,this.hitCanvas=new hu({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Y.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Y.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Y.prototype.moveDown.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Y.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return Y.prototype.remove.call(this),e&&e.parentNode&&x._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&x.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e={...e},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),Y.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){x.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){x.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,x.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let n=1,l=!1;for(;;){for(let r=0;r<c2;r++){const o=m0[r],h=this._getIntersection({x:e.x+o.x*n,y:e.y+o.y*n}),f=h.shape;if(f)return f;if(l=!!h.antialiased,!h.antialiased)break}if(l)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,l=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,r=l[3];if(r===255){const o=x.getHitColorKey(l[0],l[1],l[2]),h=Oi[o];return h?{shape:h}:{antialiased:!0}}else if(r>0)return{antialiased:!0};return{}}drawScene(e,n,l){const r=this.getLayer(),o=e||r&&r.getCanvas();return this._fire(o2,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),be.prototype.drawScene.call(this,o,n,l),this._fire(h2,{node:this}),this}drawHit(e,n){const l=this.getLayer(),r=e||l&&l.hitCanvas;return l&&l.clearBeforeDraw()&&l.getHitCanvas().getContext().clear(),be.prototype.drawHit.call(this,r,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){x.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return x.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return x.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};en.prototype.nodeType="Layer";Bt(en);C.addGetterSetter(en,"imageSmoothingEnabled",!0);C.addGetterSetter(en,"clearBeforeDraw",!0);C.addGetterSetter(en,"hitGraphEnabled",!0,Ue());class du extends en{constructor(e){super(e),this.listening(!1),x.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}du.prototype.nodeType="FastLayer";Bt(du);class Yn extends be{_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&x.throw("You may only add groups and shapes to groups.")}}Yn.prototype.nodeType="Group";Bt(Yn);const Qr=(function(){return $a.performance&&$a.performance.now?function(){return $a.performance.now()}:function(){return new Date().getTime()}})();class ze{constructor(e,n){this.id=ze.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Qr(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,l=n.length;for(let r=0;r<l;r++)if(n[r]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const n=ze.animations,l=n.length;for(let r=0;r<l;r++)if(n[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Qr(),ze._addAnimation(this),this}stop(){return ze._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,l=this.animations,r=l.length;for(let o=0;o<r;o++)if(l[o].id===n){this.animations.splice(o,1);break}}static _runFrames(){const e={},n=this.animations;for(let l=0;l<n.length;l++){const r=n[l],o=r.layers,h=r.func;r._updateFrameObject(Qr());const f=o.length;let g;if(h?g=h.call(r,r.frame)!==!1:g=!0,!!g)for(let m=0;m<f;m++){const p=o[m];p._id!==void 0&&(e[p._id]=p)}}for(const l in e)e.hasOwnProperty(l)&&e[l].batchDraw()}static _animationLoop(){const e=ze;e.animations.length?(e._runFrames(),x.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,x.requestAnimFrame(this._animationLoop))}}ze.animations=[];ze.animIdCounter=0;ze.animRunning=!1;const f2={node:1,duration:1,easing:1,onFinish:1,yoyo:1},d2=1,Mc=2,Rc=3,Nc=["fill","stroke","shadowColor"];let g2=0;class m2{constructor(e,n,l,r,o,h,f){this.prop=e,this.propFunc=n,this.begin=r,this._pos=r,this.duration=h,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=l,this._change=o-this.begin,this.pause()}fire(e){const n=this[e];n&&n()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=Mc,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Rc,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const e=this.getTimer()-this._startTime;this.state===Mc?this.setTime(e):this.state===Rc&&this.setTime(this.duration-e)}pause(){this.state=d2,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Mt{constructor(e){const n=this,l=e.node,r=l._id,o=e.easing||Di.Linear,h=!!e.yoyo;let f,g;typeof e.duration>"u"?f=.3:e.duration===0?f=.001:f=e.duration,this.node=l,this._id=g2++;const m=l.getLayer()||(l instanceof V.Stage?l.getLayers():null);m||x.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new ze(function(){n.tween.onEnterFrame()},m),this.tween=new m2(g,function(p){n._tweenFunc(p)},o,0,1,f*1e3,h),this._addListeners(),Mt.attrs[r]||(Mt.attrs[r]={}),Mt.attrs[r][this._id]||(Mt.attrs[r][this._id]={}),Mt.tweens[r]||(Mt.tweens[r]={});for(g in e)f2[g]===void 0&&this._addAttr(g,e[g]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,n){const l=this.node,r=l._id;let o,h,f,g,m;const p=Mt.tweens[r][e];p&&delete Mt.attrs[r][p][e];let S=l.getAttr(e);if(x._isArray(n))if(o=[],h=Math.max(n.length,S.length),e==="points"&&n.length!==S.length&&(n.length>S.length?(g=S,S=x._prepareArrayForTween(S,n,l.closed())):(f=n,n=x._prepareArrayForTween(n,S,l.closed()))),e.indexOf("fill")===0)for(let y=0;y<h;y++)if(y%2===0)o.push(n[y]-S[y]);else{const E=x.colorToRGBA(S[y]);m=x.colorToRGBA(n[y]),S[y]=E,o.push({r:m.r-E.r,g:m.g-E.g,b:m.b-E.b,a:m.a-E.a})}else for(let y=0;y<h;y++)o.push(n[y]-S[y]);else Nc.indexOf(e)!==-1?(S=x.colorToRGBA(S),m=x.colorToRGBA(n),o={r:m.r-S.r,g:m.g-S.g,b:m.b-S.b,a:m.a-S.a}):o=n-S;Mt.attrs[r][this._id][e]={start:S,diff:o,end:n,trueEnd:f,trueStart:g},Mt.tweens[r][e]=this._id}_tweenFunc(e){const n=this.node,l=Mt.attrs[n._id][this._id];let r,o,h,f,g,m,p,S;for(r in l){if(o=l[r],h=o.start,f=o.diff,S=o.end,x._isArray(h))if(g=[],p=Math.max(h.length,S.length),r.indexOf("fill")===0)for(m=0;m<p;m++)m%2===0?g.push((h[m]||0)+f[m]*e):g.push("rgba("+Math.round(h[m].r+f[m].r*e)+","+Math.round(h[m].g+f[m].g*e)+","+Math.round(h[m].b+f[m].b*e)+","+(h[m].a+f[m].a*e)+")");else for(m=0;m<p;m++)g.push((h[m]||0)+f[m]*e);else Nc.indexOf(r)!==-1?g="rgba("+Math.round(h.r+f.r*e)+","+Math.round(h.g+f.g*e)+","+Math.round(h.b+f.b*e)+","+(h.a+f.a*e)+")":g=h+f*e;n.setAttr(r,g)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const e=this.node,n=Mt.attrs[e._id][this._id];n.points&&n.points.trueEnd&&e.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const e=this.node,n=Mt.attrs[e._id][this._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const e=this.node._id,n=this._id,l=Mt.tweens[e];this.pause(),this.anim&&this.anim.stop();for(const r in l)delete Mt.tweens[e][r];delete Mt.attrs[e][n],Mt.tweens[e]&&(Object.keys(Mt.tweens[e]).length===0&&delete Mt.tweens[e],Object.keys(Mt.attrs[e]).length===0&&delete Mt.attrs[e])}}Mt.attrs={};Mt.tweens={};Y.prototype.to=function(u){const e=u.onFinish;u.node=this,u.onFinish=function(){this.destroy(),e&&e()},new Mt(u).play()};const Di={BackEaseIn(u,e,n,l){return n*(u/=l)*u*((1.70158+1)*u-1.70158)+e},BackEaseOut(u,e,n,l){return n*((u=u/l-1)*u*((1.70158+1)*u+1.70158)+1)+e},BackEaseInOut(u,e,n,l){let r=1.70158;return(u/=l/2)<1?n/2*(u*u*(((r*=1.525)+1)*u-r))+e:n/2*((u-=2)*u*(((r*=1.525)+1)*u+r)+2)+e},ElasticEaseIn(u,e,n,l,r,o){let h=0;return u===0?e:(u/=l)===1?e+n:(o||(o=l*.3),!r||r<Math.abs(n)?(r=n,h=o/4):h=o/(2*Math.PI)*Math.asin(n/r),-(r*Math.pow(2,10*(u-=1))*Math.sin((u*l-h)*(2*Math.PI)/o))+e)},ElasticEaseOut(u,e,n,l,r,o){let h=0;return u===0?e:(u/=l)===1?e+n:(o||(o=l*.3),!r||r<Math.abs(n)?(r=n,h=o/4):h=o/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*u)*Math.sin((u*l-h)*(2*Math.PI)/o)+n+e)},ElasticEaseInOut(u,e,n,l,r,o){let h=0;return u===0?e:(u/=l/2)===2?e+n:(o||(o=l*(.3*1.5)),!r||r<Math.abs(n)?(r=n,h=o/4):h=o/(2*Math.PI)*Math.asin(n/r),u<1?-.5*(r*Math.pow(2,10*(u-=1))*Math.sin((u*l-h)*(2*Math.PI)/o))+e:r*Math.pow(2,-10*(u-=1))*Math.sin((u*l-h)*(2*Math.PI)/o)*.5+n+e)},BounceEaseOut(u,e,n,l){return(u/=l)<1/2.75?n*(7.5625*u*u)+e:u<2/2.75?n*(7.5625*(u-=1.5/2.75)*u+.75)+e:u<2.5/2.75?n*(7.5625*(u-=2.25/2.75)*u+.9375)+e:n*(7.5625*(u-=2.625/2.75)*u+.984375)+e},BounceEaseIn(u,e,n,l){return n-Di.BounceEaseOut(l-u,0,n,l)+e},BounceEaseInOut(u,e,n,l){return u<l/2?Di.BounceEaseIn(u*2,0,n,l)*.5+e:Di.BounceEaseOut(u*2-l,0,n,l)*.5+n*.5+e},EaseIn(u,e,n,l){return n*(u/=l)*u+e},EaseOut(u,e,n,l){return-n*(u/=l)*(u-2)+e},EaseInOut(u,e,n,l){return(u/=l/2)<1?n/2*u*u+e:-n/2*(--u*(u-2)-1)+e},StrongEaseIn(u,e,n,l){return n*(u/=l)*u*u*u*u+e},StrongEaseOut(u,e,n,l){return n*((u=u/l-1)*u*u*u*u+1)+e},StrongEaseInOut(u,e,n,l){return(u/=l/2)<1?n/2*u*u*u*u*u+e:n/2*((u-=2)*u*u*u*u+2)+e},Linear(u,e,n,l){return n*u/l+e}},Xn=x._assign(V,{Util:x,Transform:Ee,Node:Y,Container:be,Stage:Il,stages:zi,Layer:en,FastLayer:du,Group:Yn,DD:_t,Shape:U,shapes:Oi,Animation:ze,Tween:Mt,Easings:Di,Context:Wl,Canvas:ou});class la extends U{_sceneFunc(e){const n=V.getAngle(this.angle()),l=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,l),e.arc(0,0,this.innerRadius(),n,0,!l),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),l=this.clockwise(),r=V.getAngle(l?360-this.angle():this.angle()),o=Math.cos(Math.min(r,Math.PI)),h=1,f=Math.sin(Math.min(Math.max(Math.PI,r),3*Math.PI/2)),g=Math.sin(Math.min(r,Math.PI/2)),m=o*(o>0?e:n),p=h*n,S=f*(f>0?e:n),y=g*(g>0?n:e);return{x:m,y:l?-1*y:S,width:p-m,height:y-S}}}la.prototype._centroid=!0;la.prototype.className="Arc";la.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];Bt(la);C.addGetterSetter(la,"innerRadius",0,j());C.addGetterSetter(la,"outerRadius",0,j());C.addGetterSetter(la,"angle",0,j());C.addGetterSetter(la,"clockwise",!1,Ue());function au(u,e,n,l,r,o,h){const f=Math.sqrt(Math.pow(n-u,2)+Math.pow(l-e,2)),g=Math.sqrt(Math.pow(r-n,2)+Math.pow(o-l,2)),m=h*f/(f+g),p=h*g/(f+g),S=n-m*(r-u),y=l-m*(o-e),E=n+p*(r-u),_=l+p*(o-e);return[S,y,E,_]}function zc(u,e){const n=u.length,l=[];for(let r=2;r<n-2;r+=2){const o=au(u[r-2],u[r-1],u[r],u[r+1],u[r+2],u[r+3],e);isNaN(o[0])||(l.push(o[0]),l.push(o[1]),l.push(u[r]),l.push(u[r+1]),l.push(o[2]),l.push(o[3]))}return l}function p2(u){const e=[[u[0],u[2],u[4],u[6]],[u[1],u[3],u[5],u[7]]],n=[];for(const l of e){const r=-3*l[0]+9*l[1]-9*l[2]+3*l[3];if(r!==0){const o=6*l[0]-12*l[1]+6*l[2],h=-3*l[0]+3*l[1],f=o*o-4*r*h;if(f>=0){const g=Math.sqrt(f);n.push((-o+g)/(2*r)),n.push((-o-g)/(2*r))}}}return n.filter(l=>l>0&&l<1).flatMap(l=>e.map(r=>{const o=1-l;return o*o*o*r[0]+3*o*o*l*r[1]+3*o*l*l*r[2]+l*l*l*r[3]}))}class sa extends U{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const n=this.points(),l=n.length,r=this.tension(),o=this.closed(),h=this.bezier();if(!l)return;let f=0;if(e.beginPath(),e.moveTo(n[0],n[1]),r!==0&&l>4){const g=this.getTensionPoints(),m=g.length;for(f=o?0:4,o||e.quadraticCurveTo(g[0],g[1],g[2],g[3]);f<m-2;)e.bezierCurveTo(g[f++],g[f++],g[f++],g[f++],g[f++],g[f++]);o||e.quadraticCurveTo(g[m-2],g[m-1],n[l-2],n[l-1])}else if(h)for(f=2;f<l;)e.bezierCurveTo(n[f++],n[f++],n[f++],n[f++],n[f++],n[f++]);else for(f=2;f<l;f+=2)e.lineTo(n[f],n[f+1]);o?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():zc(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),n=e.length,l=this.tension(),r=au(e[n-2],e[n-1],e[0],e[1],e[2],e[3],l),o=au(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],l),h=zc(e,l);return[r[2],r[3]].concat(h).concat([o[0],o[1],e[n-2],e[n-1],o[2],o[3],r[0],r[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.bezier()?e=[e[0],e[1],...p2(this.points()),e[e.length-2],e[e.length-1]]:e=this.points();let n=e[0],l=e[0],r=e[1],o=e[1],h,f;for(let g=0;g<e.length/2;g++)h=e[g*2],f=e[g*2+1],n=Math.min(n,h),l=Math.max(l,h),r=Math.min(r,f),o=Math.max(o,f);return{x:n,y:r,width:l-n,height:o-r}}}sa.prototype.className="Line";sa.prototype._attrsAffectingSize=["points","bezier","tension"];Bt(sa);C.addGetterSetter(sa,"closed",!1);C.addGetterSetter(sa,"bezier",!1);C.addGetterSetter(sa,"tension",0,j());C.addGetterSetter(sa,"points",[],Dd());const v2=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],y2=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],S2=[[1],[1,1],[1,2,1],[1,3,3,1]],Oc=(u,e,n)=>{let l,r;const h=n/2;l=0;for(let f=0;f<20;f++)r=h*v2[20][f]+h,l+=y2[20][f]*_2(u,e,r);return h*l},Dc=(u,e,n)=>{n===void 0&&(n=1);const l=u[0]-2*u[1]+u[2],r=e[0]-2*e[1]+e[2],o=2*u[1]-2*u[0],h=2*e[1]-2*e[0],f=4*(l*l+r*r),g=4*(l*o+r*h),m=o*o+h*h;if(f===0)return n*Math.sqrt(Math.pow(u[2]-u[0],2)+Math.pow(e[2]-e[0],2));const p=g/(2*f),S=m/f,y=n+p,E=S-p*p,_=y*y+E>0?Math.sqrt(y*y+E):0,M=p*p+E>0?Math.sqrt(p*p+E):0,R=p+Math.sqrt(p*p+E)!==0?E*Math.log(Math.abs((y+_)/(p+M))):0;return Math.sqrt(f)/2*(y*_-p*M+R)};function _2(u,e,n){const l=nu(1,n,u),r=nu(1,n,e),o=l*l+r*r;return Math.sqrt(o)}const nu=(u,e,n)=>{const l=n.length-1;let r,o;if(l===0)return 0;if(u===0){o=0;for(let h=0;h<=l;h++)o+=S2[l][h]*Math.pow(1-e,l-h)*Math.pow(e,h)*n[h];return o}else{r=new Array(l);for(let h=0;h<l;h++)r[h]=l*(n[h+1]-n[h]);return nu(u-1,e,r)}},Gc=(u,e,n)=>{let l=1,r=u/e,o=(u-n(r))/e,h=0;for(;l>.001;){const f=n(r+o),g=Math.abs(u-f)/e;if(g<l)l=g,r+=o;else{const m=n(r-o),p=Math.abs(u-m)/e;p<l?(l=p,r-=o):o/=2}if(h++,h>500)break}return r};class Rt extends U{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Rt.parsePathData(this.data()),this.pathLength=Rt.getPathLength(this.dataArray)}_sceneFunc(e){const n=this.dataArray;e.beginPath();let l=!1;for(let r=0;r<n.length;r++){const o=n[r].command,h=n[r].points;switch(o){case"L":e.lineTo(h[0],h[1]);break;case"M":e.moveTo(h[0],h[1]);break;case"C":e.bezierCurveTo(h[0],h[1],h[2],h[3],h[4],h[5]);break;case"Q":e.quadraticCurveTo(h[0],h[1],h[2],h[3]);break;case"A":const f=h[0],g=h[1],m=h[2],p=h[3],S=h[4],y=h[5],E=h[6],_=h[7],M=m>p?m:p,R=m>p?1:m/p,A=m>p?p/m:1;e.translate(f,g),e.rotate(E),e.scale(R,A),e.arc(0,0,M,S,S+y,1-_),e.scale(1/R,1/A),e.rotate(-E),e.translate(-f,-g);break;case"z":l=!0,e.closePath();break}}!l&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(g){if(g.command==="A"){const m=g.points[4],p=g.points[5],S=g.points[4]+p;let y=Math.PI/180;if(Math.abs(m-S)<y&&(y=Math.abs(m-S)),p<0)for(let E=m-y;E>S;E-=y){const _=Rt.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],E,0);e.push(_.x,_.y)}else for(let E=m+y;E<S;E+=y){const _=Rt.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],E,0);e.push(_.x,_.y)}}else if(g.command==="C")for(let m=0;m<=1;m+=.01){const p=Rt.getPointOnCubicBezier(m,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);e.push(p.x,p.y)}else e=e.concat(g.points)});let n=e[0],l=e[0],r=e[1],o=e[1],h,f;for(let g=0;g<e.length/2;g++)h=e[g*2],f=e[g*2+1],isNaN(h)||(n=Math.min(n,h),l=Math.max(l,h)),isNaN(f)||(r=Math.min(r,f),o=Math.max(o,f));return{x:n,y:r,width:l-n,height:o-r}}getLength(){return this.pathLength}getPointAtLength(e){return Rt.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,l,r){return Math.sqrt((l-e)*(l-e)+(r-n)*(r-n))}static getPathLength(e){let n=0;for(let l=0;l<e.length;++l)n+=e[l].pathLength;return n}static getPointAtLengthOfDataArray(e,n){let l,r=0,o=n.length;if(!o)return null;for(;r<o&&e>n[r].pathLength;)e-=n[r].pathLength,++r;if(r===o)return l=n[r-1].points.slice(-2),{x:l[0],y:l[1]};if(e<.01)return n[r].command==="M"?(l=n[r].points.slice(0,2),{x:l[0],y:l[1]}):{x:n[r].start.x,y:n[r].start.y};const h=n[r],f=h.points;switch(h.command){case"L":return Rt.getPointOnLine(e,h.start.x,h.start.y,f[0],f[1]);case"C":return Rt.getPointOnCubicBezier(Gc(e,Rt.getPathLength(n),M=>Oc([h.start.x,f[0],f[2],f[4]],[h.start.y,f[1],f[3],f[5]],M)),h.start.x,h.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return Rt.getPointOnQuadraticBezier(Gc(e,Rt.getPathLength(n),M=>Dc([h.start.x,f[0],f[2]],[h.start.y,f[1],f[3]],M)),h.start.x,h.start.y,f[0],f[1],f[2],f[3]);case"A":const g=f[0],m=f[1],p=f[2],S=f[3],y=f[5],E=f[6];let _=f[4];return _+=y*e/h.pathLength,Rt.getPointOnEllipticalArc(g,m,p,S,_,E)}return null}static getPointOnLine(e,n,l,r,o,h,f){h=h??n,f=f??l;const g=this.getLineLength(n,l,r,o);if(g<1e-10)return{x:n,y:l};if(r===n)return{x:h,y:f+(o>l?e:-e)};const m=(o-l)/(r-n),p=Math.sqrt(e*e/(1+m*m))*(r<n?-1:1),S=m*p;if(Math.abs(f-l-m*(h-n))<1e-10)return{x:h+p,y:f+S};const y=((h-n)*(r-n)+(f-l)*(o-l))/(g*g),E=n+y*(r-n),_=l+y*(o-l),M=this.getLineLength(h,f,E,_),R=Math.sqrt(e*e-M*M),A=Math.sqrt(R*R/(1+m*m))*(r<n?-1:1),N=m*A;return{x:E+A,y:_+N}}static getPointOnCubicBezier(e,n,l,r,o,h,f,g,m){function p(R){return R*R*R}function S(R){return 3*R*R*(1-R)}function y(R){return 3*R*(1-R)*(1-R)}function E(R){return(1-R)*(1-R)*(1-R)}const _=g*p(e)+h*S(e)+r*y(e)+n*E(e),M=m*p(e)+f*S(e)+o*y(e)+l*E(e);return{x:_,y:M}}static getPointOnQuadraticBezier(e,n,l,r,o,h,f){function g(E){return E*E}function m(E){return 2*E*(1-E)}function p(E){return(1-E)*(1-E)}const S=h*g(e)+r*m(e)+n*p(e),y=f*g(e)+o*m(e)+l*p(e);return{x:S,y}}static getPointOnEllipticalArc(e,n,l,r,o,h){const f=Math.cos(h),g=Math.sin(h),m={x:l*Math.cos(o),y:r*Math.sin(o)};return{x:e+(m.x*f-m.y*g),y:n+(m.x*g+m.y*f)}}static parsePathData(e){if(!e)return[];let n=e;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(let S=0;S<l.length;S++)n=n.replace(new RegExp(l[S],"g"),"|"+l[S]);const r=n.split("|"),o=[],h=[];let f=0,g=0;const m=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let p;for(let S=1;S<r.length;S++){let y=r[S],E=y.charAt(0);for(y=y.slice(1),h.length=0;p=m.exec(y);)h.push(p[0]);let _=[],M=E==="A"||E==="a"?0:-1;for(let R=0,A=h.length;R<A;R++){const N=h[R];if(N==="00"){_.push(0,0),M>=0&&(M+=2,M>=7&&(M-=7));continue}if(M>=0){if(M===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(N)){_.push(parseInt(N[0],10)),_.push(parseInt(N[1],10)),_.push(parseFloat(N.slice(2))),M+=3,M>=7&&(M-=7);continue}if(N==="11"||N==="10"||N==="01"){_.push(parseInt(N[0],10)),_.push(parseInt(N[1],10)),M+=2,M>=7&&(M-=7);continue}if(N==="0"||N==="1"){_.push(parseInt(N,10)),M+=1,M>=7&&(M-=7);continue}}else if(M===4){if(/^[01]\d+(?:\.\d+)?$/.test(N)){_.push(parseInt(N[0],10)),_.push(parseFloat(N.slice(1))),M+=2,M>=7&&(M-=7);continue}if(N==="0"||N==="1"){_.push(parseInt(N,10)),M+=1,M>=7&&(M-=7);continue}}const H=parseFloat(N);isNaN(H)?_.push(0):_.push(H),M+=1,M>=7&&(M-=7)}else{const H=parseFloat(N);isNaN(H)?_.push(0):_.push(H)}}for(;_.length>0&&!isNaN(_[0]);){let R="",A=[];const N=f,H=g;let O,K,L,P,Q,F,$,rt,k,lt;switch(E){case"l":f+=_.shift(),g+=_.shift(),R="L",A.push(f,g);break;case"L":f=_.shift(),g=_.shift(),A.push(f,g);break;case"m":const ut=_.shift(),W=_.shift();if(f+=ut,g+=W,R="M",o.length>2&&o[o.length-1].command==="z"){for(let Z=o.length-2;Z>=0;Z--)if(o[Z].command==="M"){f=o[Z].points[0]+ut,g=o[Z].points[1]+W;break}}A.push(f,g),E="l";break;case"M":f=_.shift(),g=_.shift(),R="M",A.push(f,g),E="L";break;case"h":f+=_.shift(),R="L",A.push(f,g);break;case"H":f=_.shift(),R="L",A.push(f,g);break;case"v":g+=_.shift(),R="L",A.push(f,g);break;case"V":g=_.shift(),R="L",A.push(f,g);break;case"C":A.push(_.shift(),_.shift(),_.shift(),_.shift()),f=_.shift(),g=_.shift(),A.push(f,g);break;case"c":A.push(f+_.shift(),g+_.shift(),f+_.shift(),g+_.shift()),f+=_.shift(),g+=_.shift(),R="C",A.push(f,g);break;case"S":K=f,L=g,O=o[o.length-1],O.command==="C"&&(K=f+(f-O.points[2]),L=g+(g-O.points[3])),A.push(K,L,_.shift(),_.shift()),f=_.shift(),g=_.shift(),R="C",A.push(f,g);break;case"s":K=f,L=g,O=o[o.length-1],O.command==="C"&&(K=f+(f-O.points[2]),L=g+(g-O.points[3])),A.push(K,L,f+_.shift(),g+_.shift()),f+=_.shift(),g+=_.shift(),R="C",A.push(f,g);break;case"Q":A.push(_.shift(),_.shift()),f=_.shift(),g=_.shift(),A.push(f,g);break;case"q":A.push(f+_.shift(),g+_.shift()),f+=_.shift(),g+=_.shift(),R="Q",A.push(f,g);break;case"T":K=f,L=g,O=o[o.length-1],O.command==="Q"&&(K=f+(f-O.points[0]),L=g+(g-O.points[1])),f=_.shift(),g=_.shift(),R="Q",A.push(K,L,f,g);break;case"t":K=f,L=g,O=o[o.length-1],O.command==="Q"&&(K=f+(f-O.points[0]),L=g+(g-O.points[1])),f+=_.shift(),g+=_.shift(),R="Q",A.push(K,L,f,g);break;case"A":P=_.shift(),Q=_.shift(),F=_.shift(),$=_.shift(),rt=_.shift(),k=f,lt=g,f=_.shift(),g=_.shift(),R="A",A=this.convertEndpointToCenterParameterization(k,lt,f,g,$,rt,P,Q,F);break;case"a":P=_.shift(),Q=_.shift(),F=_.shift(),$=_.shift(),rt=_.shift(),k=f,lt=g,f+=_.shift(),g+=_.shift(),R="A",A=this.convertEndpointToCenterParameterization(k,lt,f,g,$,rt,P,Q,F);break}o.push({command:R||E,points:A,start:{x:N,y:H},pathLength:this.calcLength(N,H,R||E,A)})}(E==="z"||E==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(e,n,l,r){let o,h,f,g;const m=Rt;switch(l){case"L":return m.getLineLength(e,n,r[0],r[1]);case"C":return Oc([e,r[0],r[2],r[4]],[n,r[1],r[3],r[5]],1);case"Q":return Dc([e,r[0],r[2]],[n,r[1],r[3]],1);case"A":o=0;const p=r[4],S=r[5],y=r[4]+S;let E=Math.PI/180;if(Math.abs(p-y)<E&&(E=Math.abs(p-y)),h=m.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],p,0),S<0)for(g=p-E;g>y;g-=E)f=m.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],g,0),o+=m.getLineLength(h.x,h.y,f.x,f.y),h=f;else for(g=p+E;g<y;g+=E)f=m.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],g,0),o+=m.getLineLength(h.x,h.y,f.x,f.y),h=f;return f=m.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],y,0),o+=m.getLineLength(h.x,h.y,f.x,f.y),o}return 0}static convertEndpointToCenterParameterization(e,n,l,r,o,h,f,g,m){const p=m*(Math.PI/180),S=Math.cos(p)*(e-l)/2+Math.sin(p)*(n-r)/2,y=-1*Math.sin(p)*(e-l)/2+Math.cos(p)*(n-r)/2,E=S*S/(f*f)+y*y/(g*g);E>1&&(f*=Math.sqrt(E),g*=Math.sqrt(E));let _=Math.sqrt((f*f*(g*g)-f*f*(y*y)-g*g*(S*S))/(f*f*(y*y)+g*g*(S*S)));o===h&&(_*=-1),isNaN(_)&&(_=0);const M=_*f*y/g,R=_*-g*S/f,A=(e+l)/2+Math.cos(p)*M-Math.sin(p)*R,N=(n+r)/2+Math.sin(p)*M+Math.cos(p)*R,H=function($){return Math.sqrt($[0]*$[0]+$[1]*$[1])},O=function($,rt){return($[0]*rt[0]+$[1]*rt[1])/(H($)*H(rt))},K=function($,rt){return($[0]*rt[1]<$[1]*rt[0]?-1:1)*Math.acos(O($,rt))},L=K([1,0],[(S-M)/f,(y-R)/g]),P=[(S-M)/f,(y-R)/g],Q=[(-1*S-M)/f,(-1*y-R)/g];let F=K(P,Q);return O(P,Q)<=-1&&(F=Math.PI),O(P,Q)>=1&&(F=0),h===0&&F>0&&(F=F-2*Math.PI),h===1&&F<0&&(F=F+2*Math.PI),[A,N,f,g,L,F,p,h]}}Rt.prototype.className="Path";Rt.prototype._attrsAffectingSize=["data"];Bt(Rt);C.addGetterSetter(Rt,"data");class an extends sa{_sceneFunc(e){super._sceneFunc(e);const n=Math.PI*2,l=this.points();let r=l;const o=this.tension()!==0&&l.length>4;o&&(r=this.getTensionPoints());const h=this.pointerLength(),f=l.length;let g,m;if(o){const y=[r[r.length-4],r[r.length-3],r[r.length-2],r[r.length-1],l[f-2],l[f-1]],E=Rt.calcLength(r[r.length-4],r[r.length-3],"C",y),_=Rt.getPointOnQuadraticBezier(Math.min(1,1-h/E),y[0],y[1],y[2],y[3],y[4],y[5]);g=l[f-2]-_.x,m=l[f-1]-_.y}else g=l[f-2]-l[f-4],m=l[f-1]-l[f-3];const p=(Math.atan2(m,g)+n)%n,S=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(l[f-2],l[f-1]),e.rotate(p),e.moveTo(0,0),e.lineTo(-h,S/2),e.lineTo(-h,-S/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(l[0],l[1]),o?(g=(r[0]+r[2])/2-l[0],m=(r[1]+r[3])/2-l[1]):(g=l[2]-l[0],m=l[3]-l[1]),e.rotate((Math.atan2(-m,-g)+n)%n),e.moveTo(0,0),e.lineTo(-h,S/2),e.lineTo(-h,-S/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x,y:e.y-n,width:e.width,height:e.height+n*2}}}an.prototype.className="Arrow";Bt(an);C.addGetterSetter(an,"pointerLength",10,j());C.addGetterSetter(an,"pointerWidth",10,j());C.addGetterSetter(an,"pointerAtBeginning",!1);C.addGetterSetter(an,"pointerAtEnding",!0);class qn extends U{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}qn.prototype._centroid=!0;qn.prototype.className="Circle";qn.prototype._attrsAffectingSize=["radius"];Bt(qn);C.addGetterSetter(qn,"radius",0,j());class za extends U{_sceneFunc(e){const n=this.radiusX(),l=this.radiusY();e.beginPath(),e.save(),n!==l&&e.scale(1,l/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}za.prototype.className="Ellipse";za.prototype._centroid=!0;za.prototype._attrsAffectingSize=["radiusX","radiusY"];Bt(za);C.addComponentsGetterSetter(za,"radius",["x","y"]);C.addGetterSetter(za,"radiusX",0,j());C.addGetterSetter(za,"radiusY",0,j());class xe extends U{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",n=>{this._removeImageLoad(n.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),n=this.hasShadow();return e&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),l=this.getHeight(),r=this.cornerRadius(),o=this.attrs.image;let h;if(o){const f=this.attrs.cropWidth,g=this.attrs.cropHeight;f&&g?h=[o,this.cropX(),this.cropY(),f,g,0,0,n,l]:h=[o,0,0,n,l]}(this.hasFill()||this.hasStroke()||r)&&(e.beginPath(),r?x.drawRoundedRectPath(e,n,l,r):e.rect(0,0,n,l),e.closePath(),e.fillStrokeShape(this)),o&&(r&&e.clip(),e.drawImage.apply(e,h))}_hitFunc(e){const n=this.width(),l=this.height(),r=this.cornerRadius();e.beginPath(),r?x.drawRoundedRectPath(e,n,l,r):e.rect(0,0,n,l),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n,l;return(l=(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width)!==null&&l!==void 0?l:0}getHeight(){var e,n,l;return(l=(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height)!==null&&l!==void 0?l:0}static fromURL(e,n,l=null){const r=x.createImageElement();r.onload=function(){const o=new xe({image:r});n(o)},r.onerror=l,r.crossOrigin="Anonymous",r.src=e}}xe.prototype.className="Image";xe.prototype._attrsAffectingSize=["image"];Bt(xe);C.addGetterSetter(xe,"cornerRadius",0,kl(4));C.addGetterSetter(xe,"image");C.addComponentsGetterSetter(xe,"crop",["x","y","width","height"]);C.addGetterSetter(xe,"cropX",0,j());C.addGetterSetter(xe,"cropY",0,j());C.addGetterSetter(xe,"cropWidth",0,j());C.addGetterSetter(xe,"cropHeight",0,j());const p0=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],C2="Change.konva",E2="none",iu="up",lu="right",su="down",ru="left",b2=p0.length;class gu extends Yn{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let n=this,l;const r=function(){n._sync()};for(l=0;l<b2;l++)e.on(p0[l]+C2,r)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),n=this.getTag(),l,r,o,h,f,g,m;if(e&&n){switch(l=e.width(),r=e.height(),o=n.pointerDirection(),h=n.pointerWidth(),m=n.pointerHeight(),f=0,g=0,o){case iu:f=l/2,g=-1*m;break;case lu:f=l+h,g=r/2;break;case su:f=l/2,g=r+m;break;case ru:f=-1*h,g=r/2;break}n.setAttrs({x:-1*f,y:-1*g,width:l,height:r}),e.setAttrs({x:-1*f,y:-1*g})}}}gu.prototype.className="Label";Bt(gu);class nn extends U{_sceneFunc(e){const n=this.width(),l=this.height(),r=this.pointerDirection(),o=this.pointerWidth(),h=this.pointerHeight(),f=this.cornerRadius();let g=0,m=0,p=0,S=0;typeof f=="number"?g=m=p=S=Math.min(f,n/2,l/2):(g=Math.min(f[0]||0,n/2,l/2),m=Math.min(f[1]||0,n/2,l/2),S=Math.min(f[2]||0,n/2,l/2),p=Math.min(f[3]||0,n/2,l/2)),e.beginPath(),e.moveTo(g,0),r===iu&&(e.lineTo((n-o)/2,0),e.lineTo(n/2,-1*h),e.lineTo((n+o)/2,0)),e.lineTo(n-m,0),e.arc(n-m,m,m,Math.PI*3/2,0,!1),r===lu&&(e.lineTo(n,(l-h)/2),e.lineTo(n+o,l/2),e.lineTo(n,(l+h)/2)),e.lineTo(n,l-S),e.arc(n-S,l-S,S,0,Math.PI/2,!1),r===su&&(e.lineTo((n+o)/2,l),e.lineTo(n/2,l+h),e.lineTo((n-o)/2,l)),e.lineTo(p,l),e.arc(p,l-p,p,Math.PI/2,Math.PI,!1),r===ru&&(e.lineTo(0,(l+h)/2),e.lineTo(-1*o,l/2),e.lineTo(0,(l-h)/2)),e.lineTo(0,g),e.arc(g,g,g,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,n=0,l=this.pointerWidth(),r=this.pointerHeight(),o=this.pointerDirection(),h=this.width(),f=this.height();return o===iu?(n-=r,f+=r):o===su?f+=r:o===ru?(e-=l*1.5,h+=l):o===lu&&(h+=l*1.5),{x:e,y:n,width:h,height:f}}}nn.prototype.className="Tag";Bt(nn);C.addGetterSetter(nn,"pointerDirection",E2);C.addGetterSetter(nn,"pointerWidth",0,j());C.addGetterSetter(nn,"pointerHeight",0,j());C.addGetterSetter(nn,"cornerRadius",0,kl(4));class Hi extends U{_sceneFunc(e){const n=this.cornerRadius(),l=this.width(),r=this.height();e.beginPath(),n?x.drawRoundedRectPath(e,l,r,n):e.rect(0,0,l,r),e.closePath(),e.fillStrokeShape(this)}}Hi.prototype.className="Rect";Bt(Hi);C.addGetterSetter(Hi,"cornerRadius",0,kl(4));let Oa=class extends U{_sceneFunc(e){const n=this._getPoints(),l=this.radius(),r=this.sides(),o=this.cornerRadius();if(e.beginPath(),o)x.drawRoundedPolygonPath(e,n,r,l,o);else{e.moveTo(n[0].x,n[0].y);for(let h=1;h<n.length;h++)e.lineTo(n[h].x,n[h].y)}e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,l=[];for(let r=0;r<e;r++)l.push({x:n*Math.sin(r*2*Math.PI/e),y:-1*n*Math.cos(r*2*Math.PI/e)});return l}getSelfRect(){const e=this._getPoints();let n=e[0].x,l=e[0].x,r=e[0].y,o=e[0].y;return e.forEach(h=>{n=Math.min(n,h.x),l=Math.max(l,h.x),r=Math.min(r,h.y),o=Math.max(o,h.y)}),{x:n,y:r,width:l-n,height:o-r}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};Oa.prototype.className="RegularPolygon";Oa.prototype._centroid=!0;Oa.prototype._attrsAffectingSize=["radius"];Bt(Oa);C.addGetterSetter(Oa,"radius",0,j());C.addGetterSetter(Oa,"sides",0,j());C.addGetterSetter(Oa,"cornerRadius",0,kl(4));const Hc=Math.PI*2;class ln extends U{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,Hc,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),Hc,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}ln.prototype.className="Ring";ln.prototype._centroid=!0;ln.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Bt(ln);C.addGetterSetter(ln,"innerRadius",0,j());C.addGetterSetter(ln,"outerRadius",0,j());class Ve extends U{constructor(e){super(e),this._updated=!0,this.anim=new ze(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const n=this.animation(),l=this.frameIndex(),r=l*4,o=this.animations()[n],h=this.frameOffsets(),f=o[r+0],g=o[r+1],m=o[r+2],p=o[r+3],S=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,m,p),e.closePath(),e.fillStrokeShape(this)),S)if(h){const y=h[n],E=l*2;e.drawImage(S,f,g,m,p,y[E+0],y[E+1],m,p)}else e.drawImage(S,f,g,m,p,0,0,m,p)}_hitFunc(e){const n=this.animation(),l=this.frameIndex(),r=l*4,o=this.animations()[n],h=this.frameOffsets(),f=o[r+2],g=o[r+3];if(e.beginPath(),h){const m=h[n],p=l*2;e.rect(m[p+0],m[p+1],f,g)}else e.rect(0,0,f,g);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),n=this.animation(),l=this.animations(),r=l[n],o=r.length/4;e<o-1?this.frameIndex(e+1):this.frameIndex(0)}}Ve.prototype.className="Sprite";Bt(Ve);C.addGetterSetter(Ve,"animation");C.addGetterSetter(Ve,"animations");C.addGetterSetter(Ve,"frameOffsets");C.addGetterSetter(Ve,"image");C.addGetterSetter(Ve,"frameIndex",0,j());C.addGetterSetter(Ve,"frameRate",17,j());C.backCompat(Ve,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Da extends U{_sceneFunc(e){const n=this.innerRadius(),l=this.outerRadius(),r=this.numPoints();e.beginPath(),e.moveTo(0,0-l);for(let o=1;o<r*2;o++){const h=o%2===0?l:n,f=h*Math.sin(o*Math.PI/r),g=-1*h*Math.cos(o*Math.PI/r);e.lineTo(f,g)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Da.prototype.className="Star";Da.prototype._centroid=!0;Da.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Bt(Da);C.addGetterSetter(Da,"numPoints",5,j());C.addGetterSetter(Da,"innerRadius",0,j());C.addGetterSetter(Da,"outerRadius",0,j());function Ma(u){return[...u].reduce((e,n,l,r)=>{if(/\p{Emoji}/u.test(n)){const o=r[l+1];o&&/\p{Emoji_Modifier}|\u200D/u.test(o)?(e.push(n+o),r[l+1]=""):e.push(n)}else/\p{Regional_Indicator}{2}/u.test(n+(r[l+1]||""))?e.push(n+r[l+1]):l>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(n)?e[e.length-1]+=n:n&&e.push(n);return e},[])}const Un="auto",x2="center",v0="inherit",Ci="justify",T2="Change.konva",A2="2d",Bc="-",y0="left",M2="text",R2="Text",N2="top",z2="bottom",Uc="middle",S0="normal",O2="px ",Kl=" ",D2="right",Lc="rtl",G2="word",H2="char",Yc="none",wr="",_0=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],B2=_0.length;function U2(u){return u.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,l=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!l&&(e=`"${e}"`),e}).join(", ")}let Ql;function Zr(){return Ql||(Ql=x.createCanvasElement().getContext(A2),Ql)}function L2(u){u.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Y2(u){u.setAttr("miterLimit",2),u.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function X2(u){return u=u||{},!u.fillLinearGradientColorStops&&!u.fillRadialGradientColorStops&&!u.fillPatternImage&&(u.fill=u.fill||"black"),u}class Nt extends U{constructor(e){super(X2(e)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<B2;n++)this.on(_0[n]+T2,this._setTextData);this._setTextData()}_sceneFunc(e){var n,l;const r=this.textArr,o=r.length;if(!this.text())return;let h=this.padding(),f=this.fontSize(),g=this.lineHeight()*f,m=this.verticalAlign(),p=this.direction(),S=0,y=this.align(),E=this.getWidth(),_=this.letterSpacing(),M=this.charRenderFunc(),R=this.fill(),A=this.textDecoration(),N=this.underlineOffset(),H=A.indexOf("underline")!==-1,O=A.indexOf("line-through")!==-1,K;p=p===v0?e.direction:p;let L=g/2,P=Uc;if(!V.legacyTextRendering){const Q=this.measureSize("M");P="alphabetic";const F=(n=Q.fontBoundingBoxAscent)!==null&&n!==void 0?n:Q.actualBoundingBoxAscent,$=(l=Q.fontBoundingBoxDescent)!==null&&l!==void 0?l:Q.actualBoundingBoxDescent;L=(F-$)/2+g/2}for(p===Lc&&e.setAttr("direction",p),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",P),e.setAttr("textAlign",y0),m===Uc?S=(this.getHeight()-o*g-h*2)/2:m===z2&&(S=this.getHeight()-o*g-h*2),e.translate(h,S+h),K=0;K<o;K++){let Q=0,F=0;const $=r[K],rt=$.text,k=$.width,lt=$.lastInParagraph;if(e.save(),y===D2?Q+=E-k-h*2:y===x2&&(Q+=(E-k-h*2)/2),H){e.save(),e.beginPath();const W=N??(V.legacyTextRendering?Math.round(f/2):Math.round(f/4)),Z=Q,bt=L+F+W;e.moveTo(Z,bt);const I=y===Ci&&!lt?E-h*2:k;e.lineTo(Z+Math.round(I),bt),e.lineWidth=f/15;const st=this._getLinearGradient();e.strokeStyle=st||R,e.stroke(),e.restore()}const ut=Q;if(p!==Lc&&(_!==0||y===Ci||M)){const W=rt.split(" ").length-1,Z=Ma(rt);for(let bt=0;bt<Z.length;bt++){const I=Z[bt];if(I===" "&&!lt&&y===Ci&&(Q+=(E-h*2-k)/W),this._partialTextX=Q,this._partialTextY=L+F,this._partialText=I,M){e.save();const Ct=r.slice(0,K).reduce((zt,It)=>zt+Ma(It.text).length,0),mt=bt+Ct;M({char:I,index:mt,x:Q,y:L+F,lineIndex:K,column:bt,isLastInLine:lt,width:this.measureSize(I).width,context:e})}e.fillStrokeShape(this),M&&e.restore(),Q+=this.measureSize(I).width+_}}else _!==0&&e.setAttr("letterSpacing",`${_}px`),this._partialTextX=Q,this._partialTextY=L+F,this._partialText=rt,e.fillStrokeShape(this);if(O){e.save(),e.beginPath();const W=V.legacyTextRendering?0:-Math.round(f/4),Z=ut;e.moveTo(Z,L+F+W);const bt=y===Ci&&!lt?E-h*2:k;e.lineTo(Z+Math.round(bt),L+F+W),e.lineWidth=f/15;const I=this._getLinearGradient();e.strokeStyle=I||R,e.stroke(),e.restore()}e.restore(),o>1&&(L+=g)}}_hitFunc(e){const n=this.getWidth(),l=this.getHeight();e.beginPath(),e.rect(0,0,n,l),e.closePath(),e.fillStrokeShape(this)}setText(e){const n=x._isString(e)?e:e==null?"":e+"";return this._setAttr(M2,n),this}getWidth(){return this.attrs.width===Un||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Un||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return x.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n,l,r,o,h,f,g,m,p,S,y;let E=Zr(),_=this.fontSize(),M;E.save(),E.font=this._getContextFont(),M=E.measureText(e),E.restore();const R=_/100;return{actualBoundingBoxAscent:(n=M.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*R,actualBoundingBoxDescent:(l=M.actualBoundingBoxDescent)!==null&&l!==void 0?l:0,actualBoundingBoxLeft:(r=M.actualBoundingBoxLeft)!==null&&r!==void 0?r:-7.421875*R,actualBoundingBoxRight:(o=M.actualBoundingBoxRight)!==null&&o!==void 0?o:75.732421875*R,alphabeticBaseline:(h=M.alphabeticBaseline)!==null&&h!==void 0?h:0,emHeightAscent:(f=M.emHeightAscent)!==null&&f!==void 0?f:100*R,emHeightDescent:(g=M.emHeightDescent)!==null&&g!==void 0?g:-20*R,fontBoundingBoxAscent:(m=M.fontBoundingBoxAscent)!==null&&m!==void 0?m:91*R,fontBoundingBoxDescent:(p=M.fontBoundingBoxDescent)!==null&&p!==void 0?p:21*R,hangingBaseline:(S=M.hangingBaseline)!==null&&S!==void 0?S:72.80000305175781*R,ideographicBaseline:(y=M.ideographicBaseline)!==null&&y!==void 0?y:-21*R,width:M.width,height:_}}_getContextFont(){return this.fontStyle()+Kl+this.fontVariant()+Kl+(this.fontSize()+O2)+U2(this.fontFamily())}_addTextLine(e){this.align()===Ci&&(e=e.trim());const l=this._getTextWidth(e);return this.textArr.push({text:e,width:l,lastInParagraph:!1})}_getTextWidth(e){const n=this.letterSpacing(),l=e.length;return Zr().measureText(e).width+n*l}_setTextData(){let e=this.text().split(`
`),n=+this.fontSize(),l=0,r=this.lineHeight()*n,o=this.attrs.width,h=this.attrs.height,f=o!==Un&&o!==void 0,g=h!==Un&&h!==void 0,m=this.padding(),p=o-m*2,S=h-m*2,y=0,E=this.wrap(),_=E!==Yc,M=E!==H2&&_,R=this.ellipsis();this.textArr=[],Zr().font=this._getContextFont();const A=R?this._getTextWidth(wr):0;for(let N=0,H=e.length;N<H;++N){let O=e[N],K=this._getTextWidth(O);if(f&&K>p)for(;O.length>0;){let L=0,P=Ma(O).length,Q="",F=0;for(;L<P;){const $=L+P>>>1,rt=Ma(O),k=rt.slice(0,$+1).join(""),lt=this._getTextWidth(k);(R&&g&&y+r>S?lt+A:lt)<=p?(L=$+1,Q=k,F=lt):P=$}if(Q){if(M){const k=Ma(O),lt=Ma(Q),ut=k[lt.length],W=ut===Kl||ut===Bc;let Z;if(W&&F<=p)Z=lt.length;else{const bt=lt.lastIndexOf(Kl),I=lt.lastIndexOf(Bc);Z=Math.max(bt,I)+1}Z>0&&(L=Z,Q=k.slice(0,L).join(""),F=this._getTextWidth(Q))}if(Q=Q.trimRight(),this._addTextLine(Q),l=Math.max(l,F),y+=r,this._shouldHandleEllipsis(y)){this._tryToAddEllipsisToLastLine();break}if(O=Ma(O).slice(L).join("").trimLeft(),O.length>0&&(K=this._getTextWidth(O),K<=p)){this._addTextLine(O),y+=r,l=Math.max(l,K);break}}else break}else this._addTextLine(O),y+=r,l=Math.max(l,K),this._shouldHandleEllipsis(y)&&N<H-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),g&&y+r>S)break}this.textHeight=n,this.textWidth=l}_shouldHandleEllipsis(e){const n=+this.fontSize(),l=this.lineHeight()*n,r=this.attrs.height,o=r!==Un&&r!==void 0,h=this.padding(),f=r-h*2;return!(this.wrap()!==Yc)||o&&e+l>f}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,n=e!==Un&&e!==void 0,l=this.padding(),r=e-l*2,o=this.ellipsis(),h=this.textArr[this.textArr.length-1];!h||!o||(n&&(this._getTextWidth(h.text+wr)<r||(h.text=h.text.slice(0,h.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(h.text+wr))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}}Nt.prototype._fillFunc=L2;Nt.prototype._strokeFunc=Y2;Nt.prototype.className=R2;Nt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Bt(Nt);C.overWriteSetter(Nt,"width",cu());C.overWriteSetter(Nt,"height",cu());C.addGetterSetter(Nt,"direction",v0);C.addGetterSetter(Nt,"fontFamily","Arial");C.addGetterSetter(Nt,"fontSize",12,j());C.addGetterSetter(Nt,"fontStyle",S0);C.addGetterSetter(Nt,"fontVariant",S0);C.addGetterSetter(Nt,"padding",0,j());C.addGetterSetter(Nt,"align",y0);C.addGetterSetter(Nt,"verticalAlign",N2);C.addGetterSetter(Nt,"lineHeight",1,j());C.addGetterSetter(Nt,"wrap",G2);C.addGetterSetter(Nt,"ellipsis",!1,Ue());C.addGetterSetter(Nt,"letterSpacing",0,j());C.addGetterSetter(Nt,"text","",tn());C.addGetterSetter(Nt,"textDecoration","");C.addGetterSetter(Nt,"underlineOffset",void 0,j());C.addGetterSetter(Nt,"charRenderFunc",void 0);const q2="",C0="normal";function E0(u){u.fillText(this.partialText,0,0)}function b0(u){u.strokeText(this.partialText,0,0)}class Pt extends U{constructor(e){super(e),this.dummyCanvas=x.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Rt.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e>n?null:Rt.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=Rt.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const n=this.textDecoration(),l=this.fill(),r=this.fontSize(),o=this.glyphInfo,h=n.indexOf("underline")!==-1,f=n.indexOf("line-through")!==-1;h&&e.beginPath();for(let g=0;g<o.length;g++){e.save();const m=o[g].p0;e.translate(m.x,m.y),e.rotate(o[g].rotation),this.partialText=o[g].text,e.fillStrokeShape(this),h&&(g===0&&e.moveTo(0,r/2+1),e.lineTo(o[g].width,r/2+1)),e.restore()}if(h&&(e.strokeStyle=l,e.lineWidth=r/20,e.stroke()),f){e.beginPath();for(let g=0;g<o.length;g++){e.save();const m=o[g].p0;e.translate(m.x,m.y),e.rotate(o[g].rotation),g===0&&e.moveTo(0,0),e.lineTo(o[g].width,0),e.restore()}e.strokeStyle=l,e.lineWidth=r/20,e.stroke()}e.restore()}_hitFunc(e){e.beginPath();const n=this.glyphInfo;if(n.length>=1){const l=n[0].p0;e.moveTo(l.x,l.y)}for(let l=0;l<n.length;l++){const r=n[l].p1;e.lineTo(r.x,r.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return x.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Nt.prototype.setText.call(this,e)}_getContextFont(){return Nt.prototype._getContextFont.call(this)}_getTextSize(e){const l=this.dummyCanvas.getContext("2d");l.save(),l.font=this._getContextFont();const r=l.measureText(e);return l.restore(),{width:r.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const e=Ma(this.text()),n=[];let l=0;for(let S=0;S<e.length;S++)n.push({char:e[S],width:this._getTextSize(e[S]).width}),l+=n[S].width;const{height:r}=this._getTextSize(this.attrs.text);if(this.textWidth=l,this.textHeight=r,this.glyphInfo=[],!this.attrs.data)return null;const o=this.letterSpacing(),h=this.align(),f=this.kerningFunc(),g=Math.max(this.textWidth+((this.attrs.text||"").length-1)*o,0);let m=0;h==="center"&&(m=Math.max(0,this.pathLength/2-g/2)),h==="right"&&(m=Math.max(0,this.pathLength-g));let p=m;for(let S=0;S<n.length;S++){const y=this._getPointAtLength(p);if(!y)return;const E=n[S].char;let _=n[S].width+o;if(E===" "&&h==="justify"){const O=this.text().split(" ").length-1;_+=(this.pathLength-g)/O}const M=this._getPointAtLength(p+_);if(!M)return;const R=Rt.getLineLength(y.x,y.y,M.x,M.y);let A=0;if(f)try{A=f(n[S-1].char,E)*this.fontSize()}catch{A=0}y.x+=A,M.x+=A,this.textWidth+=A;const N=Rt.getPointOnLine(A+R/2,y.x,y.y,M.x,M.y),H=Math.atan2(M.y-y.y,M.x-y.x);this.glyphInfo.push({transposeX:N.x,transposeY:N.y,text:e[S],rotation:H,p0:y,p1:M,width:R}),p+=_}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(m){e.push(m.p0.x),e.push(m.p0.y),e.push(m.p1.x),e.push(m.p1.y)});let n=e[0]||0,l=e[0]||0,r=e[1]||0,o=e[1]||0,h,f;for(let m=0;m<e.length/2;m++)h=e[m*2],f=e[m*2+1],n=Math.min(n,h),l=Math.max(l,h),r=Math.min(r,f),o=Math.max(o,f);const g=this.fontSize();return{x:n-g/2,y:r-g/2,width:l-n+g,height:o-r+g}}destroy(){return x.releaseCanvas(this.dummyCanvas),super.destroy()}}Pt.prototype._fillFunc=E0;Pt.prototype._strokeFunc=b0;Pt.prototype._fillFuncHit=E0;Pt.prototype._strokeFuncHit=b0;Pt.prototype.className="TextPath";Pt.prototype._attrsAffectingSize=["text","fontSize","data"];Bt(Pt);C.addGetterSetter(Pt,"data");C.addGetterSetter(Pt,"fontFamily","Arial");C.addGetterSetter(Pt,"fontSize",12,j());C.addGetterSetter(Pt,"fontStyle",C0);C.addGetterSetter(Pt,"align","left");C.addGetterSetter(Pt,"letterSpacing",0,j());C.addGetterSetter(Pt,"textBaseline","middle");C.addGetterSetter(Pt,"fontVariant",C0);C.addGetterSetter(Pt,"text",q2);C.addGetterSetter(Pt,"textDecoration","");C.addGetterSetter(Pt,"kerningFunc",void 0);const x0="tr-konva",j2=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(u=>u+`.${x0}`).join(" "),Xc="nodesRect",V2=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],K2={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},Q2="ontouchstart"in V._global;function w2(u,e,n){if(u==="rotater")return n;e+=x.degToRad(K2[u]||0);const l=(x.radToDeg(e)%360+360)%360;return x._inRange(l,315+22.5,360)||x._inRange(l,0,22.5)?"ns-resize":x._inRange(l,45-22.5,45+22.5)?"nesw-resize":x._inRange(l,90-22.5,90+22.5)?"ew-resize":x._inRange(l,135-22.5,135+22.5)?"nwse-resize":x._inRange(l,180-22.5,180+22.5)?"ns-resize":x._inRange(l,225-22.5,225+22.5)?"nesw-resize":x._inRange(l,270-22.5,270+22.5)?"ew-resize":x._inRange(l,315-22.5,315+22.5)?"nwse-resize":(x.error("Transformer has unknown angle for cursor detection: "+l),"pointer")}const Pl=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function Z2(u){return{x:u.x+u.width/2*Math.cos(u.rotation)+u.height/2*Math.sin(-u.rotation),y:u.y+u.height/2*Math.cos(u.rotation)+u.width/2*Math.sin(u.rotation)}}function T0(u,e,n){const l=n.x+(u.x-n.x)*Math.cos(e)-(u.y-n.y)*Math.sin(e),r=n.y+(u.x-n.x)*Math.sin(e)+(u.y-n.y)*Math.cos(e);return{...u,rotation:u.rotation+e,x:l,y:r}}function J2(u,e){const n=Z2(u);return T0(u,e,n)}function P2(u,e,n){let l=e;for(let r=0;r<u.length;r++){const o=V.getAngle(u[r]),h=Math.abs(o-e)%(Math.PI*2);Math.min(h,Math.PI*2-h)<n&&(l=o)}return l}let uu=0;class dt extends Yn{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(j2,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return x.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return x0+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(r=>r.isAncestorOf(this)?(x.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const o=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(r._attrsAffectingSize.length){const h=r._attrsAffectingSize.map(f=>f+"Change."+this._getEventNamespace()).join(" ");r.on(h,o)}r.on(V2.map(h=>h+`.${this._getEventNamespace()}`).join(" "),o),r.on(`absoluteTransformChange.${this._getEventNamespace()}`,o),this._proxyDrag(r)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,l=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(l,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,l=>{if(!n)return;const r=e.getAbsolutePosition(),o=r.x-n.x,h=r.y-n.y;this.nodes().forEach(f=>{if(f===e||f.isDragging())return;const g=f.getAbsolutePosition();f.setAbsolutePosition({x:g.x+o,y:g.y+h}),f.startDrag(l)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Xc),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Xc,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),l){const r=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=e.getAbsoluteScale(l),h=e.getAbsolutePosition(l),f=r.x*o.x-e.offsetX()*o.x,g=r.y*o.y-e.offsetY()*o.y,m=(V.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),p={x:h.x+f*Math.cos(m)+g*Math.sin(-m),y:h.y+g*Math.cos(m)+f*Math.sin(m),width:r.width*o.x,height:r.height*o.y,rotation:m};return T0(p,-V.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const n=[];this.nodes().map(m=>{const p=m.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),S=[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y},{x:p.x+p.width,y:p.y+p.height},{x:p.x,y:p.y+p.height}],y=m.getAbsoluteTransform();S.forEach(function(E){const _=y.point(E);n.push(_)})});const l=new Ee;l.rotate(-V.getAngle(this.rotation()));let r=1/0,o=1/0,h=-1/0,f=-1/0;n.forEach(function(m){const p=l.point(m);r===void 0&&(r=h=p.x,o=f=p.y),r=Math.min(r,p.x),o=Math.min(o,p.y),h=Math.max(h,p.x),f=Math.max(f,p.y)}),l.invert();const g=l.point({x:r,y:o});return{x:g.x,y:g.y,width:h-r,height:f-o,rotation:V.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Pl.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const n=new Hi({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Q2?10:"auto"}),l=this;n.on("mousedown touchstart",function(r){l._handleMouseDown(r)}),n.on("dragstart",r=>{n.stopDrag(),r.cancelBubble=!0}),n.on("dragend",r=>{r.cancelBubble=!0}),n.on("mouseenter",()=>{const r=V.getAngle(this.rotation()),o=this.rotateAnchorCursor(),h=w2(e,r,o);n.getStage().content&&(n.getStage().content.style.cursor=h),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const e=new U({name:"back",width:0,height:0,sceneFunc(n,l){const r=l.getParent(),o=r.padding(),h=l.width(),f=l.height();if(n.beginPath(),n.rect(-o,-o,h+o*2,f+o*2),r.rotateEnabled()&&r.rotateLineVisible()){const g=r.rotateAnchorAngle(),m=r.rotateAnchorOffset(),p=x.degToRad(g),S=Math.sin(p),y=-Math.cos(p),E=h/2,_=f/2;let M=1/0;y<0?M=Math.min(M,-_/y):y>0&&(M=Math.min(M,(f-_)/y)),S<0?M=Math.min(M,-E/S):S>0&&(M=Math.min(M,(h-E)/S));const R=E+S*M,A=_+y*M,N=x._sign(f),H=R+S*m*N,O=A+y*m*N;n.moveTo(R,A),n.lineTo(H,O)}n.fillStrokeShape(l)},hitFunc:(n,l)=>{if(!this.shouldOverdrawWholeArea())return;const r=this.padding();n.beginPath(),n.rect(-r,-r,l.width()+r*2,l.height()+r*2),n.fillStrokeShape(l)}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const n=this._getNodeRect(),l=n.width,r=n.height,o=Math.sqrt(Math.pow(l,2)+Math.pow(r,2));this.sin=Math.abs(r/o),this.cos=Math.abs(l/o),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const h=e.target.getAbsolutePosition(),f=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-h.x,y:f.y-h.y},uu++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(g=>{g._fire("transformstart",{evt:e.evt,target:g})})}_handleMouseMove(e){let n,l,r;const o=this.findOne("."+this._movingAnchorName),h=o.getStage();h.setPointersPositions(e);const f=h.getPointerPosition();let g={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const m=o.getAbsolutePosition();this.anchorDragBoundFunc()&&(g=this.anchorDragBoundFunc()(m,g,e)),o.setAbsolutePosition(g);const p=o.getAbsolutePosition();if(m.x===p.x&&m.y===p.y)return;if(this._movingAnchorName==="rotater"){const N=this._getNodeRect();n=o.x()-N.width/2,l=-o.y()+N.height/2;const H=V.getAngle(this.rotateAnchorAngle());let O=Math.atan2(-l,n)+Math.PI/2-H;N.height<0&&(O-=Math.PI);const L=V.getAngle(this.rotation())+O,P=V.getAngle(this.rotationSnapTolerance()),F=P2(this.rotationSnaps(),L,P)-N.rotation,$=J2(N,F);this._fitNodesInto($,e);return}const S=this.shiftBehavior();let y;S==="inverted"?y=this.keepRatio()&&!e.shiftKey:S==="none"?y=this.keepRatio():y=this.keepRatio()||e.shiftKey;let E=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(y){const N=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(N.x-o.x(),2)+Math.pow(N.y-o.y(),2));const H=this.findOne(".top-left").x()>N.x?-1:1,O=this.findOne(".top-left").y()>N.y?-1:1;n=r*this.cos*H,l=r*this.sin*O,this.findOne(".top-left").x(N.x-n),this.findOne(".top-left").y(N.y-l)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(y){const N=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(o.x()-N.x,2)+Math.pow(N.y-o.y(),2));const H=this.findOne(".top-right").x()<N.x?-1:1,O=this.findOne(".top-right").y()>N.y?-1:1;n=r*this.cos*H,l=r*this.sin*O,this.findOne(".top-right").x(N.x+n),this.findOne(".top-right").y(N.y-l)}var _=o.position();this.findOne(".top-left").y(_.y),this.findOne(".bottom-right").x(_.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(y){const N=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(N.x-o.x(),2)+Math.pow(o.y()-N.y,2));const H=N.x<o.x()?-1:1,O=o.y()<N.y?-1:1;n=r*this.cos*H,l=r*this.sin*O,o.x(N.x-n),o.y(N.y+l)}_=o.position(),this.findOne(".top-left").x(_.x),this.findOne(".bottom-right").y(_.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(y){const N=E?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(o.x()-N.x,2)+Math.pow(o.y()-N.y,2));const H=this.findOne(".bottom-right").x()<N.x?-1:1,O=this.findOne(".bottom-right").y()<N.y?-1:1;n=r*this.cos*H,l=r*this.sin*O,this.findOne(".bottom-right").x(N.x+n),this.findOne(".bottom-right").y(N.y+l)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(E=this.centeredScaling()||e.altKey,E){const N=this.findOne(".top-left"),H=this.findOne(".bottom-right"),O=N.x(),K=N.y(),L=this.getWidth()-H.x(),P=this.getHeight()-H.y();H.move({x:-O,y:-K}),N.move({x:L,y:P})}const M=this.findOne(".top-left").getAbsolutePosition();n=M.x,l=M.y;const R=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),A=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:l,width:R,height:A,rotation:V.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const l=this.getNode();uu--,this._fire("transformend",{evt:e,target:l}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),l&&this._nodes.forEach(r=>{var o;r._fire("transformend",{evt:e,target:r}),(o=r.getLayer())===null||o===void 0||o.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,n){const l=this._getNodeRect(),r=1;if(x._inRange(e.width,-this.padding()*2-r,r)){this.update();return}if(x._inRange(e.height,-this.padding()*2-r,r)){this.update();return}const o=new Ee;if(o.rotate(V.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const y=o.point({x:-this.padding()*2,y:0});e.x+=y.x,e.y+=y.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const y=o.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const y=o.point({x:0,y:-this.padding()*2});e.x+=y.x,e.y+=y.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const y=o.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const y=this.boundBoxFunc()(l,e);y?e=y:x.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const h=1e7,f=new Ee;f.translate(l.x,l.y),f.rotate(l.rotation),f.scale(l.width/h,l.height/h);const g=new Ee,m=e.width/h,p=e.height/h;this.flipEnabled()===!1?(g.translate(e.x,e.y),g.rotate(e.rotation),g.translate(e.width<0?e.width:0,e.height<0?e.height:0),g.scale(Math.abs(m),Math.abs(p))):(g.translate(e.x,e.y),g.rotate(e.rotation),g.scale(m,p));const S=g.multiply(f.invert());this._nodes.forEach(y=>{var E;if(!y.getStage())return;const _=y.getParent().getAbsoluteTransform(),M=y.getTransform().copy();M.translate(y.offsetX(),y.offsetY());const R=new Ee;R.multiply(_.copy().invert()).multiply(S).multiply(_).multiply(M);const A=R.decompose();y.setAttrs(A),(E=y.getLayer())===null||E===void 0||E.batchDraw()}),this.rotation(x._getRotation(e.rotation)),this._nodes.forEach(y=>{this._fire("transform",{evt:n,target:y}),y._fire("transform",{evt:n,target:y})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e;const n=this._getNodeRect();this.rotation(x._getRotation(n.rotation));const l=n.width,r=n.height,o=this.enabledAnchors(),h=this.resizeEnabled(),f=this.padding(),g=this.anchorSize(),m=this.find("._anchor");m.forEach(L=>{L.setAttrs({width:g,height:g,offsetX:g/2,offsetY:g/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:g/2+f,offsetY:g/2+f,visible:h&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:l/2,y:0,offsetY:g/2+f,visible:h&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:l,y:0,offsetX:g/2-f,offsetY:g/2+f,visible:h&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:g/2+f,visible:h&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:l,y:r/2,offsetX:g/2-f,visible:h&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:g/2+f,offsetY:g/2-f,visible:h&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:l/2,y:r,offsetY:g/2-f,visible:h&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:l,y:r,offsetX:g/2-f,offsetY:g/2-f,visible:h&&o.indexOf("bottom-right")>=0});const p=this.rotateAnchorAngle(),S=this.rotateAnchorOffset(),y=x.degToRad(p),E=Math.sin(y),_=-Math.cos(y),M=l/2,R=r/2;let A=1/0;_<0?A=Math.min(A,-R/_):_>0&&(A=Math.min(A,(r-R)/_)),E<0?A=Math.min(A,-M/E):E>0&&(A=Math.min(A,(l-M)/E));const N=M+E*A,H=R+_*A,O=x._sign(r);this._batchChangeChild(".rotater",{x:N+E*S*O,y:H+_*S*O-f*_,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:l,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(L=>L.draggable()),x:0,y:0});const K=this.anchorStyleFunc();K&&m.forEach(L=>{K(L)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Yn.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Y.prototype.toObject.call(this)}clone(e){return Y.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}dt.isTransforming=()=>uu>0;function F2(u){return u instanceof Array||x.warn("enabledAnchors value should be an array"),u instanceof Array&&u.forEach(function(e){Pl.indexOf(e)===-1&&x.warn("Unknown anchor name: "+e+". Available names are: "+Pl.join(", "))}),u||[]}dt.prototype.className="Transformer";Bt(dt);C.addGetterSetter(dt,"enabledAnchors",Pl,F2);C.addGetterSetter(dt,"flipEnabled",!0,Ue());C.addGetterSetter(dt,"resizeEnabled",!0);C.addGetterSetter(dt,"anchorSize",10,j());C.addGetterSetter(dt,"rotateEnabled",!0);C.addGetterSetter(dt,"rotateLineVisible",!0);C.addGetterSetter(dt,"rotationSnaps",[]);C.addGetterSetter(dt,"rotateAnchorOffset",50,j());C.addGetterSetter(dt,"rotateAnchorAngle",0,j());C.addGetterSetter(dt,"rotateAnchorCursor","crosshair");C.addGetterSetter(dt,"rotationSnapTolerance",5,j());C.addGetterSetter(dt,"borderEnabled",!0);C.addGetterSetter(dt,"anchorStroke","rgb(0, 161, 255)");C.addGetterSetter(dt,"anchorStrokeWidth",1,j());C.addGetterSetter(dt,"anchorFill","white");C.addGetterSetter(dt,"anchorCornerRadius",0,j());C.addGetterSetter(dt,"borderStroke","rgb(0, 161, 255)");C.addGetterSetter(dt,"borderStrokeWidth",1,j());C.addGetterSetter(dt,"borderDash");C.addGetterSetter(dt,"keepRatio",!0);C.addGetterSetter(dt,"shiftBehavior","default");C.addGetterSetter(dt,"centeredScaling",!1);C.addGetterSetter(dt,"ignoreStroke",!1);C.addGetterSetter(dt,"padding",0,j());C.addGetterSetter(dt,"nodes");C.addGetterSetter(dt,"node");C.addGetterSetter(dt,"boundBoxFunc");C.addGetterSetter(dt,"anchorDragBoundFunc");C.addGetterSetter(dt,"anchorStyleFunc");C.addGetterSetter(dt,"shouldOverdrawWholeArea",!1);C.addGetterSetter(dt,"useSingleNodeRotation",!0);C.backCompat(dt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class ra extends U{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,V.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}ra.prototype.className="Wedge";ra.prototype._centroid=!0;ra.prototype._attrsAffectingSize=["radius"];Bt(ra);C.addGetterSetter(ra,"radius",0,j());C.addGetterSetter(ra,"angle",0,j());C.addGetterSetter(ra,"clockwise",!1);C.backCompat(ra,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function qc(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const W2=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],k2=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function I2(u,e){const n=u.data,l=u.width,r=u.height;let o,h,f,g,m,p,S,y,E,_,M,R,A,N,H,O,K,L,P,Q;const F=e+e+1,$=l-1,rt=r-1,k=e+1,lt=k*(k+1)/2,ut=new qc,W=W2[e],Z=k2[e];let bt=null,I=ut,st=null,Ct=null;for(let mt=1;mt<F;mt++)I=I.next=new qc,mt===k&&(bt=I);I.next=ut,f=h=0;for(let mt=0;mt<r;mt++){R=A=N=H=g=m=p=S=0,y=k*(O=n[h]),E=k*(K=n[h+1]),_=k*(L=n[h+2]),M=k*(P=n[h+3]),g+=lt*O,m+=lt*K,p+=lt*L,S+=lt*P,I=ut;for(let zt=0;zt<k;zt++)I.r=O,I.g=K,I.b=L,I.a=P,I=I.next;for(let zt=1;zt<k;zt++)o=h+(($<zt?$:zt)<<2),g+=(I.r=O=n[o])*(Q=k-zt),m+=(I.g=K=n[o+1])*Q,p+=(I.b=L=n[o+2])*Q,S+=(I.a=P=n[o+3])*Q,R+=O,A+=K,N+=L,H+=P,I=I.next;st=ut,Ct=bt;for(let zt=0;zt<l;zt++)n[h+3]=P=S*W>>Z,P!==0?(P=255/P,n[h]=(g*W>>Z)*P,n[h+1]=(m*W>>Z)*P,n[h+2]=(p*W>>Z)*P):n[h]=n[h+1]=n[h+2]=0,g-=y,m-=E,p-=_,S-=M,y-=st.r,E-=st.g,_-=st.b,M-=st.a,o=f+((o=zt+e+1)<$?o:$)<<2,R+=st.r=n[o],A+=st.g=n[o+1],N+=st.b=n[o+2],H+=st.a=n[o+3],g+=R,m+=A,p+=N,S+=H,st=st.next,y+=O=Ct.r,E+=K=Ct.g,_+=L=Ct.b,M+=P=Ct.a,R-=O,A-=K,N-=L,H-=P,Ct=Ct.next,h+=4;f+=l}for(let mt=0;mt<l;mt++){A=N=H=R=m=p=S=g=0,h=mt<<2,y=k*(O=n[h]),E=k*(K=n[h+1]),_=k*(L=n[h+2]),M=k*(P=n[h+3]),g+=lt*O,m+=lt*K,p+=lt*L,S+=lt*P,I=ut;for(let It=0;It<k;It++)I.r=O,I.g=K,I.b=L,I.a=P,I=I.next;let zt=l;for(let It=1;It<=e;It++)h=zt+mt<<2,g+=(I.r=O=n[h])*(Q=k-It),m+=(I.g=K=n[h+1])*Q,p+=(I.b=L=n[h+2])*Q,S+=(I.a=P=n[h+3])*Q,R+=O,A+=K,N+=L,H+=P,I=I.next,It<rt&&(zt+=l);h=mt,st=ut,Ct=bt;for(let It=0;It<r;It++)o=h<<2,n[o+3]=P=S*W>>Z,P>0?(P=255/P,n[o]=(g*W>>Z)*P,n[o+1]=(m*W>>Z)*P,n[o+2]=(p*W>>Z)*P):n[o]=n[o+1]=n[o+2]=0,g-=y,m-=E,p-=_,S-=M,y-=st.r,E-=st.g,_-=st.b,M-=st.a,o=mt+((o=It+k)<rt?o:rt)*l<<2,g+=R+=st.r=n[o],m+=A+=st.g=n[o+1],p+=N+=st.b=n[o+2],S+=H+=st.a=n[o+3],st=st.next,y+=O=Ct.r,E+=K=Ct.g,_+=L=Ct.b,M+=P=Ct.a,R-=O,A-=K,N-=L,H-=P,Ct=Ct.next,h+=l}}const $2=function(e){const n=Math.round(this.blurRadius());n>0&&I2(e,n)};C.addGetterSetter(Y,"blurRadius",0,j(),C.afterSetFilter);const t3=function(u){const e=this.brightness()*255,n=u.data,l=n.length;for(let r=0;r<l;r+=4)n[r]+=e,n[r+1]+=e,n[r+2]+=e};C.addGetterSetter(Y,"brightness",0,j(),C.afterSetFilter);const e3=function(u){const e=this.brightness(),n=u.data,l=n.length;for(let r=0;r<l;r+=4)n[r]=Math.min(255,n[r]*e),n[r+1]=Math.min(255,n[r+1]*e),n[r+2]=Math.min(255,n[r+2]*e)},a3=function(u){const e=Math.pow((this.contrast()+100)/100,2),n=u.data,l=n.length;let r=150,o=150,h=150;for(let f=0;f<l;f+=4)r=n[f],o=n[f+1],h=n[f+2],r/=255,r-=.5,r*=e,r+=.5,r*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,h/=255,h-=.5,h*=e,h+=.5,h*=255,r=r<0?0:r>255?255:r,o=o<0?0:o>255?255:o,h=h<0?0:h>255?255:h,n[f]=r,n[f+1]=o,n[f+2]=h};C.addGetterSetter(Y,"contrast",0,j(),C.afterSetFilter);const n3=function(u){var e,n,l,r,o,h,f,g,m;const p=u.data,S=u.width,y=u.height,E=Math.min(1,Math.max(0,(n=(e=this.embossStrength)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:.5)),_=Math.min(1,Math.max(0,(r=(l=this.embossWhiteLevel)===null||l===void 0?void 0:l.call(this))!==null&&r!==void 0?r:.5)),R=(f={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(h=(o=this.embossDirection)===null||o===void 0?void 0:o.call(this))!==null&&h!==void 0?h:"top-left"])!==null&&f!==void 0?f:315,A=!!((m=(g=this.embossBlend)===null||g===void 0?void 0:g.call(this))!==null&&m!==void 0&&m),N=E*10,H=_*255,O=R*Math.PI/180,K=Math.cos(O),L=Math.sin(O),P=128/1020*N,Q=new Uint8ClampedArray(p),F=new Float32Array(S*y);for(let ut=0,W=0;W<p.length;W+=4,ut++)F[ut]=.2126*Q[W]+.7152*Q[W+1]+.0722*Q[W+2];const $=[-1,0,1,-2,0,2,-1,0,1],rt=[-1,-2,-1,0,0,0,1,2,1],k=[-S-1,-S,-S+1,-1,0,1,S-1,S,S+1],lt=ut=>ut<0?0:ut>255?255:ut;for(let ut=1;ut<y-1;ut++)for(let W=1;W<S-1;W++){const Z=ut*S+W;let bt=0,I=0;bt+=F[Z+k[0]]*$[0],I+=F[Z+k[0]]*rt[0],bt+=F[Z+k[1]]*$[1],I+=F[Z+k[1]]*rt[1],bt+=F[Z+k[2]]*$[2],I+=F[Z+k[2]]*rt[2],bt+=F[Z+k[3]]*$[3],I+=F[Z+k[3]]*rt[3],bt+=F[Z+k[5]]*$[5],I+=F[Z+k[5]]*rt[5],bt+=F[Z+k[6]]*$[6],I+=F[Z+k[6]]*rt[6],bt+=F[Z+k[7]]*$[7],I+=F[Z+k[7]]*rt[7],bt+=F[Z+k[8]]*$[8],I+=F[Z+k[8]]*rt[8];const st=K*bt+L*I,Ct=lt(H+st*P),mt=Z*4;if(A){const zt=Ct-H;p[mt]=lt(Q[mt]+zt),p[mt+1]=lt(Q[mt+1]+zt),p[mt+2]=lt(Q[mt+2]+zt),p[mt+3]=Q[mt+3]}else p[mt]=p[mt+1]=p[mt+2]=Ct,p[mt+3]=Q[mt+3]}for(let ut=0;ut<S;ut++){let W=ut*4,Z=((y-1)*S+ut)*4;p[W]=Q[W],p[W+1]=Q[W+1],p[W+2]=Q[W+2],p[W+3]=Q[W+3],p[Z]=Q[Z],p[Z+1]=Q[Z+1],p[Z+2]=Q[Z+2],p[Z+3]=Q[Z+3]}for(let ut=1;ut<y-1;ut++){let W=ut*S*4,Z=(ut*S+(S-1))*4;p[W]=Q[W],p[W+1]=Q[W+1],p[W+2]=Q[W+2],p[W+3]=Q[W+3],p[Z]=Q[Z],p[Z+1]=Q[Z+1],p[Z+2]=Q[Z+2],p[Z+3]=Q[Z+3]}return u};C.addGetterSetter(Y,"embossStrength",.5,j(),C.afterSetFilter);C.addGetterSetter(Y,"embossWhiteLevel",.5,j(),C.afterSetFilter);C.addGetterSetter(Y,"embossDirection","top-left",void 0,C.afterSetFilter);C.addGetterSetter(Y,"embossBlend",!1,void 0,C.afterSetFilter);function Jr(u,e,n,l,r){const o=n-e,h=r-l;if(o===0)return l+h/2;if(h===0)return l;let f=(u-e)/o;return f=h*f+l,f}const i3=function(u){const e=u.data,n=e.length;let l=e[0],r=l,o,h=e[1],f=h,g,m=e[2],p=m,S;const y=this.enhance();if(y===0)return;for(let H=0;H<n;H+=4)o=e[H+0],o<l?l=o:o>r&&(r=o),g=e[H+1],g<h?h=g:g>f&&(f=g),S=e[H+2],S<m?m=S:S>p&&(p=S);r===l&&(r=255,l=0),f===h&&(f=255,h=0),p===m&&(p=255,m=0);let E,_,M,R,A,N;if(y>0)E=r+y*(255-r),_=l-y*(l-0),M=f+y*(255-f),R=h-y*(h-0),A=p+y*(255-p),N=m-y*(m-0);else{const H=(r+l)*.5;E=r+y*(r-H),_=l+y*(l-H);const O=(f+h)*.5;M=f+y*(f-O),R=h+y*(h-O);const K=(p+m)*.5;A=p+y*(p-K),N=m+y*(m-K)}for(let H=0;H<n;H+=4)e[H+0]=Jr(e[H+0],l,r,_,E),e[H+1]=Jr(e[H+1],h,f,R,M),e[H+2]=Jr(e[H+2],m,p,N,A)};C.addGetterSetter(Y,"enhance",0,j(),C.afterSetFilter);const l3=function(u){const e=u.data,n=e.length;for(let l=0;l<n;l+=4){const r=.34*e[l]+.5*e[l+1]+.16*e[l+2];e[l]=r,e[l+1]=r,e[l+2]=r}};C.addGetterSetter(Y,"hue",0,j(),C.afterSetFilter);C.addGetterSetter(Y,"saturation",0,j(),C.afterSetFilter);C.addGetterSetter(Y,"luminance",0,j(),C.afterSetFilter);const s3=function(u){const e=u.data,n=e.length,l=1,r=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,h=this.luminance()*127,f=l*r*Math.cos(o*Math.PI/180),g=l*r*Math.sin(o*Math.PI/180),m=.299*l+.701*f+.167*g,p=.587*l-.587*f+.33*g,S=.114*l-.114*f-.497*g,y=.299*l-.299*f-.328*g,E=.587*l+.413*f+.035*g,_=.114*l-.114*f+.293*g,M=.299*l-.3*f+1.25*g,R=.587*l-.586*f-1.05*g,A=.114*l+.886*f-.2*g;let N,H,O,K;for(let L=0;L<n;L+=4)N=e[L+0],H=e[L+1],O=e[L+2],K=e[L+3],e[L+0]=m*N+p*H+S*O+h,e[L+1]=y*N+E*H+_*O+h,e[L+2]=M*N+R*H+A*O+h,e[L+3]=K},r3=function(u){const e=u.data,n=e.length,l=Math.pow(2,this.value()),r=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,h=l*r*Math.cos(o*Math.PI/180),f=l*r*Math.sin(o*Math.PI/180),g=.299*l+.701*h+.167*f,m=.587*l-.587*h+.33*f,p=.114*l-.114*h-.497*f,S=.299*l-.299*h-.328*f,y=.587*l+.413*h+.035*f,E=.114*l-.114*h+.293*f,_=.299*l-.3*h+1.25*f,M=.587*l-.586*h-1.05*f,R=.114*l+.886*h-.2*f;for(let A=0;A<n;A+=4){const N=e[A+0],H=e[A+1],O=e[A+2],K=e[A+3];e[A+0]=g*N+m*H+p*O,e[A+1]=S*N+y*H+E*O,e[A+2]=_*N+M*H+R*O,e[A+3]=K}};C.addGetterSetter(Y,"hue",0,j(),C.afterSetFilter);C.addGetterSetter(Y,"saturation",0,j(),C.afterSetFilter);C.addGetterSetter(Y,"value",0,j(),C.afterSetFilter);const u3=function(u){const e=u.data,n=e.length;for(let l=0;l<n;l+=4)e[l]=255-e[l],e[l+1]=255-e[l+1],e[l+2]=255-e[l+2]},o3=function(u,e,n){const l=u.data,r=e.data,o=u.width,h=u.height,f=n.polarCenterX||o/2,g=n.polarCenterY||h/2;let m=Math.sqrt(f*f+g*g),p=o-f,S=h-g;const y=Math.sqrt(p*p+S*S);m=y>m?y:m;const E=h,_=o,M=360/_*Math.PI/180;for(let R=0;R<_;R+=1){const A=Math.sin(R*M),N=Math.cos(R*M);for(let H=0;H<E;H+=1){p=Math.floor(f+m*H/E*N),S=Math.floor(g+m*H/E*A);let O=(S*o+p)*4;const K=l[O+0],L=l[O+1],P=l[O+2],Q=l[O+3];O=(R+H*o)*4,r[O+0]=K,r[O+1]=L,r[O+2]=P,r[O+3]=Q}}},h3=function(u,e,n){const l=u.data,r=e.data,o=u.width,h=u.height,f=n.polarCenterX||o/2,g=n.polarCenterY||h/2;let m=Math.sqrt(f*f+g*g),p=o-f,S=h-g;const y=Math.sqrt(p*p+S*S);m=y>m?y:m;const E=h,_=o,M=0;let R,A;for(p=0;p<o;p+=1)for(S=0;S<h;S+=1){const N=p-f,H=S-g,O=Math.sqrt(N*N+H*H)*E/m;let K=(Math.atan2(H,N)*180/Math.PI+360+M)%360;K=K*_/360,R=Math.floor(K),A=Math.floor(O);let L=(A*o+R)*4;const P=l[L+0],Q=l[L+1],F=l[L+2],$=l[L+3];L=(S*o+p)*4,r[L+0]=P,r[L+1]=Q,r[L+2]=F,r[L+3]=$}},c3=function(u){const e=u.width,n=u.height;let l,r,o,h,f,g,m,p,S,y,E=Math.round(this.kaleidoscopePower());const _=Math.round(this.kaleidoscopeAngle()),M=Math.floor(e*(_%360)/360);if(E<1)return;const R=x.createCanvasElement();R.width=e,R.height=n;const A=R.getContext("2d").getImageData(0,0,e,n);x.releaseCanvas(R),o3(u,A,{polarCenterX:e/2,polarCenterY:n/2});let N=e/Math.pow(2,E);for(;N<=8;)N=N*2,E-=1;N=Math.ceil(N);let H=N,O=0,K=H,L=1;for(M+N>e&&(O=H,K=0,L=-1),r=0;r<n;r+=1)for(l=O;l!==K;l+=L)o=Math.round(l+M)%e,S=(e*r+o)*4,f=A.data[S+0],g=A.data[S+1],m=A.data[S+2],p=A.data[S+3],y=(e*r+l)*4,A.data[y+0]=f,A.data[y+1]=g,A.data[y+2]=m,A.data[y+3]=p;for(r=0;r<n;r+=1)for(H=Math.floor(N),h=0;h<E;h+=1){for(l=0;l<H+1;l+=1)S=(e*r+l)*4,f=A.data[S+0],g=A.data[S+1],m=A.data[S+2],p=A.data[S+3],y=(e*r+H*2-l-1)*4,A.data[y+0]=f,A.data[y+1]=g,A.data[y+2]=m,A.data[y+3]=p;H*=2}h3(A,u,{})};C.addGetterSetter(Y,"kaleidoscopePower",2,j(),C.afterSetFilter);C.addGetterSetter(Y,"kaleidoscopeAngle",0,j(),C.afterSetFilter);function wl(u,e,n){let l=(n*u.width+e)*4;const r=[];return r.push(u.data[l++],u.data[l++],u.data[l++],u.data[l++]),r}function Ei(u,e){return Math.sqrt(Math.pow(u[0]-e[0],2)+Math.pow(u[1]-e[1],2)+Math.pow(u[2]-e[2],2))}function f3(u){const e=[0,0,0];for(let n=0;n<u.length;n++)e[0]+=u[n][0],e[1]+=u[n][1],e[2]+=u[n][2];return e[0]/=u.length,e[1]/=u.length,e[2]/=u.length,e}function d3(u,e){const n=wl(u,0,0),l=wl(u,u.width-1,0),r=wl(u,0,u.height-1),o=wl(u,u.width-1,u.height-1),h=e||10;if(Ei(n,l)<h&&Ei(l,o)<h&&Ei(o,r)<h&&Ei(r,n)<h){const f=f3([l,n,o,r]),g=[];for(let m=0;m<u.width*u.height;m++){const p=Ei(f,[u.data[m*4],u.data[m*4+1],u.data[m*4+2]]);g[m]=p<h?0:255}return g}}function g3(u,e){for(let n=0;n<u.width*u.height;n++)u.data[4*n+3]=e[n]}function m3(u,e,n){const l=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(l.length)),o=Math.floor(r/2),h=[];for(let f=0;f<n;f++)for(let g=0;g<e;g++){const m=f*e+g;let p=0;for(let S=0;S<r;S++)for(let y=0;y<r;y++){const E=f+S-o,_=g+y-o;if(E>=0&&E<n&&_>=0&&_<e){const M=E*e+_,R=l[S*r+y];p+=u[M]*R}}h[m]=p===2040?255:0}return h}function p3(u,e,n){const l=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(l.length)),o=Math.floor(r/2),h=[];for(let f=0;f<n;f++)for(let g=0;g<e;g++){const m=f*e+g;let p=0;for(let S=0;S<r;S++)for(let y=0;y<r;y++){const E=f+S-o,_=g+y-o;if(E>=0&&E<n&&_>=0&&_<e){const M=E*e+_,R=l[S*r+y];p+=u[M]*R}}h[m]=p>=1020?255:0}return h}function v3(u,e,n){const l=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],r=Math.round(Math.sqrt(l.length)),o=Math.floor(r/2),h=[];for(let f=0;f<n;f++)for(let g=0;g<e;g++){const m=f*e+g;let p=0;for(let S=0;S<r;S++)for(let y=0;y<r;y++){const E=f+S-o,_=g+y-o;if(E>=0&&E<n&&_>=0&&_<e){const M=E*e+_,R=l[S*r+y];p+=u[M]*R}}h[m]=p}return h}const y3=function(u){const e=this.threshold();let n=d3(u,e);return n&&(n=m3(n,u.width,u.height),n=p3(n,u.width,u.height),n=v3(n,u.width,u.height),g3(u,n)),u};C.addGetterSetter(Y,"threshold",0,j(),C.afterSetFilter);const S3=function(u){const e=this.noise()*255,n=u.data,l=n.length,r=e/2;for(let o=0;o<l;o+=4)n[o+0]+=r-2*r*Math.random(),n[o+1]+=r-2*r*Math.random(),n[o+2]+=r-2*r*Math.random()};C.addGetterSetter(Y,"noise",.2,j(),C.afterSetFilter);const _3=function(u){let e=Math.ceil(this.pixelSize()),n=u.width,l=u.height,r=Math.ceil(n/e),o=Math.ceil(l/e),h=u.data;if(e<=0){x.error("pixelSize value can not be <= 0");return}for(let f=0;f<r;f+=1)for(let g=0;g<o;g+=1){let m=0,p=0,S=0,y=0;const E=f*e,_=E+e,M=g*e,R=M+e;let A=0;for(let N=E;N<_;N+=1)if(!(N>=n))for(let H=M;H<R;H+=1){if(H>=l)continue;const O=(n*H+N)*4;m+=h[O+0],p+=h[O+1],S+=h[O+2],y+=h[O+3],A+=1}m=m/A,p=p/A,S=S/A,y=y/A;for(let N=E;N<_;N+=1)if(!(N>=n))for(let H=M;H<R;H+=1){if(H>=l)continue;const O=(n*H+N)*4;h[O+0]=m,h[O+1]=p,h[O+2]=S,h[O+3]=y}}};C.addGetterSetter(Y,"pixelSize",8,j(),C.afterSetFilter);const C3=function(u){const e=Math.round(this.levels()*254)+1,n=u.data,l=n.length,r=255/e;for(let o=0;o<l;o+=1)n[o]=Math.floor(n[o]/r)*r};C.addGetterSetter(Y,"levels",.5,j(),C.afterSetFilter);const E3=function(u){const e=u.data,n=e.length,l=this.red(),r=this.green(),o=this.blue();for(let h=0;h<n;h+=4){const f=(.34*e[h]+.5*e[h+1]+.16*e[h+2])/255;e[h]=f*l,e[h+1]=f*r,e[h+2]=f*o,e[h+3]=e[h+3]}};C.addGetterSetter(Y,"red",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)});C.addGetterSetter(Y,"green",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)});C.addGetterSetter(Y,"blue",0,Fc,C.afterSetFilter);const b3=function(u){const e=u.data,n=e.length,l=this.red(),r=this.green(),o=this.blue(),h=this.alpha();for(let f=0;f<n;f+=4){const g=1-h;e[f]=l*h+e[f]*g,e[f+1]=r*h+e[f+1]*g,e[f+2]=o*h+e[f+2]*g}};C.addGetterSetter(Y,"red",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)});C.addGetterSetter(Y,"green",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)});C.addGetterSetter(Y,"blue",0,Fc,C.afterSetFilter);C.addGetterSetter(Y,"alpha",1,function(u){return this._filterUpToDate=!1,u>1?1:u<0?0:u});const x3=function(u){const e=u.data,n=e.length;for(let l=0;l<n;l+=4){const r=e[l+0],o=e[l+1],h=e[l+2];e[l+0]=Math.min(255,r*.393+o*.769+h*.189),e[l+1]=Math.min(255,r*.349+o*.686+h*.168),e[l+2]=Math.min(255,r*.272+o*.534+h*.131)}},T3=function(u){const n=u.data;for(let l=0;l<n.length;l+=4){const r=n[l],o=n[l+1],h=n[l+2];.2126*r+.7152*o+.0722*h>=128&&(n[l]=255-r,n[l+1]=255-o,n[l+2]=255-h)}return u},A3=function(u){const e=this.threshold()*255,n=u.data,l=n.length;for(let r=0;r<l;r+=1)n[r]=n[r]<e?0:255};C.addGetterSetter(Y,"threshold",.5,j(),C.afterSetFilter);Xn.Util._assign(Xn,{Arc:la,Arrow:an,Circle:qn,Ellipse:za,Image:xe,Label:gu,Tag:nn,Line:sa,Path:Rt,Rect:Hi,RegularPolygon:Oa,Ring:ln,Sprite:Ve,Star:Da,Text:Nt,TextPath:Pt,Transformer:dt,Wedge:ra,Filters:{Blur:$2,Brightness:e3,Brighten:t3,Contrast:a3,Emboss:n3,Enhance:i3,Grayscale:l3,HSL:s3,HSV:r3,Invert:u3,Kaleidoscope:c3,Mask:y3,Noise:S3,Pixelate:_3,Posterize:C3,RGB:E3,RGBA:b3,Sepia:x3,Solarize:T3,Threshold:A3}});var Pr={exports:{}},Fr={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jc;function M3(){return jc||(jc=1,(function(u){u.exports=function(e){function n(t,a,i,s){return new rf(t,a,i,s)}function l(){}function r(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){var a=t,i=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(i=a.return),t=a.return;while(t)}return a.tag===3?i:null}function h(t){if(o(t)!==t)throw Error(r(188))}function f(t){var a=t.alternate;if(!a){if(a=o(t),a===null)throw Error(r(188));return a!==t?null:t}for(var i=t,s=a;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(s=c.return,s!==null){i=s;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return h(c),t;if(d===s)return h(c),a;d=d.sibling}throw Error(r(188))}if(i.return!==s.return)i=c,s=d;else{for(var v=!1,b=c.child;b;){if(b===i){v=!0,i=c,s=d;break}if(b===s){v=!0,s=c,i=d;break}b=b.sibling}if(!v){for(b=d.child;b;){if(b===i){v=!0,i=d,s=c;break}if(b===s){v=!0,s=d,i=c;break}b=b.sibling}if(!v)throw Error(r(189))}}if(i.alternate!==s)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?t:a}function g(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=g(t),a!==null)return a;t=t.sibling}return null}function m(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(t.tag!==4&&(a=m(t),a!==null))return a;t=t.sibling}return null}function p(t){return t===null||typeof t!="object"?null:(t=Hh&&t[Hh]||t["@@iterator"],typeof t=="function"?t:null)}function S(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ff?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mn:return"Fragment";case sr:return"Profiler";case Dh:return"StrictMode";case ur:return"Suspense";case or:return"SuspenseList";case cr:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case gn:return"Portal";case ma:return t.displayName||"Context";case Gh:return(t._context.displayName||"Context")+".Consumer";case rr:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hr:return a=t.displayName||null,a!==null?a:S(t.type)||"Memo";case pa:a=t._payload,t=t._init;try{return S(t(a))}catch{}}return null}function y(t){return{current:t}}function E(t){0>yn||(t.current=vr[yn],vr[yn]=null,yn--)}function _(t,a){yn++,vr[yn]=t.current,t.current=a}function M(t){return t>>>=0,t===0?32:31-(q1(t)/j1|0)|0}function R(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function A(t,a,i){var s=t.pendingLanes;if(s===0)return 0;var c=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var b=s&134217727;return b!==0?(s=b&~d,s!==0?c=R(s):(v&=b,v!==0?c=R(v):i||(i=b&~t,i!==0&&(c=R(i))))):(b=s&~d,b!==0?c=R(b):v!==0?c=R(v):i||(i=s&~t,i!==0&&(c=R(i)))),c===0?0:a!==0&&a!==c&&(a&d)===0&&(d=c&-c,i=a&-a,d>=i||d===32&&(i&4194048)!==0)?a:c}function N(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function H(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O(){var t=vl;return vl<<=1,(vl&62914560)===0&&(vl=4194304),t}function K(t){for(var a=[],i=0;31>i;i++)a.push(t);return a}function L(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function P(t,a,i,s,c,d){var v=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var b=t.entanglements,G=t.expirationTimes,B=t.hiddenUpdates;for(i=v&~i;0<i;){var w=31-pe(i),X=1<<w;b[w]=0,G[w]=-1;var J=B[w];if(J!==null)for(B[w]=null,w=0;w<J.length;w++){var nt=J[w];nt!==null&&(nt.lane&=-536870913)}i&=~X}s!==0&&Q(t,s,0),d!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~a))}function Q(t,a,i){t.pendingLanes|=a,t.suspendedLanes&=~a;var s=31-pe(a);t.entangledLanes|=a,t.entanglements[s]=t.entanglements[s]|1073741824|i&261930}function F(t,a){var i=t.entangledLanes|=a;for(t=t.entanglements;i;){var s=31-pe(i),c=1<<s;c&a|t[s]&a&&(t[s]|=a),i&=~c}}function $(t,a){var i=a&-a;return i=(i&42)!==0?1:rt(i),(i&(t.suspendedLanes|a))!==0?0:i}function rt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function k(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function lt(t){if(typeof Z1=="function"&&J1(t),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(li,t)}catch{}}function ut(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}function W(t){if(_r===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);_r=a&&a[1]||"",sc=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_r+t+sc}function Z(t,a){if(!t||Cr)return"";Cr=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(a){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(nt){var J=nt}Reflect.construct(t,[],X)}else{try{X.call()}catch(nt){J=nt}t.call(X.prototype)}}else{try{throw Error()}catch(nt){J=nt}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(nt){if(nt&&J&&typeof nt.stack=="string")return[nt.stack,J.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=s.DetermineComponentFrameRoot(),v=d[0],b=d[1];if(v&&b){var G=v.split(`
`),B=b.split(`
`);for(c=s=0;s<G.length&&!G[s].includes("DetermineComponentFrameRoot");)s++;for(;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;if(s===G.length||c===B.length)for(s=G.length-1,c=B.length-1;1<=s&&0<=c&&G[s]!==B[c];)c--;for(;1<=s&&0<=c;s--,c--)if(G[s]!==B[c]){if(s!==1||c!==1)do if(s--,c--,0>c||G[s]!==B[c]){var w=`
`+G[s].replace(" at new "," at ");return t.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",t.displayName)),w}while(1<=s&&0<=c);break}}}finally{Cr=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?W(i):""}function bt(t,a){switch(t.tag){case 26:case 27:case 5:return W(t.type);case 16:return W("Lazy");case 13:return t.child!==a&&a!==null?W("Suspense Fallback"):W("Suspense");case 19:return W("SuspenseList");case 0:case 15:return Z(t.type,!1);case 11:return Z(t.type.render,!1);case 1:return Z(t.type,!0);case 31:return W("Activity");default:return""}}function I(t){try{var a="",i=null;do a+=bt(t,i),i=t,t=t.return;while(t);return a}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function st(t,a){if(typeof t=="object"&&t!==null){var i=rc.get(t);return i!==void 0?i:(a={value:t,source:a,stack:I(a)},rc.set(t,a),a)}return{value:t,source:a,stack:I(a)}}function Ct(t,a){_n[Cn++]=si,_n[Cn++]=Sl,Sl=t,si=a}function mt(t,a,i){Te[Ae++]=qe,Te[Ae++]=je,Te[Ae++]=va,va=t;var s=qe;t=je;var c=32-pe(s)-1;s&=~(1<<c),i+=1;var d=32-pe(a)+c;if(30<d){var v=c-c%5;d=(s&(1<<v)-1).toString(32),s>>=v,c-=v,qe=1<<32-pe(a)+c|i<<c|s,je=d+t}else qe=1<<d|i<<c|s,je=t}function zt(t){t.return!==null&&(Ct(t,1),mt(t,1,0))}function It(t){for(;t===Sl;)Sl=_n[--Cn],_n[Cn]=null,si=_n[--Cn],_n[Cn]=null;for(;t===va;)va=Te[--Ae],Te[Ae]=null,je=Te[--Ae],Te[Ae]=null,qe=Te[--Ae],Te[Ae]=null}function pu(t,a){Te[Ae++]=qe,Te[Ae++]=je,Te[Ae++]=va,qe=a.id,je=a.overflow,va=t}function Bi(t,a){_(ya,a),_(ri,t),_(ee,null),t=mf(a),E(ee),_(ee,t)}function sn(){E(ee),E(ri),E(ya)}function es(t){t.memoizedState!==null&&_(_l,t);var a=ee.current,i=pf(a,t.type);a!==i&&(_(ri,t),_(ee,i))}function Ui(t){ri.current===t&&(E(ee),E(ri)),_l.current===t&&(E(_l),We?Ka._currentValue=pn:Ka._currentValue2=pn)}function Ke(t){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jn(st(a,t)),Er}function vu(t,a){if(!se)throw Error(r(175));p1(t.stateNode,t.type,t.memoizedProps,a,t)||Ke(t,!0)}function yu(t){for(ae=t.return;ae;)switch(ae.tag){case 5:case 31:case 13:Me=!1;return;case 27:case 3:Me=!0;return;default:ae=ae.return}}function rn(t){if(!se||t!==ae)return!1;if(!gt)return yu(t),gt=!0,!1;var a=t.tag;if(Qt?a!==3&&a!==27&&(a!==5||Jh(t.type)&&!gl(t.type,t.memoizedProps))&&Dt&&Ke(t):a!==3&&(a!==5||Jh(t.type)&&!gl(t.type,t.memoizedProps))&&Dt&&Ke(t),yu(t),a===13){if(!se)throw Error(r(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Dt=C1(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Dt=_1(t)}else Dt=Qt&&a===27?s1(t.type,Dt):ae?Zh(t.stateNode):null;return!0}function Ha(){se&&(Dt=ae=null,gt=!1)}function as(){var t=Sa;return t!==null&&(fe===null?fe=t:fe.push.apply(fe,t),Sa=null),t}function jn(t){Sa===null?Sa=[t]:Sa.push(t)}function ua(t,a,i){We?(_(Cl,a._currentValue),a._currentValue=i):(_(Cl,a._currentValue2),a._currentValue2=i)}function Qe(t){var a=Cl.current;We?t._currentValue=a:t._currentValue2=a,E(Cl)}function ns(t,a,i){for(;t!==null;){var s=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,s!==null&&(s.childLanes|=a)):s!==null&&(s.childLanes&a)!==a&&(s.childLanes|=a),t===i)break;t=t.return}}function is(t,a,i,s){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var d=c.dependencies;if(d!==null){var v=c.child;d=d.firstContext;t:for(;d!==null;){var b=d;d=c;for(var G=0;G<a.length;G++)if(b.context===a[G]){d.lanes|=i,b=d.alternate,b!==null&&(b.lanes|=i),ns(d.return,i,t),s||(v=null);break t}d=b.next}}else if(c.tag===18){if(v=c.return,v===null)throw Error(r(341));v.lanes|=i,d=v.alternate,d!==null&&(d.lanes|=i),ns(v,i,t),v=null}else v=c.child;if(v!==null)v.return=c;else for(v=c;v!==null;){if(v===t){v=null;break}if(c=v.sibling,c!==null){c.return=v.return,v=c;break}v=v.return}c=v}}function un(t,a,i,s){t=null;for(var c=a,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var v=c.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var b=c.type;ye(c.pendingProps.value,v.value)||(t!==null?t.push(b):t=[b])}}else if(c===_l.current){if(v=c.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(Ka):t=[Ka])}c=c.return}t!==null&&is(a,t,i,s),a.flags|=262144}function Li(t){for(t=t.firstContext;t!==null;){var a=t.context;if(!ye(We?a._currentValue:a._currentValue2,t.memoizedValue))return!0;t=t.next}return!1}function Ba(t){Qa=t,Ie=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function $t(t){return Su(Qa,t)}function Yi(t,a){return Qa===null&&Ba(t),Su(t,a)}function Su(t,a){var i=We?a._currentValue:a._currentValue2;if(a={context:a,memoizedValue:i,next:null},Ie===null){if(t===null)throw Error(r(308));Ie=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Ie=Ie.next=a;return i}function ls(){return{controller:new F1,data:new Map,refCount:0}}function Vn(t){t.refCount--,t.refCount===0&&W1(k1,function(){t.controller.abort()})}function Xi(){}function Le(t){t!==En&&t.next===null&&(En===null?El=En=t:En=En.next=t),bl=!0,br||(br=!0,U0())}function on(t,a){if(!xr&&bl){xr=!0;do for(var i=!1,s=El;s!==null;){if(t!==0){var c=s.pendingLanes;if(c===0)var d=0;else{var v=s.suspendedLanes,b=s.pingedLanes;d=(1<<31-pe(42|t)+1)-1,d&=c&~(v&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(i=!0,xu(s,d))}else d=ft,d=A(s,s===Tt?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==Va),(d&3)===0||N(s,d)||(i=!0,xu(s,d));s=s.next}while(i);xr=!1}}function _u(){Cu()}function Cu(){bl=br=!1;var t=0;wa!==0&&Tf()&&(t=wa);for(var a=he(),i=null,s=El;s!==null;){var c=s.next,d=Eu(s,a);d===0?(s.next=null,i===null?El=c:i.next=c,c===null&&(En=i)):(i=s,(t!==0||(d&3)!==0)&&(bl=!0)),s=c}wt!==0&&wt!==5||on(t),wa!==0&&(wa=0)}function Eu(t,a){for(var i=t.suspendedLanes,s=t.pingedLanes,c=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-pe(d),b=1<<v,G=c[v];G===-1?((b&i)===0||(b&s)!==0)&&(c[v]=H(b,a)):G<=a&&(t.expiredLanes|=b),d&=~b}if(a=Tt,i=ft,i=A(t,t===a?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==Va),s=t.callbackNode,i===0||t===a&&(Et===2||Et===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&yr(s),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||N(t,i)){if(a=i&-i,a===t.callbackPriority)return a;switch(s!==null&&yr(s),k(i)){case 2:case 8:i=Q1;break;case 32:i=Sr;break;case 268435456:i=w1;break;default:i=Sr}return s=bu.bind(null,t),i=yl(i,s),t.callbackPriority=a,t.callbackNode=i,a}return s!==null&&s!==null&&yr(s),t.callbackPriority=2,t.callbackNode=null,2}function bu(t,a){if(wt!==0&&wt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(ei()&&t.callbackNode!==i)return null;var s=ft;return s=A(t,t===Tt?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==Va),s===0?null:(rh(t,s,a),Eu(t,he()),t.callbackNode!=null&&t.callbackNode===i?bu.bind(null,t):null)}function xu(t,a){if(ei())return null;rh(t,a,!0)}function U0(){Df?Gf(function(){(ht&6)!==0?yl(ic,_u):Cu()}):yl(ic,_u)}function ss(){if(wa===0){var t=bn;t===0&&(t=ml,ml<<=1,(ml&261888)===0&&(ml=256)),wa=t}return wa}function L0(t,a){if(ui===null){var i=ui=[];Tr=0,bn=ss(),xn={status:"pending",value:void 0,then:function(s){i.push(s)}}}return Tr++,a.then(Tu,Tu),a}function Tu(){if(--Tr===0&&ui!==null){xn!==null&&(xn.status="fulfilled");var t=ui;ui=null,bn=0,xn=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function Y0(t,a){var i=[],s={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return t.then(function(){s.status="fulfilled",s.value=a;for(var c=0;c<i.length;c++)(0,i[c])(a)},function(c){for(s.status="rejected",s.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),s}function rs(){var t=Za.current;return t!==null?t:Tt.pooledCache}function qi(t,a){a===null?_(Za,Za.current):_(Za,a.pool)}function Au(){var t=rs();return t===null?null:{parent:We?Gt._currentValue:Gt._currentValue2,pool:t}}function ji(t,a){if(ye(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var i=Object.keys(t),s=Object.keys(a);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var c=i[s];if(!P1.call(a,c)||!ye(t[c],a[c]))return!1}return!0}function Mu(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ru(t,a,i){switch(i=t[i],i===void 0?t.push(a):i!==a&&(a.then(Xi,Xi),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,zu(t),t;default:if(typeof a.status=="string")a.then(Xi,Xi);else{if(t=Tt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=a,t.status="pending",t.then(function(s){if(a.status==="pending"){var c=a;c.status="fulfilled",c.value=s}},function(s){if(a.status==="pending"){var c=a;c.status="rejected",c.reason=s}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,zu(t),t}throw Ja=a,Tn}}function Ua(t){try{var a=t._init;return a(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Ja=i,Tn):i}}function Nu(){if(Ja===null)throw Error(r(459));var t=Ja;return Ja=null,t}function zu(t){if(t===Tn||t===xl)throw Error(r(483))}function Vi(t){var a=oi;return oi+=1,An===null&&(An=[]),Ru(An,t,a)}function Kn(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Ki(t,a){throw a.$$typeof===hf?Error(r(525)):(t=Object.prototype.toString.call(a),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Ou(t){function a(z,T){if(t){var D=z.deletions;D===null?(z.deletions=[T],z.flags|=16):D.push(T)}}function i(z,T){if(!t)return null;for(;T!==null;)a(z,T),T=T.sibling;return null}function s(z){for(var T=new Map;z!==null;)z.key!==null?T.set(z.key,z):T.set(z.index,z),z=z.sibling;return T}function c(z,T){return z=Fe(z,T),z.index=0,z.sibling=null,z}function d(z,T,D){return z.index=D,t?(D=z.alternate,D!==null?(D=D.index,D<T?(z.flags|=67108866,T):D):(z.flags|=67108866,T)):(z.flags|=1048576,T)}function v(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function b(z,T,D,q){return T===null||T.tag!==6?(T=ar(D,z.mode,q),T.return=z,T):(T=c(T,D),T.return=z,T)}function G(z,T,D,q){var et=D.type;return et===mn?w(z,T,D.props.children,q,D.key):T!==null&&(T.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===pa&&Ua(et)===T.type)?(T=c(T,D.props),Kn(T,D),T.return=z,T):(T=cl(D.type,D.key,D.props,null,z.mode,q),Kn(T,D),T.return=z,T)}function B(z,T,D,q){return T===null||T.tag!==4||T.stateNode.containerInfo!==D.containerInfo||T.stateNode.implementation!==D.implementation?(T=nr(D,z.mode,q),T.return=z,T):(T=c(T,D.children||[]),T.return=z,T)}function w(z,T,D,q,et){return T===null||T.tag!==7?(T=ja(D,z.mode,q,et),T.return=z,T):(T=c(T,D),T.return=z,T)}function X(z,T,D){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=ar(""+T,z.mode,D),T.return=z,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case fl:return D=cl(T.type,T.key,T.props,null,z.mode,D),Kn(D,T),D.return=z,D;case gn:return T=nr(T,z.mode,D),T.return=z,T;case pa:return T=Ua(T),X(z,T,D)}if(dl(T)||p(T))return T=ja(T,z.mode,D,null),T.return=z,T;if(typeof T.then=="function")return X(z,Vi(T),D);if(T.$$typeof===ma)return X(z,Yi(z,T),D);Ki(z,T)}return null}function J(z,T,D,q){var et=T!==null?T.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return et!==null?null:b(z,T,""+D,q);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case fl:return D.key===et?G(z,T,D,q):null;case gn:return D.key===et?B(z,T,D,q):null;case pa:return D=Ua(D),J(z,T,D,q)}if(dl(D)||p(D))return et!==null?null:w(z,T,D,q,null);if(typeof D.then=="function")return J(z,T,Vi(D),q);if(D.$$typeof===ma)return J(z,T,Yi(z,D),q);Ki(z,D)}return null}function nt(z,T,D,q,et){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return z=z.get(D)||null,b(T,z,""+q,et);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case fl:return z=z.get(q.key===null?D:q.key)||null,G(T,z,q,et);case gn:return z=z.get(q.key===null?D:q.key)||null,B(T,z,q,et);case pa:return q=Ua(q),nt(z,T,D,q,et)}if(dl(q)||p(q))return z=z.get(D)||null,w(T,z,q,et,null);if(typeof q.then=="function")return nt(z,T,D,Vi(q),et);if(q.$$typeof===ma)return nt(z,T,D,Yi(T,q),et);Ki(T,q)}return null}function ne(z,T,D,q){for(var et=null,Ht=null,at=T,vt=T=0,kt=null;at!==null&&vt<D.length;vt++){at.index>vt?(kt=at,at=null):kt=at.sibling;var yt=J(z,at,D[vt],q);if(yt===null){at===null&&(at=kt);break}t&&at&&yt.alternate===null&&a(z,at),T=d(yt,T,vt),Ht===null?et=yt:Ht.sibling=yt,Ht=yt,at=kt}if(vt===D.length)return i(z,at),gt&&Ct(z,vt),et;if(at===null){for(;vt<D.length;vt++)at=X(z,D[vt],q),at!==null&&(T=d(at,T,vt),Ht===null?et=at:Ht.sibling=at,Ht=at);return gt&&Ct(z,vt),et}for(at=s(at);vt<D.length;vt++)kt=nt(at,z,vt,D[vt],q),kt!==null&&(t&&kt.alternate!==null&&at.delete(kt.key===null?vt:kt.key),T=d(kt,T,vt),Ht===null?et=kt:Ht.sibling=kt,Ht=kt);return t&&at.forEach(function(Ta){return a(z,Ta)}),gt&&Ct(z,vt),et}function pi(z,T,D,q){if(D==null)throw Error(r(151));for(var et=null,Ht=null,at=T,vt=T=0,kt=null,yt=D.next();at!==null&&!yt.done;vt++,yt=D.next()){at.index>vt?(kt=at,at=null):kt=at.sibling;var Ta=J(z,at,yt.value,q);if(Ta===null){at===null&&(at=kt);break}t&&at&&Ta.alternate===null&&a(z,at),T=d(Ta,T,vt),Ht===null?et=Ta:Ht.sibling=Ta,Ht=Ta,at=kt}if(yt.done)return i(z,at),gt&&Ct(z,vt),et;if(at===null){for(;!yt.done;vt++,yt=D.next())yt=X(z,yt.value,q),yt!==null&&(T=d(yt,T,vt),Ht===null?et=yt:Ht.sibling=yt,Ht=yt);return gt&&Ct(z,vt),et}for(at=s(at);!yt.done;vt++,yt=D.next())yt=nt(at,z,vt,yt.value,q),yt!==null&&(t&&yt.alternate!==null&&at.delete(yt.key===null?vt:yt.key),T=d(yt,T,vt),Ht===null?et=yt:Ht.sibling=yt,Ht=yt);return t&&at.forEach(function(ed){return a(z,ed)}),gt&&Ct(z,vt),et}function ka(z,T,D,q){if(typeof D=="object"&&D!==null&&D.type===mn&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case fl:t:{for(var et=D.key;T!==null;){if(T.key===et){if(et=D.type,et===mn){if(T.tag===7){i(z,T.sibling),q=c(T,D.props.children),q.return=z,z=q;break t}}else if(T.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===pa&&Ua(et)===T.type){i(z,T.sibling),q=c(T,D.props),Kn(q,D),q.return=z,z=q;break t}i(z,T);break}else a(z,T);T=T.sibling}D.type===mn?(q=ja(D.props.children,z.mode,q,D.key),q.return=z,z=q):(q=cl(D.type,D.key,D.props,null,z.mode,q),Kn(q,D),q.return=z,z=q)}return v(z);case gn:t:{for(et=D.key;T!==null;){if(T.key===et)if(T.tag===4&&T.stateNode.containerInfo===D.containerInfo&&T.stateNode.implementation===D.implementation){i(z,T.sibling),q=c(T,D.children||[]),q.return=z,z=q;break t}else{i(z,T);break}else a(z,T);T=T.sibling}q=nr(D,z.mode,q),q.return=z,z=q}return v(z);case pa:return D=Ua(D),ka(z,T,D,q)}if(dl(D))return ne(z,T,D,q);if(p(D)){if(et=p(D),typeof et!="function")throw Error(r(150));return D=et.call(D),pi(z,T,D,q)}if(typeof D.then=="function")return ka(z,T,Vi(D),q);if(D.$$typeof===ma)return ka(z,T,Yi(z,D),q);Ki(z,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,T!==null&&T.tag===6?(i(z,T.sibling),q=c(T,D),q.return=z,z=q):(i(z,T),q=ar(D,z.mode,q),q.return=z,z=q),v(z)):i(z,T)}return function(z,T,D,q){try{oi=0;var et=ka(z,T,D,q);return An=null,et}catch(at){if(at===Tn||at===xl)throw at;var Ht=n(29,at,null,z.mode);return Ht.lanes=q,Ht.return=z,Ht}finally{}}}function Qi(){for(var t=Mn,a=Mr=Mn=0;a<t;){var i=Re[a];Re[a++]=null;var s=Re[a];Re[a++]=null;var c=Re[a];Re[a++]=null;var d=Re[a];if(Re[a++]=null,s!==null&&c!==null){var v=s.pending;v===null?c.next=c:(c.next=v.next,v.next=c),s.pending=c}d!==0&&Du(i,c,d)}}function wi(t,a,i,s){Re[Mn++]=t,Re[Mn++]=a,Re[Mn++]=i,Re[Mn++]=s,Mr|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function us(t,a,i,s){return wi(t,a,i,s),Zi(t)}function La(t,a){return wi(t,null,null,a),Zi(t)}function Du(t,a,i){t.lanes|=i;var s=t.alternate;s!==null&&(s.lanes|=i);for(var c=!1,d=t.return;d!==null;)d.childLanes|=i,s=d.alternate,s!==null&&(s.childLanes|=i),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(c=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,c&&a!==null&&(c=31-pe(i),t=d.hiddenUpdates,s=t[c],s===null?t[c]=[a]:s.push(a),a.lane=i|536870912),d):null}function Zi(t){if(50<mi)throw mi=0,Xr=null,Error(r(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}function os(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hs(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function oa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ha(t,a,i){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,(ht&2)!==0){var c=s.pending;return c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a,a=Zi(t),Du(t,null,i),a}return wi(t,s,a,i),Zi(t)}function Qn(t,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var s=a.lanes;s&=t.pendingLanes,i|=s,a.lanes=i,F(t,i)}}function cs(t,a){var i=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};d===null?c=d=v:d=d.next=v,i=i.next}while(i!==null);d===null?c=d=a:d=d.next=a}else c=d=a;i={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:s.shared,callbacks:s.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=a:t.next=a,i.lastBaseUpdate=a}function wn(){if(Rr){var t=xn;if(t!==null)throw t}}function Zn(t,a,i,s){Rr=!1;var c=t.updateQueue;_a=!1;var d=c.firstBaseUpdate,v=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var G=b,B=G.next;G.next=null,v===null?d=B:v.next=B,v=G;var w=t.alternate;w!==null&&(w=w.updateQueue,b=w.lastBaseUpdate,b!==v&&(b===null?w.firstBaseUpdate=B:b.next=B,w.lastBaseUpdate=G))}if(d!==null){var X=c.baseState;v=0,w=B=G=null,b=d;do{var J=b.lane&-536870913,nt=J!==b.lane;if(nt?(ft&J)===J:(s&J)===J){J!==0&&J===bn&&(Rr=!0),w!==null&&(w=w.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var ne=t,pi=b;J=a;var ka=i;switch(pi.tag){case 1:if(ne=pi.payload,typeof ne=="function"){X=ne.call(ka,X,J);break t}X=ne;break t;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=pi.payload,J=typeof ne=="function"?ne.call(ka,X,J):ne,J==null)break t;X=lr({},X,J);break t;case 2:_a=!0}}J=b.callback,J!==null&&(t.flags|=64,nt&&(t.flags|=8192),nt=c.callbacks,nt===null?c.callbacks=[J]:nt.push(J))}else nt={lane:J,tag:b.tag,payload:b.payload,callback:b.callback,next:null},w===null?(B=w=nt,G=X):w=w.next=nt,v|=J;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;nt=b,b=nt.next,nt.next=null,c.lastBaseUpdate=nt,c.shared.pending=null}}while(!0);w===null&&(G=X),c.baseState=G,c.firstBaseUpdate=B,c.lastBaseUpdate=w,d===null&&(c.shared.lanes=0),Ea|=v,t.lanes=v,t.memoizedState=X}}function Gu(t,a){if(typeof t!="function")throw Error(r(191,t));t.call(a)}function Hu(t,a){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)Gu(i[t],a)}function Bu(t,a){t=ea,_(Al,t),_(Rn,a),ea=t|a.baseLanes}function fs(){_(Al,ea),_(Rn,Rn.current)}function ds(){ea=Al.current,E(Rn),E(Al)}function ca(t){var a=t.alternate;_(Xt,Xt.current&1),_(Se,t),Ne===null&&(a===null||Rn.current!==null||a.memoizedState!==null)&&(Ne=t)}function gs(t){_(Xt,Xt.current),_(Se,t),Ne===null&&(Ne=t)}function Uu(t){t.tag===22?(_(Xt,Xt.current),_(Se,t),Ne===null&&(Ne=t)):fa()}function fa(){_(Xt,Xt.current),_(Se,Se.current)}function de(t){E(Se),Ne===t&&(Ne=null),E(Xt)}function Ji(t){for(var a=t;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||gr(i)||mr(i)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Ut(){throw Error(r(321))}function ms(t,a){if(a===null)return!1;for(var i=0;i<a.length&&i<t.length;i++)if(!ye(t[i],a[i]))return!1;return!0}function ps(t,a,i,s,c,d){return $e=d,it=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,tt.H=t===null||t.memoizedState===null?hc:Nr,Fa=!1,d=i(s,c),Fa=!1,Nn&&(d=Yu(a,i,s,c)),Lu(t),d}function Lu(t){tt.H=ci;var a=xt!==null&&xt.next!==null;if($e=0,qt=xt=it=null,Ml=!1,hi=0,zn=null,a)throw Error(r(300));t===null||jt||(t=t.dependencies,t!==null&&Li(t)&&(jt=!0))}function Yu(t,a,i,s){it=t;var c=0;do{if(Nn&&(zn=null),hi=0,Nn=!1,25<=c)throw Error(r(301));if(c+=1,qt=xt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}tt.H=cc,d=a(i,s)}while(Nn);return d}function X0(){var t=tt.H,a=t.useState()[0];return a=typeof a.then=="function"?Jn(a):a,t=t.useState()[0],(xt!==null?xt.memoizedState:null)!==t&&(it.flags|=1024),a}function vs(){var t=Rl!==0;return Rl=0,t}function ys(t,a,i){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~i}function Ss(t){if(Ml){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Ml=!1}$e=0,qt=xt=it=null,Nn=!1,hi=Rl=0,zn=null}function re(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?it.memoizedState=qt=t:qt=qt.next=t,qt}function Yt(){if(xt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var a=qt===null?it.memoizedState:qt.next;if(a!==null)qt=a,xt=t;else{if(t===null)throw it.alternate===null?Error(r(467)):Error(r(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},qt===null?it.memoizedState=qt=t:qt=qt.next=t}return qt}function Pi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jn(t){var a=hi;return hi+=1,zn===null&&(zn=[]),t=Ru(zn,t,a),a=it,(qt===null?a.memoizedState:qt.next)===null&&(a=a.alternate,tt.H=a===null||a.memoizedState===null?hc:Nr),t}function Fi(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Jn(t);if(t.$$typeof===ma)return $t(t)}throw Error(r(438,String(t)))}function _s(t){var a=null,i=it.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var s=it.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(a={data:s.data.map(function(c){return c.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=Pi(),it.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(t),s=0;s<t;s++)i[s]=cf;return a.index++,i}function we(t,a){return typeof a=="function"?a(t):a}function Wi(t){var a=Yt();return Cs(a,xt,t)}function Cs(t,a,i){var s=t.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=i;var c=t.baseQueue,d=s.pending;if(d!==null){if(c!==null){var v=c.next;c.next=d.next,d.next=v}a.baseQueue=c=d,s.pending=null}if(d=t.baseState,c===null)t.memoizedState=d;else{a=c.next;var b=v=null,G=null,B=a,w=!1;do{var X=B.lane&-536870913;if(X!==B.lane?(ft&X)===X:($e&X)===X){var J=B.revertLane;if(J===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),X===bn&&(w=!0);else if(($e&J)===J){B=B.next,J===bn&&(w=!0);continue}else X={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},G===null?(b=G=X,v=d):G=G.next=X,it.lanes|=J,Ea|=J;X=B.action,Fa&&i(d,X),d=B.hasEagerState?B.eagerState:i(d,X)}else J={lane:X,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},G===null?(b=G=J,v=d):G=G.next=J,it.lanes|=X,Ea|=X;B=B.next}while(B!==null&&B!==a);if(G===null?v=d:G.next=b,!ye(d,t.memoizedState)&&(jt=!0,w&&(i=xn,i!==null)))throw i;t.memoizedState=d,t.baseState=v,t.baseQueue=G,s.lastRenderedState=d}return c===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function Es(t){var a=Yt(),i=a.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=t;var s=i.dispatch,c=i.pending,d=a.memoizedState;if(c!==null){i.pending=null;var v=c=c.next;do d=t(d,v.action),v=v.next;while(v!==c);ye(d,a.memoizedState)||(jt=!0),a.memoizedState=d,a.baseQueue===null&&(a.baseState=d),i.lastRenderedState=d}return[d,s]}function Xu(t,a,i){var s=it,c=Yt(),d=gt;if(d){if(i===void 0)throw Error(r(407));i=i()}else i=a();var v=!ye((xt||c).memoizedState,i);if(v&&(c.memoizedState=i,jt=!0),c=c.queue,Ts(Vu.bind(null,s,c,t),[t]),c.getSnapshot!==a||v||qt!==null&&qt.memoizedState.tag&1){if(s.flags|=2048,hn(9,{destroy:void 0},ju.bind(null,s,c,i,a),null),Tt===null)throw Error(r(349));d||($e&127)!==0||qu(s,a,i)}return i}function qu(t,a,i){t.flags|=16384,t={getSnapshot:a,value:i},a=it.updateQueue,a===null?(a=Pi(),it.updateQueue=a,a.stores=[t]):(i=a.stores,i===null?a.stores=[t]:i.push(t))}function ju(t,a,i,s){a.value=i,a.getSnapshot=s,Ku(a)&&Qu(t)}function Vu(t,a,i){return i(function(){Ku(a)&&Qu(t)})}function Ku(t){var a=t.getSnapshot;t=t.value;try{var i=a();return!ye(t,i)}catch{return!0}}function Qu(t){var a=La(t,2);a!==null&&oe(a,t,2)}function bs(t){var a=re();if(typeof t=="function"){var i=t;if(t=i(),Fa){lt(!0);try{i()}finally{lt(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:we,lastRenderedState:t},a}function wu(t,a,i,s){return t.baseState=i,Cs(t,xt,typeof s=="function"?s:we)}function q0(t,a,i,s,c){if($i(t))throw Error(r(485));if(t=a.action,t!==null){var d={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};tt.T!==null?i(!0):d.isTransition=!1,s(d),i=a.pending,i===null?(d.next=a.pending=d,Zu(a,d)):(d.next=i.next,a.pending=i.next=d)}}function Zu(t,a){var i=a.action,s=a.payload,c=t.state;if(a.isTransition){var d=tt.T,v={};tt.T=v;try{var b=i(c,s),G=tt.S;G!==null&&G(v,b),Ju(t,a,b)}catch(B){xs(t,a,B)}finally{d!==null&&v.types!==null&&(d.types=v.types),tt.T=d}}else try{d=i(c,s),Ju(t,a,d)}catch(B){xs(t,a,B)}}function Ju(t,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){Pu(t,a,s)},function(s){return xs(t,a,s)}):Pu(t,a,i)}function Pu(t,a,i){a.status="fulfilled",a.value=i,Fu(a),t.state=i,a=t.pending,a!==null&&(i=a.next,i===a?t.pending=null:(i=i.next,a.next=i,Zu(t,i)))}function xs(t,a,i){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do a.status="rejected",a.reason=i,Fu(a),a=a.next;while(a!==s)}t.action=null}function Fu(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Wu(t,a){return a}function ku(t,a){if(gt){var i=Tt.formState;if(i!==null){t:{var s=it;if(gt){if(Dt){var c=i1(Dt,Me);if(c){Dt=Zh(c),s=l1(c);break t}}Ke(s)}s=!1}s&&(a=i[0])}}i=re(),i.memoizedState=i.baseState=a,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wu,lastRenderedState:a},i.queue=s,i=po.bind(null,it,s),s.dispatch=i,s=bs(!1);var d=Ns.bind(null,it,!1,s.queue);return s=re(),c={state:a,dispatch:null,action:t,pending:null},s.queue=c,i=q0.bind(null,it,c,d,i),c.dispatch=i,s.memoizedState=t,[a,i,!1]}function Iu(t){var a=Yt();return $u(a,xt,t)}function $u(t,a,i){if(a=Cs(t,a,Wu)[0],t=Wi(we)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var s=Jn(a)}catch(v){throw v===Tn?xl:v}else s=a;a=Yt();var c=a.queue,d=c.dispatch;return i!==a.memoizedState&&(it.flags|=2048,hn(9,{destroy:void 0},j0.bind(null,c,i),null)),[s,d,t]}function j0(t,a){t.action=a}function to(t){var a=Yt(),i=xt;if(i!==null)return $u(a,i,t);Yt(),a=a.memoizedState,i=Yt();var s=i.queue.dispatch;return i.memoizedState=t,[a,s,!1]}function hn(t,a,i,s){return t={tag:t,create:i,deps:s,inst:a,next:null},a=it.updateQueue,a===null&&(a=Pi(),it.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=t.next=t:(s=i.next,i.next=t,t.next=s,a.lastEffect=t),t}function eo(){return Yt().memoizedState}function ki(t,a,i,s){var c=re();it.flags|=t,c.memoizedState=hn(1|a,{destroy:void 0},i,s===void 0?null:s)}function Ii(t,a,i,s){var c=Yt();s=s===void 0?null:s;var d=c.memoizedState.inst;xt!==null&&s!==null&&ms(s,xt.memoizedState.deps)?c.memoizedState=hn(a,d,i,s):(it.flags|=t,c.memoizedState=hn(1|a,d,i,s))}function ao(t,a){ki(8390656,8,t,a)}function Ts(t,a){Ii(2048,8,t,a)}function V0(t){it.flags|=4;var a=it.updateQueue;if(a===null)a=Pi(),it.updateQueue=a,a.events=[t];else{var i=a.events;i===null?a.events=[t]:i.push(t)}}function no(t){var a=Yt().memoizedState;return V0({ref:a,nextImpl:t}),function(){if((ht&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function io(t,a){return Ii(4,2,t,a)}function lo(t,a){return Ii(4,4,t,a)}function so(t,a){if(typeof a=="function"){t=t();var i=a(t);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function ro(t,a,i){i=i!=null?i.concat([t]):null,Ii(4,4,so.bind(null,a,t),i)}function As(){}function uo(t,a){var i=Yt();a=a===void 0?null:a;var s=i.memoizedState;return a!==null&&ms(a,s[1])?s[0]:(i.memoizedState=[t,a],t)}function oo(t,a){var i=Yt();a=a===void 0?null:a;var s=i.memoizedState;if(a!==null&&ms(a,s[1]))return s[0];if(s=t(),Fa){lt(!0);try{t()}finally{lt(!1)}}return i.memoizedState=[s,a],s}function Ms(t,a,i){return i===void 0||($e&1073741824)!==0&&(ft&261930)===0?t.memoizedState=a:(t.memoizedState=i,t=sh(),it.lanes|=t,Ea|=t,i)}function ho(t,a,i,s){return ye(i,a)?i:Rn.current!==null?(t=Ms(t,i,s),ye(t,a)||(jt=!0),t):($e&42)===0||($e&1073741824)!==0&&(ft&261930)===0?(jt=!0,t.memoizedState=i):(t=sh(),it.lanes|=t,Ea|=t,a)}function co(t,a,i,s,c){var d=ke();Ft(d!==0&&8>d?d:8);var v=tt.T,b={};tt.T=b,Ns(t,!1,a,i);try{var G=c(),B=tt.S;if(B!==null&&B(b,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var w=Y0(G,s);Pn(t,a,w,ge(t))}else Pn(t,a,s,ge(t))}catch(X){Pn(t,a,{then:function(){},status:"rejected",reason:X},ge())}finally{Ft(d),v!==null&&b.types!==null&&(v.types=b.types),tt.T=v}}function fo(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:pn,baseState:pn,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:we,lastRenderedState:pn},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:we,lastRenderedState:i},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Rs(){return $t(Ka)}function go(){return Yt().memoizedState}function mo(){return Yt().memoizedState}function K0(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var i=ge();t=oa(i);var s=ha(a,t,i);s!==null&&(oe(s,a,i),Qn(s,a,i)),a={cache:ls()},t.payload=a;return}a=a.return}}function Q0(t,a,i){var s=ge();i={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},$i(t)?vo(a,i):(i=us(t,a,i,s),i!==null&&(oe(i,t,s),yo(i,a,s)))}function po(t,a,i){var s=ge();Pn(t,a,i,s)}function Pn(t,a,i,s){var c={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if($i(t))vo(a,c);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=a.lastRenderedReducer,d!==null))try{var v=a.lastRenderedState,b=d(v,i);if(c.hasEagerState=!0,c.eagerState=b,ye(b,v))return wi(t,a,c,0),Tt===null&&Qi(),!1}catch{}finally{}if(i=us(t,a,c,s),i!==null)return oe(i,t,s),yo(i,a,s),!0}return!1}function Ns(t,a,i,s){if(s={lane:2,revertLane:ss(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},$i(t)){if(a)throw Error(r(479))}else a=us(t,i,s,2),a!==null&&oe(a,t,2)}function $i(t){var a=t.alternate;return t===it||a!==null&&a===it}function vo(t,a){Nn=Ml=!0;var i=t.pending;i===null?a.next=a:(a.next=i.next,i.next=a),t.pending=a}function yo(t,a,i){if((i&4194048)!==0){var s=a.lanes;s&=t.pendingLanes,i|=s,a.lanes=i,F(t,i)}}function zs(t,a,i,s){a=t.memoizedState,i=i(s,a),i=i==null?a:lr({},a,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}function So(t,a,i,s,c,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,d,v):a.prototype&&a.prototype.isPureReactComponent?!ji(i,s)||!ji(c,d):!0}function _o(t,a,i,s){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,s),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,s),a.state!==t&&zr.enqueueReplaceState(a,a.state,null)}function Ya(t,a){var i=a;if("ref"in a){i={};for(var s in a)s!=="ref"&&(i[s]=a[s])}if(t=t.defaultProps){i===a&&(i=lr({},i));for(var c in t)i[c]===void 0&&(i[c]=t[c])}return i}function tl(t,a){try{var i=t.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(s){setTimeout(function(){throw s})}}function Co(t,a,i){try{var s=t.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Os(t,a,i){return i=oa(i),i.tag=3,i.payload={element:null},i.callback=function(){tl(t,a)},i}function Eo(t){return t=oa(t),t.tag=3,t}function bo(t,a,i,s){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;t.payload=function(){return c(d)},t.callback=function(){Co(a,i,s)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Co(a,i,s),typeof c!="function"&&(ba===null?ba=new Set([this]):ba.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})})}function w0(t,a,i,s,c){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(a=i.alternate,a!==null&&un(a,i,c,!0),i=Se.current,i!==null){switch(i.tag){case 31:case 13:return Ne===null?ol():i.alternate===null&&Lt===0&&(Lt=3),i.flags&=-257,i.flags|=65536,i.lanes=c,s===Tl?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([s]):a.add(s),tr(t,s,c)),!1;case 22:return i.flags|=65536,s===Tl?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([s]):i.add(s)),tr(t,s,c)),!1}throw Error(r(435,i.tag))}return tr(t,s,c),ol(),!1}if(gt)return a=Se.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=c,s!==Er&&(t=Error(r(422),{cause:s}),jn(st(t,i)))):(s!==Er&&(a=Error(r(423),{cause:s}),jn(st(a,i))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,s=st(s,i),c=Os(t.stateNode,s,c),cs(t,c),Lt!==4&&(Lt=2)),!1;var d=Error(r(520),{cause:s});if(d=st(d,i),di===null?di=[d]:di.push(d),Lt!==4&&(Lt=2),a===null)return!0;s=st(s,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,t=c&-c,i.lanes|=t,t=Os(i.stateNode,s,t),cs(i,t),!1;case 1:if(a=i.type,d=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ba===null||!ba.has(d))))return i.flags|=65536,c&=-c,i.lanes|=c,c=Eo(c),bo(c,t,i,s),cs(i,c),!1}i=i.return}while(i!==null);return!1}function te(t,a,i,s){a.child=t===null?oc(a,null,i,s):Pa(a,t.child,i,s)}function xo(t,a,i,s,c){i=i.render;var d=a.ref;if("ref"in s){var v={};for(var b in s)b!=="ref"&&(v[b]=s[b])}else v=s;return Ba(a),s=ps(t,a,i,v,d,c),b=vs(),t!==null&&!jt?(ys(t,a,c),Ze(t,a,c)):(gt&&b&&zt(a),a.flags|=1,te(t,a,s,c),a.child)}function To(t,a,i,s,c){if(t===null){var d=i.type;return typeof d=="function"&&!er(d)&&d.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=d,Ao(t,a,d,s,c)):(t=cl(i.type,null,s,a,a.mode,c),t.ref=a.ref,t.return=a,a.child=t)}if(d=t.child,!Ys(t,c)){var v=d.memoizedProps;if(i=i.compare,i=i!==null?i:ji,i(v,s)&&t.ref===a.ref)return Ze(t,a,c)}return a.flags|=1,t=Fe(d,s),t.ref=a.ref,t.return=a,a.child=t}function Ao(t,a,i,s,c){if(t!==null){var d=t.memoizedProps;if(ji(d,s)&&t.ref===a.ref)if(jt=!1,a.pendingProps=s=d,Ys(t,c))(t.flags&131072)!==0&&(jt=!0);else return a.lanes=t.lanes,Ze(t,a,c)}return Ds(t,a,i,s,c)}function Mo(t,a,i,s){var c=s.children,d=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((a.flags&128)!==0){if(d=d!==null?d.baseLanes|i:i,t!==null){for(s=a.child=t.child,c=0;s!==null;)c=c|s.lanes|s.childLanes,s=s.sibling;s=c&~d}else s=0,a.child=null;return Ro(t,a,d,i,s)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&qi(a,d!==null?d.cachePool:null),d!==null?Bu(a,d):fs(),Uu(a);else return s=a.lanes=536870912,Ro(t,a,d!==null?d.baseLanes|i:i,i,s)}else d!==null?(qi(a,d.cachePool),Bu(a,d),fa(),a.memoizedState=null):(t!==null&&qi(a,null),fs(),fa());return te(t,a,c,i),a.child}function Fn(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Ro(t,a,i,s,c){var d=rs();return d=d===null?null:{parent:We?Gt._currentValue:Gt._currentValue2,pool:d},a.memoizedState={baseLanes:i,cachePool:d},t!==null&&qi(a,null),fs(),Uu(a),t!==null&&un(t,a,s,!0),a.childLanes=c,null}function el(t,a){return a=nl({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function No(t,a,i){return Pa(a,t.child,null,i),t=el(a,a.pendingProps),t.flags|=2,de(a),a.memoizedState=null,t}function Z0(t,a,i){var s=a.pendingProps,c=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(gt){if(s.mode==="hidden")return t=el(a,s),a.lanes=536870912,Fn(null,t);if(gs(a),(t=Dt)?(t=g1(t,Me),t!==null&&(a.memoizedState={dehydrated:t,treeContext:va!==null?{id:qe,overflow:je}:null,retryLane:536870912,hydrationErrors:null},i=Ah(t),i.return=a,a.child=i,ae=a,Dt=null)):t=null,t===null)throw Ke(a);return a.lanes=536870912,null}return el(a,s)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(gs(a),c)if(a.flags&256)a.flags&=-257,a=No(t,a,i);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(r(558));else if(jt||un(t,a,i,!1),c=(i&t.childLanes)!==0,jt||c){if(s=Tt,s!==null&&(v=$(s,i),v!==0&&v!==d.retryLane))throw d.retryLane=v,La(t,v),oe(s,t,v),Or;ol(),a=No(t,a,i)}else t=d.treeContext,se&&(Dt=o1(v),ae=a,gt=!0,Sa=null,Me=!1,t!==null&&pu(a,t)),a=el(a,s),a.flags|=4096;return a}return t=Fe(t.child,{mode:s.mode,children:s.children}),t.ref=a.ref,a.child=t,t.return=a,t}function al(t,a){var i=a.ref;if(i===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(t===null||t.ref!==i)&&(a.flags|=4194816)}}function Ds(t,a,i,s,c){return Ba(a),i=ps(t,a,i,s,void 0,c),s=vs(),t!==null&&!jt?(ys(t,a,c),Ze(t,a,c)):(gt&&s&&zt(a),a.flags|=1,te(t,a,i,c),a.child)}function zo(t,a,i,s,c,d){return Ba(a),a.updateQueue=null,i=Yu(a,s,i,c),Lu(t),s=vs(),t!==null&&!jt?(ys(t,a,d),Ze(t,a,d)):(gt&&s&&zt(a),a.flags|=1,te(t,a,i,d),a.child)}function Oo(t,a,i,s,c){if(Ba(a),a.stateNode===null){var d=Sn,v=i.contextType;typeof v=="object"&&v!==null&&(d=$t(v)),d=new i(s,d),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=zr,a.stateNode=d,d._reactInternals=a,d=a.stateNode,d.props=s,d.state=a.memoizedState,d.refs={},os(a),v=i.contextType,d.context=typeof v=="object"&&v!==null?$t(v):Sn,d.state=a.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(zs(a,i,v,s),d.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&zr.enqueueReplaceState(d,d.state,null),Zn(a,s,d,c),wn(),d.state=a.memoizedState),typeof d.componentDidMount=="function"&&(a.flags|=4194308),s=!0}else if(t===null){d=a.stateNode;var b=a.memoizedProps,G=Ya(i,b);d.props=G;var B=d.context,w=i.contextType;v=Sn,typeof w=="object"&&w!==null&&(v=$t(w));var X=i.getDerivedStateFromProps;w=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=a.pendingProps!==b,w||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||B!==v)&&_o(a,d,s,v),_a=!1;var J=a.memoizedState;d.state=J,Zn(a,s,d,c),wn(),B=a.memoizedState,b||J!==B||_a?(typeof X=="function"&&(zs(a,i,X,s),B=a.memoizedState),(G=_a||So(a,i,G,s,J,B,v))?(w||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(a.flags|=4194308)):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=s,a.memoizedState=B),d.props=s,d.state=B,d.context=v,s=G):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),s=!1)}else{d=a.stateNode,hs(t,a),v=a.memoizedProps,w=Ya(i,v),d.props=w,X=a.pendingProps,J=d.context,B=i.contextType,G=Sn,typeof B=="object"&&B!==null&&(G=$t(B)),b=i.getDerivedStateFromProps,(B=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==X||J!==G)&&_o(a,d,s,G),_a=!1,J=a.memoizedState,d.state=J,Zn(a,s,d,c),wn();var nt=a.memoizedState;v!==X||J!==nt||_a||t!==null&&t.dependencies!==null&&Li(t.dependencies)?(typeof b=="function"&&(zs(a,i,b,s),nt=a.memoizedState),(w=_a||So(a,i,w,s,J,nt,G)||t!==null&&t.dependencies!==null&&Li(t.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,nt,G),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,nt,G)),typeof d.componentDidUpdate=="function"&&(a.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=1024),a.memoizedProps=s,a.memoizedState=nt),d.props=s,d.state=nt,d.context=G,s=w):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=1024),s=!1)}return d=s,al(t,a),s=(a.flags&128)!==0,d||s?(d=a.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:d.render(),a.flags|=1,t!==null&&s?(a.child=Pa(a,t.child,null,c),a.child=Pa(a,null,i,c)):te(t,a,i,c),a.memoizedState=d.state,t=a.child):t=Ze(t,a,c),t}function Do(t,a,i,s){return Ha(),a.flags|=256,te(t,a,i,s),a.child}function Gs(t){return{baseLanes:t,cachePool:Au()}}function Hs(t,a,i){return t=t!==null?t.childLanes&~i:0,a&&(t|=Ce),t}function Go(t,a,i){var s=a.pendingProps,c=!1,d=(a.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Xt.current&2)!==0),v&&(c=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,t===null){if(gt){if(c?ca(a):fa(),(t=Dt)?(t=m1(t,Me),t!==null&&(a.memoizedState={dehydrated:t,treeContext:va!==null?{id:qe,overflow:je}:null,retryLane:536870912,hydrationErrors:null},i=Ah(t),i.return=a,a.child=i,ae=a,Dt=null)):t=null,t===null)throw Ke(a);return mr(t)?a.lanes=32:a.lanes=536870912,null}var b=s.children;return s=s.fallback,c?(fa(),c=a.mode,b=nl({mode:"hidden",children:b},c),s=ja(s,c,i,null),b.return=a,s.return=a,b.sibling=s,a.child=b,s=a.child,s.memoizedState=Gs(i),s.childLanes=Hs(t,v,i),a.memoizedState=Dr,Fn(null,s)):(ca(a),Bs(a,b))}var G=t.memoizedState;if(G!==null&&(b=G.dehydrated,b!==null)){if(d)a.flags&256?(ca(a),a.flags&=-257,a=Us(t,a,i)):a.memoizedState!==null?(fa(),a.child=t.child,a.flags|=128,a=null):(fa(),b=s.fallback,c=a.mode,s=nl({mode:"visible",children:s.children},c),b=ja(b,c,i,null),b.flags|=2,s.return=a,b.return=a,s.sibling=b,a.child=s,Pa(a,t.child,null,i),s=a.child,s.memoizedState=Gs(i),s.childLanes=Hs(t,v,i),a.memoizedState=Dr,a=Fn(null,s));else if(ca(a),mr(b))v=a1(b).digest,s=Error(r(419)),s.stack="",s.digest=v,jn({value:s,source:null,stack:null}),a=Us(t,a,i);else if(jt||un(t,a,i,!1),v=(i&t.childLanes)!==0,jt||v){if(v=Tt,v!==null&&(s=$(v,i),s!==0&&s!==G.retryLane))throw G.retryLane=s,La(t,s),oe(v,t,s),Or;gr(b)||ol(),a=Us(t,a,i)}else gr(b)?(a.flags|=192,a.child=t.child,a=null):(t=G.treeContext,se&&(Dt=h1(b),ae=a,gt=!0,Sa=null,Me=!1,t!==null&&pu(a,t)),a=Bs(a,s.children),a.flags|=4096);return a}return c?(fa(),b=s.fallback,c=a.mode,G=t.child,d=G.sibling,s=Fe(G,{mode:"hidden",children:s.children}),s.subtreeFlags=G.subtreeFlags&65011712,d!==null?b=Fe(d,b):(b=ja(b,c,i,null),b.flags|=2),b.return=a,s.return=a,s.sibling=b,a.child=s,Fn(null,s),s=a.child,b=t.child.memoizedState,b===null?b=Gs(i):(c=b.cachePool,c!==null?(G=We?Gt._currentValue:Gt._currentValue2,c=c.parent!==G?{parent:G,pool:G}:c):c=Au(),b={baseLanes:b.baseLanes|i,cachePool:c}),s.memoizedState=b,s.childLanes=Hs(t,v,i),a.memoizedState=Dr,Fn(t.child,s)):(ca(a),i=t.child,t=i.sibling,i=Fe(i,{mode:"visible",children:s.children}),i.return=a,i.sibling=null,t!==null&&(v=a.deletions,v===null?(a.deletions=[t],a.flags|=16):v.push(t)),a.child=i,a.memoizedState=null,i)}function Bs(t,a){return a=nl({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function nl(t,a){return t=n(22,t,null,a),t.lanes=0,t}function Us(t,a,i){return Pa(a,t.child,null,i),t=Bs(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Ho(t,a,i){t.lanes|=a;var s=t.alternate;s!==null&&(s.lanes|=a),ns(t.return,a,i)}function Ls(t,a,i,s,c,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:c,treeForkCount:d}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=s,v.tail=i,v.tailMode=c,v.treeForkCount=d)}function Bo(t,a,i){var s=a.pendingProps,c=s.revealOrder,d=s.tail;s=s.children;var v=Xt.current,b=(v&2)!==0;if(b?(v=v&1|2,a.flags|=128):v&=1,_(Xt,v),te(t,a,s,i),s=gt?si:0,!b&&t!==null&&(t.flags&128)!==0)t:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ho(t,i,a);else if(t.tag===19)Ho(t,i,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break t;for(;t.sibling===null;){if(t.return===null||t.return===a)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(c){case"forwards":for(i=a.child,c=null;i!==null;)t=i.alternate,t!==null&&Ji(t)===null&&(c=i),i=i.sibling;i=c,i===null?(c=a.child,a.child=null):(c=i.sibling,i.sibling=null),Ls(a,!1,c,i,d,s);break;case"backwards":case"unstable_legacy-backwards":for(i=null,c=a.child,a.child=null;c!==null;){if(t=c.alternate,t!==null&&Ji(t)===null){a.child=c;break}t=c.sibling,c.sibling=i,i=c,c=t}Ls(a,!0,i,null,d,s);break;case"together":Ls(a,!1,null,null,void 0,s);break;default:a.memoizedState=null}return a.child}function Ze(t,a,i){if(t!==null&&(a.dependencies=t.dependencies),Ea|=a.lanes,(i&a.childLanes)===0)if(t!==null){if(un(t,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(r(153));if(a.child!==null){for(t=a.child,i=Fe(t,t.pendingProps),a.child=i,i.return=a;t.sibling!==null;)t=t.sibling,i=i.sibling=Fe(t,t.pendingProps),i.return=a;i.sibling=null}return a.child}function Ys(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Li(t)))}function J0(t,a,i){switch(a.tag){case 3:Bi(a,a.stateNode.containerInfo),ua(a,Gt,t.memoizedState.cache),Ha();break;case 27:case 5:es(a);break;case 4:Bi(a,a.stateNode.containerInfo);break;case 10:ua(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,gs(a),null;break;case 13:var s=a.memoizedState;if(s!==null)return s.dehydrated!==null?(ca(a),a.flags|=128,null):(i&a.child.childLanes)!==0?Go(t,a,i):(ca(a),t=Ze(t,a,i),t!==null?t.sibling:null);ca(a);break;case 19:var c=(t.flags&128)!==0;if(s=(i&a.childLanes)!==0,s||(un(t,a,i,!1),s=(i&a.childLanes)!==0),c){if(s)return Bo(t,a,i);a.flags|=128}if(c=a.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),_(Xt,Xt.current),s)break;return null;case 22:return a.lanes=0,Mo(t,a,i,a.pendingProps);case 24:ua(a,Gt,t.memoizedState.cache)}return Ze(t,a,i)}function Uo(t,a,i){if(t!==null)if(t.memoizedProps!==a.pendingProps)jt=!0;else{if(!Ys(t,i)&&(a.flags&128)===0)return jt=!1,J0(t,a,i);jt=(t.flags&131072)!==0}else jt=!1,gt&&(a.flags&1048576)!==0&&mt(a,si,a.index);switch(a.lanes=0,a.tag){case 16:t:{var s=a.pendingProps;if(t=Ua(a.elementType),a.type=t,typeof t=="function")er(t)?(s=Ya(t,s),a.tag=1,a=Oo(null,a,t,s,i)):(a.tag=0,a=Ds(null,a,t,s,i));else{if(t!=null){var c=t.$$typeof;if(c===rr){a.tag=11,a=xo(null,a,t,s,i);break t}else if(c===hr){a.tag=14,a=To(null,a,t,s,i);break t}}throw a=S(t)||t,Error(r(306,a,""))}}return a;case 0:return Ds(t,a,a.type,a.pendingProps,i);case 1:return s=a.type,c=Ya(s,a.pendingProps),Oo(t,a,s,c,i);case 3:t:{if(Bi(a,a.stateNode.containerInfo),t===null)throw Error(r(387));var d=a.pendingProps;c=a.memoizedState,s=c.element,hs(t,a),Zn(a,d,null,i);var v=a.memoizedState;if(d=v.cache,ua(a,Gt,d),d!==c.cache&&is(a,[Gt],i,!0),wn(),d=v.element,se&&c.isDehydrated)if(c={element:d,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=c,a.memoizedState=c,a.flags&256){a=Do(t,a,d,i);break t}else if(d!==s){s=st(Error(r(424)),a),jn(s),a=Do(t,a,d,i);break t}else for(se&&(Dt=u1(a.stateNode.containerInfo),ae=a,gt=!0,Sa=null,Me=!0),i=oc(a,null,d,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ha(),d===s){a=Ze(t,a,i);break t}te(t,a,d,i)}a=a.child}return a;case 26:if(He)return al(t,a),t===null?(i=Fh(a.type,null,a.pendingProps,null))?a.memoizedState=i:gt||(a.stateNode=B1(a.type,a.pendingProps,ya.current,a)):a.memoizedState=Fh(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:if(Qt)return es(a),t===null&&Qt&&gt&&(s=a.stateNode=ec(a.type,a.pendingProps,ya.current,ee.current,!1),ae=a,Me=!0,Dt=c1(a.type,s,Dt)),te(t,a,a.pendingProps.children,i),al(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&gt&&(D1(a.type,a.pendingProps,ee.current),(c=s=Dt)&&(s=f1(s,a.type,a.pendingProps,Me),s!==null?(a.stateNode=s,ae=a,Dt=r1(s),Me=!1,c=!0):c=!1),c||Ke(a)),es(a),c=a.type,d=a.pendingProps,v=t!==null?t.memoizedProps:null,s=d.children,gl(c,d)?s=null:v!==null&&gl(c,v)&&(a.flags|=32),a.memoizedState!==null&&(c=ps(t,a,X0,null,null,i),We?Ka._currentValue=c:Ka._currentValue2=c),al(t,a),te(t,a,s,i),a.child;case 6:return t===null&&gt&&(G1(a.pendingProps,ee.current),(t=i=Dt)&&(i=d1(i,a.pendingProps,Me),i!==null?(a.stateNode=i,ae=a,Dt=null,t=!0):t=!1),t||Ke(a)),null;case 13:return Go(t,a,i);case 4:return Bi(a,a.stateNode.containerInfo),s=a.pendingProps,t===null?a.child=Pa(a,null,s,i):te(t,a,s,i),a.child;case 11:return xo(t,a,a.type,a.pendingProps,i);case 7:return te(t,a,a.pendingProps,i),a.child;case 8:return te(t,a,a.pendingProps.children,i),a.child;case 12:return te(t,a,a.pendingProps.children,i),a.child;case 10:return s=a.pendingProps,ua(a,a.type,s.value),te(t,a,s.children,i),a.child;case 9:return c=a.type._context,s=a.pendingProps.children,Ba(a),c=$t(c),s=s(c),a.flags|=1,te(t,a,s,i),a.child;case 14:return To(t,a,a.type,a.pendingProps,i);case 15:return Ao(t,a,a.type,a.pendingProps,i);case 19:return Bo(t,a,i);case 31:return Z0(t,a,i);case 22:return Mo(t,a,i,a.pendingProps);case 24:return Ba(a),s=$t(Gt),t===null?(c=rs(),c===null&&(c=Tt,d=ls(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=i),c=d),a.memoizedState={parent:s,cache:c},os(a),ua(a,Gt,c)):((t.lanes&i)!==0&&(hs(t,a),Zn(a,null,null,i),wn()),c=t.memoizedState,d=a.memoizedState,c.parent!==s?(c={parent:s,cache:s},a.memoizedState=c,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=c),ua(a,Gt,s)):(s=d.cache,ua(a,Gt,s),s!==c.cache&&is(a,[Gt],i,!0))),te(t,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Oe(t){t.flags|=4}function il(t){Xe&&(t.flags|=8)}function Lo(t,a){if(t!==null&&t.child===a.child)return!1;if((a.flags&16)!==0)return!0;for(t=a.child;t!==null;){if((t.flags&8218)!==0||(t.subtreeFlags&8218)!==0)return!0;t=t.sibling}return!1}function Xs(t,a,i,s){if(le)for(i=a.child;i!==null;){if(i.tag===5||i.tag===6)fr(t,i.stateNode);else if(!(i.tag===4||Qt&&i.tag===27)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else if(Xe)for(var c=a.child;c!==null;){if(c.tag===5){var d=c.stateNode;i&&s&&(d=Qh(d,c.type,c.memoizedProps)),fr(t,d)}else if(c.tag===6)d=c.stateNode,i&&s&&(d=wh(d,c.memoizedProps)),fr(t,d);else if(c.tag!==4){if(c.tag===22&&c.memoizedState!==null)d=c.child,d!==null&&(d.return=c),Xs(t,c,!0,!0);else if(c.child!==null){c.child.return=c,c=c.child;continue}}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}}function Yo(t,a,i,s){var c=!1;if(Xe)for(var d=a.child;d!==null;){if(d.tag===5){var v=d.stateNode;i&&s&&(v=Qh(v,d.type,d.memoizedProps)),Vh(t,v)}else if(d.tag===6)v=d.stateNode,i&&s&&(v=wh(v,d.memoizedProps)),Vh(t,v);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)c=d.child,c!==null&&(c.return=d),Yo(t,d,!0,!0),c=!0;else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return c;d=d.return}d.sibling.return=d.return,d=d.sibling}return c}function Xo(t,a){if(Xe&&Lo(t,a)){t=a.stateNode;var i=t.containerInfo,s=jh();Yo(s,a,!1,!1),t.pendingChildren=s,Oe(a),e1(i,s)}}function qs(t,a,i,s){if(le)t.memoizedProps!==s&&Oe(a);else if(Xe){var c=t.stateNode,d=t.memoizedProps;if((t=Lo(t,a))||d!==s){var v=ee.current;d=t1(c,i,d,s,!t,null),d===c?a.stateNode=c:(il(a),Uh(d,i,s,v)&&Oe(a),a.stateNode=d,t&&Xs(d,a,!1,!1))}else a.stateNode=c}}function js(t,a,i,s,c){if((t.mode&32)!==0&&(i===null?Mf(a,s):Rf(a,i,s))){if(t.flags|=16777216,(c&335544128)===c||dr(a,s))if(Yh(t.stateNode,a,s))t.flags|=8192;else if(ch())t.flags|=8192;else throw Ja=Tl,Ar}else t.flags&=-16777217}function qo(t,a){if(L1(a)){if(t.flags|=16777216,!tc(a))if(ch())t.flags|=8192;else throw Ja=Tl,Ar}else t.flags&=-16777217}function ll(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?O():536870912,t.lanes|=a,Gn|=a)}function Wn(t,a){if(!gt)switch(t.tailMode){case"hidden":a=t.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Ot(t){var a=t.alternate!==null&&t.alternate.child===t.child,i=0,s=0;if(a)for(var c=t.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=s,t.childLanes=i,a}function P0(t,a,i){var s=a.pendingProps;switch(It(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(a),null;case 1:return Ot(a),null;case 3:return i=a.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),Qe(Gt),sn(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(rn(a)?Oe(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,as())),Xo(t,a),Ot(a),null;case 26:if(He){var c=a.type,d=a.memoizedState;return t===null?(Oe(a),d!==null?(Ot(a),qo(a,d)):(Ot(a),js(a,c,null,s,i))):d?d!==t.memoizedState?(Oe(a),Ot(a),qo(a,d)):(Ot(a),a.flags&=-16777217):(d=t.memoizedProps,le?d!==s&&Oe(a):qs(t,a,c,s),Ot(a),js(a,c,d,s,i)),null}case 27:if(Qt){if(Ui(a),i=ya.current,c=a.type,t!==null&&a.stateNode!=null)le?t.memoizedProps!==s&&Oe(a):qs(t,a,c,s);else{if(!s){if(a.stateNode===null)throw Error(r(166));return Ot(a),null}t=ee.current,rn(a)?vu(a,t):(t=ec(c,s,i,t,!0),a.stateNode=t,Oe(a))}return Ot(a),null}case 5:if(Ui(a),c=a.type,t!==null&&a.stateNode!=null)qs(t,a,c,s);else{if(!s){if(a.stateNode===null)throw Error(r(166));return Ot(a),null}if(d=ee.current,rn(a))vu(a,d),A1(a.stateNode,c,s,d)&&(a.flags|=64);else{var v=Sf(c,s,ya.current,d,a);il(a),Xs(v,a,!1,!1),a.stateNode=v,Uh(v,c,s,d)&&Oe(a)}}return Ot(a),js(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,i),null;case 6:if(t&&a.stateNode!=null)i=t.memoizedProps,le?i!==s&&Oe(a):Xe&&(i!==s?(t=ya.current,i=ee.current,il(a),a.stateNode=Lh(s,t,i,a)):a.stateNode=t.stateNode);else{if(typeof s!="string"&&a.stateNode===null)throw Error(r(166));if(t=ya.current,i=ee.current,rn(a)){if(!se)throw Error(r(176));if(t=a.stateNode,i=a.memoizedProps,s=null,c=ae,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}v1(t,i,a,s)||Ke(a,!0)}else il(a),a.stateNode=Lh(s,t,i,a)}return Ot(a),null;case 31:if(i=a.memoizedState,t===null||t.memoizedState!==null){if(s=rn(a),i!==null){if(t===null){if(!s)throw Error(r(318));if(!se)throw Error(r(556));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));y1(t,a)}else Ha(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ot(a),t=!1}else i=as(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return a.flags&256?(de(a),a):(de(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Ot(a),null;case 13:if(s=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=rn(a),s!==null&&s.dehydrated!==null){if(t===null){if(!c)throw Error(r(318));if(!se)throw Error(r(344));if(c=a.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));S1(c,a)}else Ha(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ot(a),c=!1}else c=as(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return a.flags&256?(de(a),a):(de(a),null)}return de(a),(a.flags&128)!==0?(a.lanes=i,a):(i=s!==null,t=t!==null&&t.memoizedState!==null,i&&(s=a.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048)),i!==t&&i&&(a.child.flags|=8192),ll(a,a.updateQueue),Ot(a),null);case 4:return sn(),Xo(t,a),t===null&&bf(a.stateNode.containerInfo),Ot(a),null;case 10:return Qe(a.type),Ot(a),null;case 19:if(E(Xt),s=a.memoizedState,s===null)return Ot(a),null;if(c=(a.flags&128)!==0,d=s.rendering,d===null)if(c)Wn(s,!1);else{if(Lt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(d=Ji(t),d!==null){for(a.flags|=128,Wn(s,!1),t=d.updateQueue,a.updateQueue=t,ll(a,t),a.subtreeFlags=0,t=i,i=a.child;i!==null;)Th(i,t),i=i.sibling;return _(Xt,Xt.current&1|2),gt&&Ct(a,s.treeForkCount),a.child}t=t.sibling}s.tail!==null&&he()>gi&&(a.flags|=128,c=!0,Wn(s,!1),a.lanes=4194304)}else{if(!c)if(t=Ji(d),t!==null){if(a.flags|=128,c=!0,t=t.updateQueue,a.updateQueue=t,ll(a,t),Wn(s,!0),s.tail===null&&s.tailMode==="hidden"&&!d.alternate&&!gt)return Ot(a),null}else 2*he()-s.renderingStartTime>gi&&i!==536870912&&(a.flags|=128,c=!0,Wn(s,!1),a.lanes=4194304);s.isBackwards?(d.sibling=a.child,a.child=d):(t=s.last,t!==null?t.sibling=d:a.child=d,s.last=d)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=he(),t.sibling=null,i=Xt.current,_(Xt,c?i&1|2:i&1),gt&&Ct(a,s.treeForkCount),t):(Ot(a),null);case 22:case 23:return de(a),ds(),s=a.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(a.flags|=8192):s&&(a.flags|=8192),s?(i&536870912)!==0&&(a.flags&128)===0&&(Ot(a),a.subtreeFlags&6&&(a.flags|=8192)):Ot(a),i=a.updateQueue,i!==null&&ll(a,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==i&&(a.flags|=2048),t!==null&&E(Za),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),Qe(Gt),Ot(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function F0(t,a){switch(It(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Qe(Gt),sn(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Ui(a),null;case 31:if(a.memoizedState!==null){if(de(a),a.alternate===null)throw Error(r(340));Ha()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(de(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Ha()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return E(Xt),null;case 4:return sn(),null;case 10:return Qe(a.type),null;case 22:case 23:return de(a),ds(),t!==null&&E(Za),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Qe(Gt),null;case 25:return null;default:return null}}function jo(t,a){switch(It(a),a.tag){case 3:Qe(Gt),sn();break;case 26:case 27:case 5:Ui(a);break;case 4:sn();break;case 31:a.memoizedState!==null&&de(a);break;case 13:de(a);break;case 19:E(Xt);break;case 10:Qe(a.type);break;case 22:case 23:de(a),ds(),t!==null&&E(Za);break;case 24:Qe(Gt)}}function kn(t,a){try{var i=a.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var c=s.next;i=c;do{if((i.tag&t)===t){s=void 0;var d=i.create,v=i.inst;s=d(),v.destroy=s}i=i.next}while(i!==c)}}catch(b){pt(a,a.return,b)}}function da(t,a,i){try{var s=a.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var d=c.next;s=d;do{if((s.tag&t)===t){var v=s.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,c=a;var G=i,B=b;try{B()}catch(w){pt(c,G,w)}}}s=s.next}while(s!==d)}}catch(w){pt(a,a.return,w)}}function Vo(t){var a=t.updateQueue;if(a!==null){var i=t.stateNode;try{Hu(a,i)}catch(s){pt(t,t.return,s)}}}function Ko(t,a,i){i.props=Ya(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(s){pt(t,a,s)}}function In(t,a){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var s=ai(t.stateNode);break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof i=="function"?t.refCleanup=i(s):i.current=s}}catch(c){pt(t,a,c)}}function Ye(t,a){var i=t.ref,s=t.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(c){pt(t,a,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){pt(t,a,c)}else i.current=null}function Qo(t){var a=t.type,i=t.memoizedProps,s=t.stateNode;try{Kf(s,a,i,t)}catch(c){pt(t,t.return,c)}}function Vs(t,a,i){try{Qf(t.stateNode,t.type,i,a,t)}catch(s){pt(t,t.return,s)}}function wo(t){return t.tag===5||t.tag===3||(He?t.tag===26:!1)||(Qt?t.tag===27&&vn(t.type):!1)||t.tag===4}function Ks(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||wo(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(Qt&&t.tag===27&&vn(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qs(t,a,i){var s=t.tag;if(s===5||s===6)t=t.stateNode,a?Zf(i,t,a):jf(i,t);else if(s!==4&&(Qt&&s===27&&vn(t.type)&&(i=t.stateNode,a=null),t=t.child,t!==null))for(Qs(t,a,i),t=t.sibling;t!==null;)Qs(t,a,i),t=t.sibling}function sl(t,a,i){var s=t.tag;if(s===5||s===6)t=t.stateNode,a?wf(i,t,a):qf(i,t);else if(s!==4&&(Qt&&s===27&&vn(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(sl(t,a,i),t=t.sibling;t!==null;)sl(t,a,i),t=t.sibling}function Zo(t,a,i){t=t.containerInfo;try{Kh(t,i)}catch(s){pt(a,a.return,s)}}function Jo(t){var a=t.stateNode,i=t.memoizedProps;try{X1(t.type,i,a,t)}catch(s){pt(t,t.return,s)}}function W0(t,a){for(vf(t.containerInfo),Wt=a;Wt!==null;)if(t=Wt,a=t.child,(t.subtreeFlags&1028)!==0&&a!==null)a.return=t,Wt=a;else for(;Wt!==null;){t=Wt;var i=t.alternate;switch(a=t.flags,t.tag){case 0:if((a&4)!==0&&(a=t.updateQueue,a=a!==null?a.events:null,a!==null))for(var s=0;s<a.length;s++){var c=a[s];c.ref.impl=c.nextImpl}break;case 11:case 15:break;case 1:if((a&1024)!==0&&i!==null){a=void 0,s=t,c=i.memoizedProps,i=i.memoizedState;var d=s.stateNode;try{var v=Ya(s.type,c);a=d.getSnapshotBeforeUpdate(v,i),d.__reactInternalSnapshotBeforeUpdate=a}catch(b){pt(s,s.return,b)}}break;case 3:(a&1024)!==0&&le&&$f(t.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=t.sibling,a!==null){a.return=t.return,Wt=a;break}Wt=t.return}}function Po(t,a,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:Je(t,i),s&4&&kn(5,i);break;case 1:if(Je(t,i),s&4)if(t=i.stateNode,a===null)try{t.componentDidMount()}catch(v){pt(i,i.return,v)}else{var c=Ya(i.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(c,a,t.__reactInternalSnapshotBeforeUpdate)}catch(v){pt(i,i.return,v)}}s&64&&Vo(i),s&512&&In(i,i.return);break;case 3:if(Je(t,i),s&64&&(s=i.updateQueue,s!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=ai(i.child.stateNode);break;case 1:t=i.child.stateNode}try{Hu(s,t)}catch(v){pt(i,i.return,v)}}break;case 27:Qt&&a===null&&s&4&&Jo(i);case 26:case 5:if(Je(t,i),a===null){if(s&4)Qo(i);else if(s&64){t=i.type,a=i.memoizedProps,c=i.stateNode;try{E1(c,t,a,i)}catch(v){pt(i,i.return,v)}}}s&512&&In(i,i.return);break;case 12:Je(t,i);break;case 31:Je(t,i),s&4&&Wo(t,i);break;case 13:Je(t,i),s&4&&ko(t,i),s&64&&(s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(i=nf.bind(null,i),n1(s,i))));break;case 22:if(s=i.memoizedState!==null||ta,!s){a=a!==null&&a.memoizedState!==null||Vt,c=ta;var d=Vt;ta=s,(Vt=a)&&!d?Pe(t,i,(i.subtreeFlags&8772)!==0):Je(t,i),ta=c,Vt=d}break;case 30:break;default:Je(t,i)}}function Fo(t){var a=t.alternate;a!==null&&(t.alternate=null,Fo(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Af(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function De(t,a,i){for(i=i.child;i!==null;)ws(t,a,i),i=i.sibling}function ws(t,a,i){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(li,i)}catch{}switch(i.tag){case 26:if(He){Vt||Ye(i,a),De(t,a,i),i.memoizedState?kh(i.memoizedState):i.stateNode&&$h(i.stateNode);break}case 27:if(Qt){Vt||Ye(i,a);var s=Kt,c=ce;vn(i.type)&&(Kt=i.stateNode,ce=!1),De(t,a,i),ac(i.stateNode),Kt=s,ce=c;break}case 5:Vt||Ye(i,a);case 6:if(le){if(s=Kt,c=ce,Kt=null,De(t,a,i),Kt=s,ce=c,Kt!==null)if(ce)try{Pf(Kt,i.stateNode)}catch(d){pt(i,a,d)}else try{Jf(Kt,i.stateNode)}catch(d){pt(i,a,d)}}else De(t,a,i);break;case 18:le&&Kt!==null&&(ce?N1(Kt,i.stateNode):R1(Kt,i.stateNode));break;case 4:le?(s=Kt,c=ce,Kt=i.stateNode.containerInfo,ce=!0,De(t,a,i),Kt=s,ce=c):(Xe&&Zo(i.stateNode,i,jh()),De(t,a,i));break;case 0:case 11:case 14:case 15:da(2,i,a),Vt||da(4,i,a),De(t,a,i);break;case 1:Vt||(Ye(i,a),s=i.stateNode,typeof s.componentWillUnmount=="function"&&Ko(i,a,s)),De(t,a,i);break;case 21:De(t,a,i);break;case 22:Vt=(s=Vt)||i.memoizedState!==null,De(t,a,i),Vt=s;break;default:De(t,a,i)}}function Wo(t,a){if(se&&a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{x1(t)}catch(i){pt(a,a.return,i)}}}function ko(t,a){if(se&&a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{T1(t)}catch(i){pt(a,a.return,i)}}function k0(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new fc),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new fc),a;default:throw Error(r(435,t.tag))}}function rl(t,a){var i=k0(t);a.forEach(function(s){if(!i.has(s)){i.add(s);var c=lf.bind(null,t,s);s.then(c,c)}})}function ie(t,a){var i=a.deletions;if(i!==null)for(var s=0;s<i.length;s++){var c=i[s],d=t,v=a;if(le){var b=v;t:for(;b!==null;){switch(b.tag){case 27:if(Qt){if(vn(b.type)){Kt=b.stateNode,ce=!1;break t}break}case 5:Kt=b.stateNode,ce=!1;break t;case 3:case 4:Kt=b.stateNode.containerInfo,ce=!0;break t}b=b.return}if(Kt===null)throw Error(r(160));ws(d,v,c),Kt=null,ce=!1}else ws(d,v,c);d=c.alternate,d!==null&&(d.return=null),c.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Io(a,t),a=a.sibling}function Io(t,a){var i=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ie(a,t),ue(t),s&4&&(da(3,t,t.return),kn(3,t),da(5,t,t.return));break;case 1:ie(a,t),ue(t),s&512&&(Vt||i===null||Ye(i,i.return)),s&64&&ta&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:if(He){var c=Be;if(ie(a,t),ue(t),s&512&&(Vt||i===null||Ye(i,i.return)),s&4){s=i!==null?i.memoizedState:null;var d=t.memoizedState;i===null?d===null?t.stateNode===null?t.stateNode=H1(c,t.type,t.memoizedProps,t):Ih(c,t.type,t.stateNode):t.stateNode=Wh(c,d,t.memoizedProps):s!==d?(s===null?i.stateNode!==null&&$h(i.stateNode):kh(s),d===null?Ih(c,t.type,t.stateNode):Wh(c,d,t.memoizedProps)):d===null&&t.stateNode!==null&&Vs(t,t.memoizedProps,i.memoizedProps)}break}case 27:if(Qt){ie(a,t),ue(t),s&512&&(Vt||i===null||Ye(i,i.return)),i!==null&&s&4&&Vs(t,t.memoizedProps,i.memoizedProps);break}case 5:if(ie(a,t),ue(t),s&512&&(Vt||i===null||Ye(i,i.return)),le){if(t.flags&32){c=t.stateNode;try{qh(c)}catch(X){pt(t,t.return,X)}}s&4&&t.stateNode!=null&&(c=t.memoizedProps,Vs(t,c,i!==null?i.memoizedProps:c)),s&1024&&(Gr=!0)}else Xe&&t.alternate!==null&&(t.alternate.stateNode=t.stateNode);break;case 6:if(ie(a,t),ue(t),s&4&&le){if(t.stateNode===null)throw Error(r(162));s=t.memoizedProps,i=i!==null?i.memoizedProps:s,c=t.stateNode;try{Vf(c,i,s)}catch(X){pt(t,t.return,X)}}break;case 3:if(He?(U1(),c=Be,Be=pr(a.containerInfo),ie(a,t),Be=c):ie(a,t),ue(t),s&4){if(le&&se&&i!==null&&i.memoizedState.isDehydrated)try{b1(a.containerInfo)}catch(X){pt(t,t.return,X)}if(Xe){s=a.containerInfo,i=a.pendingChildren;try{Kh(s,i)}catch(X){pt(t,t.return,X)}}}Gr&&(Gr=!1,$o(t));break;case 4:He?(i=Be,Be=pr(t.stateNode.containerInfo),ie(a,t),ue(t),Be=i):(ie(a,t),ue(t)),s&4&&Xe&&Zo(t.stateNode,t,t.stateNode.pendingChildren);break;case 12:ie(a,t),ue(t);break;case 31:ie(a,t),ue(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,rl(t,s)));break;case 13:ie(a,t),ue(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Hl=he()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,rl(t,s)));break;case 22:c=t.memoizedState!==null;var v=i!==null&&i.memoizedState!==null,b=ta,G=Vt;if(ta=b||c,Vt=G||v,ie(a,t),Vt=G,ta=b,ue(t),s&8192&&(a=t.stateNode,a._visibility=c?a._visibility&-2:a._visibility|1,c&&(i===null||v||ta||Vt||Xa(t)),le)){t:if(i=null,le)for(a=t;;){if(a.tag===5||He&&a.tag===26){if(i===null){v=i=a;try{d=v.stateNode,c?Ff(d):kf(v.stateNode,v.memoizedProps)}catch(X){pt(v,v.return,X)}}}else if(a.tag===6){if(i===null){v=a;try{var B=v.stateNode;c?Wf(B):If(B,v.memoizedProps)}catch(X){pt(v,v.return,X)}}}else if(a.tag===18){if(i===null){v=a;try{var w=v.stateNode;c?z1(w):O1(v.stateNode)}catch(X){pt(v,v.return,X)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break t;for(;a.sibling===null;){if(a.return===null||a.return===t)break t;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}}s&4&&(s=t.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,rl(t,i))));break;case 19:ie(a,t),ue(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,rl(t,s)));break;case 30:break;case 21:break;default:ie(a,t),ue(t)}}function ue(t){var a=t.flags;if(a&2){try{for(var i,s=t.return;s!==null;){if(wo(s)){i=s;break}s=s.return}if(le){if(i==null)throw Error(r(160));switch(i.tag){case 27:if(Qt){var c=i.stateNode,d=Ks(t);sl(t,d,c);break}case 5:var v=i.stateNode;i.flags&32&&(qh(v),i.flags&=-33);var b=Ks(t);sl(t,b,v);break;case 3:case 4:var G=i.stateNode.containerInfo,B=Ks(t);Qs(t,B,G);break;default:throw Error(r(161))}}}catch(w){pt(t,t.return,w)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function $o(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;$o(a),a.tag===5&&a.flags&1024&&Of(a.stateNode),t=t.sibling}}function Je(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Po(t,a.alternate,a),a=a.sibling}function Xa(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:da(4,a,a.return),Xa(a);break;case 1:Ye(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&Ko(a,a.return,i),Xa(a);break;case 27:Qt&&ac(a.stateNode);case 26:case 5:Ye(a,a.return),Xa(a);break;case 22:a.memoizedState===null&&Xa(a);break;case 30:Xa(a);break;default:Xa(a)}t=t.sibling}}function Pe(t,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var s=a.alternate,c=t,d=a,v=d.flags;switch(d.tag){case 0:case 11:case 15:Pe(c,d,i),kn(4,d);break;case 1:if(Pe(c,d,i),s=d,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(B){pt(s,s.return,B)}if(s=d,c=s.updateQueue,c!==null){var b=s.stateNode;try{var G=c.shared.hiddenCallbacks;if(G!==null)for(c.shared.hiddenCallbacks=null,c=0;c<G.length;c++)Gu(G[c],b)}catch(B){pt(s,s.return,B)}}i&&v&64&&Vo(d),In(d,d.return);break;case 27:Qt&&Jo(d);case 26:case 5:Pe(c,d,i),i&&s===null&&v&4&&Qo(d),In(d,d.return);break;case 12:Pe(c,d,i);break;case 31:Pe(c,d,i),i&&v&4&&Wo(c,d);break;case 13:Pe(c,d,i),i&&v&4&&ko(c,d);break;case 22:d.memoizedState===null&&Pe(c,d,i),In(d,d.return);break;case 30:break;default:Pe(c,d,i)}a=a.sibling}}function Zs(t,a){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&Vn(i))}function Js(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Vn(t))}function Ge(t,a,i,s){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)th(t,a,i,s),a=a.sibling}function th(t,a,i,s){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Ge(t,a,i,s),c&2048&&kn(9,a);break;case 1:Ge(t,a,i,s);break;case 3:Ge(t,a,i,s),c&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Vn(t)));break;case 12:if(c&2048){Ge(t,a,i,s),t=a.stateNode;try{var d=a.memoizedProps,v=d.id,b=d.onPostCommit;typeof b=="function"&&b(v,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(G){pt(a,a.return,G)}}else Ge(t,a,i,s);break;case 31:Ge(t,a,i,s);break;case 13:Ge(t,a,i,s);break;case 23:break;case 22:d=a.stateNode,v=a.alternate,a.memoizedState!==null?d._visibility&2?Ge(t,a,i,s):$n(t,a):d._visibility&2?Ge(t,a,i,s):(d._visibility|=2,cn(t,a,i,s,(a.subtreeFlags&10256)!==0||!1)),c&2048&&Zs(v,a);break;case 24:Ge(t,a,i,s),c&2048&&Js(a.alternate,a);break;default:Ge(t,a,i,s)}}function cn(t,a,i,s,c){for(c=c&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var d=t,v=a,b=i,G=s,B=v.flags;switch(v.tag){case 0:case 11:case 15:cn(d,v,b,G,c),kn(8,v);break;case 23:break;case 22:var w=v.stateNode;v.memoizedState!==null?w._visibility&2?cn(d,v,b,G,c):$n(d,v):(w._visibility|=2,cn(d,v,b,G,c)),c&&B&2048&&Zs(v.alternate,v);break;case 24:cn(d,v,b,G,c),c&&B&2048&&Js(v.alternate,v);break;default:cn(d,v,b,G,c)}a=a.sibling}}function $n(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=t,s=a,c=s.flags;switch(s.tag){case 22:$n(i,s),c&2048&&Zs(s.alternate,s);break;case 24:$n(i,s),c&2048&&Js(s.alternate,s);break;default:$n(i,s)}a=a.sibling}}function qa(t,a,i){if(t.subtreeFlags&On)for(t=t.child;t!==null;)eh(t,a,i),t=t.sibling}function eh(t,a,i){switch(t.tag){case 26:if(qa(t,a,i),t.flags&On)if(t.memoizedState!==null)Y1(i,Be,t.memoizedState,t.memoizedProps);else{var s=t.stateNode,c=t.type;t=t.memoizedProps,((a&335544128)===a||dr(c,t))&&Xh(i,s,c,t)}break;case 5:qa(t,a,i),t.flags&On&&(s=t.stateNode,c=t.type,t=t.memoizedProps,((a&335544128)===a||dr(c,t))&&Xh(i,s,c,t));break;case 3:case 4:He?(s=Be,Be=pr(t.stateNode.containerInfo),qa(t,a,i),Be=s):qa(t,a,i);break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=On,On=16777216,qa(t,a,i),On=s):qa(t,a,i));break;default:qa(t,a,i)}}function ah(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function ti(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var s=a[i];Wt=s,ih(s,t)}ah(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)nh(t),t=t.sibling}function nh(t){switch(t.tag){case 0:case 11:case 15:ti(t),t.flags&2048&&da(9,t,t.return);break;case 3:ti(t);break;case 12:ti(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,ul(t)):ti(t);break;default:ti(t)}}function ul(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var s=a[i];Wt=s,ih(s,t)}ah(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:da(8,a,a.return),ul(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,ul(a));break;default:ul(a)}t=t.sibling}}function ih(t,a){for(;Wt!==null;){var i=Wt;switch(i.tag){case 0:case 11:case 15:da(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Vn(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,Wt=s;else t:for(i=t;Wt!==null;){s=Wt;var c=s.sibling,d=s.return;if(Fo(s),s===i){Wt=null;break t}if(c!==null){c.return=d,Wt=c;break t}Wt=d}}}function Ps(t){var a=Ef(t);if(a!=null){if(typeof a.memoizedProps["data-testname"]!="string")throw Error(r(364));return a}if(t=Hf(t),t===null)throw Error(r(362));return t.stateNode.current}function Fs(t,a){var i=t.tag;switch(a.$$typeof){case Nl:if(t.type===a.value)return!0;break;case zl:t:{for(a=a.value,t=[t,0],i=0;i<t.length;){var s=t[i++],c=s.tag,d=t[i++],v=a[d];if(c!==5&&c!==26&&c!==27||!ii(s)){for(;v!=null&&Fs(s,v);)d++,v=a[d];if(d===a.length){a=!0;break t}else for(s=s.child;s!==null;)t.push(s,d),s=s.sibling}}a=!1}return a;case Ol:if((i===5||i===26||i===27)&&Lf(t.stateNode,a.value))return!0;break;case Gl:if((i===5||i===6||i===26||i===27)&&(t=Uf(t),t!==null&&0<=t.indexOf(a.value)))return!0;break;case Dl:if((i===5||i===26||i===27)&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===a.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Ws(t){switch(t.$$typeof){case Nl:return"<"+(S(t.value)||"Unknown")+">";case zl:return":has("+(Ws(t)||"")+")";case Ol:return'[role="'+t.value+'"]';case Gl:return'"'+t.value+'"';case Dl:return'[data-testname="'+t.value+'"]';default:throw Error(r(365))}}function lh(t,a){var i=[];t=[t,0];for(var s=0;s<t.length;){var c=t[s++],d=c.tag,v=t[s++],b=a[v];if(d!==5&&d!==26&&d!==27||!ii(c)){for(;b!=null&&Fs(c,b);)v++,b=a[v];if(v===a.length)i.push(c);else for(c=c.child;c!==null;)t.push(c,v),c=c.sibling}}return i}function ks(t,a){if(!ni)throw Error(r(363));t=Ps(t),t=lh(t,a),a=[],t=Array.from(t);for(var i=0;i<t.length;){var s=t[i++],c=s.tag;if(c===5||c===26||c===27)ii(s)||a.push(s.stateNode);else for(s=s.child;s!==null;)t.push(s),s=s.sibling}return a}function ge(){return(ht&2)!==0&&ft!==0?ft&-ft:tt.T!==null?ss():xf()}function sh(){if(Ce===0)if((ft&536870912)===0||gt){var t=pl;pl<<=1,(pl&3932160)===0&&(pl=262144),Ce=t}else Ce=536870912;return t=Se.current,t!==null&&(t.flags|=32),Ce}function oe(t,a,i){(t===Tt&&(Et===2||Et===9)||t.cancelPendingCommit!==null)&&(fn(t,0),ga(t,ft,Ce,!1)),L(t,i),((ht&2)===0||t!==Tt)&&(t===Tt&&((ht&2)===0&&(Wa|=i),Lt===4&&ga(t,ft,Ce,!1)),Le(t))}function rh(t,a,i){if((ht&6)!==0)throw Error(r(327));var s=!i&&(a&127)===0&&(a&t.expiredLanes)===0||N(t,a),c=s?tf(t,a):$s(t,a,!0),d=s;do{if(c===0){Dn&&!s&&ga(t,a,0,!1);break}else{if(i=t.current.alternate,d&&!I0(i)){c=$s(t,a,!1),d=!1;continue}if(c===2){if(d=a,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;t:{var b=t;c=di;var G=se&&b.current.memoizedState.isDehydrated;if(G&&(fn(b,v).flags|=256),v=$s(b,v,!1),v!==2){if(Hr&&!G){b.errorRecoveryDisabledLanes|=d,Wa|=d,c=4;break t}d=fe,fe=c,d!==null&&(fe===null?fe=d:fe.push.apply(fe,d))}c=v}if(d=!1,c!==2)continue}}if(c===1){fn(t,0),ga(t,a,0,!0);break}t:{switch(s=t,d=c,d){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:ga(s,a,Ce,!Ca);break t;case 2:fe=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(c=Hl+300-he(),10<c)){if(ga(s,a,Ce,!Ca),A(s,0,!0)!==0)break t;aa=a,s.timeoutHandle=_f(uh.bind(null,s,i,fe,Bl,Ur,a,Ce,Wa,Gn,Ca,d,"Throttled",-0,0),c);break t}uh(s,i,fe,Bl,Ur,a,Ce,Wa,Gn,Ca,d,null,-0,0)}}break}while(!0);Le(t)}function uh(t,a,i,s,c,d,v,b,G,B,w,X,J,nt){if(t.timeoutHandle=Va,X=a.subtreeFlags,X&8192||(X&16785408)===16785408){X=Nf(),eh(a,d,X);var ne=(d&62914560)===d?Hl-he():(d&4194048)===d?dc-he():0;if(ne=zf(X,ne),ne!==null){aa=d,t.cancelPendingCommit=ne(vh.bind(null,t,a,d,i,s,c,v,b,G,w,X,null,J,nt)),ga(t,d,v,!B);return}}vh(t,a,d,i,s,c,v,b,G)}function I0(t){for(var a=t;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var c=i[s],d=c.getSnapshot;c=c.value;try{if(!ye(d(),c))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ga(t,a,i,s){a&=~Br,a&=~Wa,t.suspendedLanes|=a,t.pingedLanes&=~a,s&&(t.warmLanes|=a),s=t.expirationTimes;for(var c=a;0<c;){var d=31-pe(c),v=1<<d;s[d]=-1,c&=~v}i!==0&&Q(t,i,a)}function oh(){return(ht&6)===0?(on(0),!1):!0}function Is(){if(ct!==null){if(Et===0)var t=ct.return;else t=ct,Ie=Qa=null,Ss(t),An=null,oi=0,t=ct;for(;t!==null;)jo(t.alternate,t),t=t.return;ct=null}}function fn(t,a){var i=t.timeoutHandle;i!==Va&&(t.timeoutHandle=Va,Cf(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),aa=0,Is(),Tt=t,ct=i=Fe(t.current,null),ft=a,Et=0,_e=null,Ca=!1,Dn=N(t,a),Hr=!1,Gn=Ce=Br=Wa=Ea=Lt=0,fe=di=null,Ur=!1,(a&8)!==0&&(a|=a&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=a;0<s;){var c=31-pe(s),d=1<<c;a|=t[c],s&=~d}return ea=a,Qi(),i}function hh(t,a){it=null,tt.H=ci,a===Tn||a===xl?(a=Nu(),Et=3):a===Ar?(a=Nu(),Et=4):Et=a===Or?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,_e=a,ct===null&&(Lt=1,tl(t,st(a,t.current)))}function ch(){var t=Se.current;return t===null?!0:(ft&4194048)===ft?Ne===null:(ft&62914560)===ft||(ft&536870912)!==0?t===Ne:!1}function fh(){var t=tt.H;return tt.H=ci,t===null?ci:t}function dh(){var t=tt.A;return tt.A=$1,t}function ol(){Lt=4,Ca||(ft&4194048)!==ft&&Se.current!==null||(Dn=!0),(Ea&134217727)===0&&(Wa&134217727)===0||Tt===null||ga(Tt,ft,Ce,!1)}function $s(t,a,i){var s=ht;ht|=2;var c=fh(),d=dh();(Tt!==t||ft!==a)&&(Bl=null,fn(t,a)),a=!1;var v=Lt;t:do try{if(Et!==0&&ct!==null){var b=ct,G=_e;switch(Et){case 8:Is(),v=6;break t;case 3:case 2:case 9:case 6:Se.current===null&&(a=!0);var B=Et;if(Et=0,_e=null,dn(t,b,G,B),i&&Dn){v=0;break t}break;default:B=Et,Et=0,_e=null,dn(t,b,G,B)}}$0(),v=Lt;break}catch(w){hh(t,w)}while(!0);return a&&t.shellSuspendCounter++,Ie=Qa=null,ht=s,tt.H=c,tt.A=d,ct===null&&(Tt=null,ft=0,Qi()),v}function $0(){for(;ct!==null;)gh(ct)}function tf(t,a){var i=ht;ht|=2;var s=fh(),c=dh();Tt!==t||ft!==a?(Bl=null,gi=he()+500,fn(t,a)):Dn=N(t,a);t:do try{if(Et!==0&&ct!==null){a=ct;var d=_e;e:switch(Et){case 1:Et=0,_e=null,dn(t,a,d,1);break;case 2:case 9:if(Mu(d)){Et=0,_e=null,mh(a);break}a=function(){Et!==2&&Et!==9||Tt!==t||(Et=7),Le(t)},d.then(a,a);break t;case 3:Et=7;break t;case 4:Et=5;break t;case 7:Mu(d)?(Et=0,_e=null,mh(a)):(Et=0,_e=null,dn(t,a,d,7));break;case 5:var v=null;switch(ct.tag){case 26:v=ct.memoizedState;case 5:case 27:var b=ct,G=b.type,B=b.pendingProps;if(v?tc(v):Yh(b.stateNode,G,B)){Et=0,_e=null;var w=b.sibling;if(w!==null)ct=w;else{var X=b.return;X!==null?(ct=X,hl(X)):ct=null}break e}}Et=0,_e=null,dn(t,a,d,5);break;case 6:Et=0,_e=null,dn(t,a,d,6);break;case 8:Is(),Lt=6;break t;default:throw Error(r(462))}}ef();break}catch(J){hh(t,J)}while(!0);return Ie=Qa=null,tt.H=s,tt.A=c,ht=i,ct!==null?0:(Tt=null,ft=0,Qi(),Lt)}function ef(){for(;ct!==null&&!V1();)gh(ct)}function gh(t){var a=Uo(t.alternate,t,ea);t.memoizedProps=t.pendingProps,a===null?hl(t):ct=a}function mh(t){var a=t,i=a.alternate;switch(a.tag){case 15:case 0:a=zo(i,a,a.pendingProps,a.type,void 0,ft);break;case 11:a=zo(i,a,a.pendingProps,a.type.render,a.ref,ft);break;case 5:Ss(a);default:jo(i,a),a=ct=Th(a,ea),a=Uo(i,a,ea)}t.memoizedProps=t.pendingProps,a===null?hl(t):ct=a}function dn(t,a,i,s){Ie=Qa=null,Ss(a),An=null,oi=0;var c=a.return;try{if(w0(t,c,a,i,ft)){Lt=1,tl(t,st(i,t.current)),ct=null;return}}catch(d){if(c!==null)throw ct=c,d;Lt=1,tl(t,st(i,t.current)),ct=null;return}a.flags&32768?(gt||s===1?t=!0:Dn||(ft&536870912)!==0?t=!1:(Ca=t=!0,(s===2||s===9||s===3||s===6)&&(s=Se.current,s!==null&&s.tag===13&&(s.flags|=16384))),ph(a,t)):hl(a)}function hl(t){var a=t;do{if((a.flags&32768)!==0){ph(a,Ca);return}t=a.return;var i=P0(a.alternate,a,ea);if(i!==null){ct=i;return}if(a=a.sibling,a!==null){ct=a;return}ct=a=t}while(a!==null);Lt===0&&(Lt=5)}function ph(t,a){do{var i=F0(t.alternate,t);if(i!==null){i.flags&=32767,ct=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(t=t.sibling,t!==null)){ct=t;return}ct=t=i}while(t!==null);Lt=6,ct=null}function vh(t,a,i,s,c,d,v,b,G){t.cancelPendingCommit=null;do ei();while(wt!==0);if((ht&6)!==0)throw Error(r(327));if(a!==null){if(a===t.current)throw Error(r(177));if(d=a.lanes|a.childLanes,d|=Mr,P(t,i,d,v,b,G),t===Tt&&(ct=Tt=null,ft=0),Hn=a,xa=t,aa=i,Lr=d,Yr=c,gc=s,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,sf(Sr,function(){return Eh(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||s){s=tt.T,tt.T=null,c=ke(),Ft(2),v=ht,ht|=4;try{W0(t,a,i)}finally{ht=v,Ft(c),tt.T=s}}wt=1,yh(),Sh(),_h()}}function yh(){if(wt===1){wt=0;var t=xa,a=Hn,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=tt.T,tt.T=null;var s=ke();Ft(2);var c=ht;ht|=4;try{Io(a,t),yf(t.containerInfo)}finally{ht=c,Ft(s),tt.T=i}}t.current=a,wt=2}}function Sh(){if(wt===2){wt=0;var t=xa,a=Hn,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=tt.T,tt.T=null;var s=ke();Ft(2);var c=ht;ht|=4;try{Po(t,a.alternate,a)}finally{ht=c,Ft(s),tt.T=i}}wt=3}}function _h(){if(wt===4||wt===3){wt=0,K1();var t=xa,a=Hn,i=aa,s=gc;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?wt=5:(wt=0,Hn=xa=null,Ch(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(ba=null),k(i),a=a.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(li,a,void 0,(a.current.flags&128)===128)}catch{}if(s!==null){a=tt.T,c=ke(),Ft(2),tt.T=null;try{for(var d=t.onRecoverableError,v=0;v<s.length;v++){var b=s[v];d(b.value,{componentStack:b.stack})}}finally{tt.T=a,Ft(c)}}(aa&3)!==0&&ei(),Le(t),c=t.pendingLanes,(i&261930)!==0&&(c&42)!==0?t===Xr?mi++:(mi=0,Xr=t):mi=0,se&&M1(),on(0)}}function Ch(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Vn(a)))}function ei(){return yh(),Sh(),_h(),Eh()}function Eh(){if(wt!==5)return!1;var t=xa,a=Lr;Lr=0;var i=k(aa),s=32>i?32:i;i=tt.T;var c=ke();try{Ft(s),tt.T=null,s=Yr,Yr=null;var d=xa,v=aa;if(wt=0,Hn=xa=null,aa=0,(ht&6)!==0)throw Error(r(331));var b=ht;if(ht|=4,nh(d.current),th(d,d.current,v,s),ht=b,on(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(li,d)}catch{}return!0}finally{Ft(c),tt.T=i,Ch(t,a)}}function bh(t,a,i){a=st(i,a),a=Os(t.stateNode,a,2),t=ha(t,a,2),t!==null&&(L(t,2),Le(t))}function pt(t,a,i){if(t.tag===3)bh(t,t,i);else for(;a!==null;){if(a.tag===3){bh(a,t,i);break}else if(a.tag===1){var s=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ba===null||!ba.has(s))){t=st(i,t),i=Eo(2),s=ha(a,i,2),s!==null&&(bo(i,s,a,t),L(s,2),Le(s));break}}a=a.return}}function tr(t,a,i){var s=t.pingCache;if(s===null){s=t.pingCache=new td;var c=new Set;s.set(a,c)}else c=s.get(a),c===void 0&&(c=new Set,s.set(a,c));c.has(i)||(Hr=!0,c.add(i),t=af.bind(null,t,a,i),a.then(t,t))}function af(t,a,i){var s=t.pingCache;s!==null&&s.delete(a),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,Tt===t&&(ft&i)===i&&(Lt===4||Lt===3&&(ft&62914560)===ft&&300>he()-Hl?(ht&2)===0&&fn(t,0):Br|=i,Gn===ft&&(Gn=0)),Le(t)}function xh(t,a){a===0&&(a=O()),t=La(t,a),t!==null&&(L(t,a),Le(t))}function nf(t){var a=t.memoizedState,i=0;a!==null&&(i=a.retryLane),xh(t,i)}function lf(t,a){var i=0;switch(t.tag){case 31:case 13:var s=t.stateNode,c=t.memoizedState;c!==null&&(i=c.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(r(314))}s!==null&&s.delete(a),xh(t,i)}function sf(t,a){return yl(t,a)}function rf(t,a,i,s){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fe(t,a){var i=t.alternate;return i===null?(i=n(t.tag,a,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=a,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,a=t.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function Th(t,a){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,a=i.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function cl(t,a,i,s,c,d){var v=0;if(s=t,typeof t=="function")er(t)&&(v=1);else if(typeof t=="string")v=He&&Qt?Ph(t,i,ee.current)?26:nc(t)?27:5:He?Ph(t,i,ee.current)?26:5:Qt&&nc(t)?27:5;else t:switch(t){case cr:return t=n(31,i,a,c),t.elementType=cr,t.lanes=d,t;case mn:return ja(i.children,c,d,a);case Dh:v=8,c|=24;break;case sr:return t=n(12,i,a,c|2),t.elementType=sr,t.lanes=d,t;case ur:return t=n(13,i,a,c),t.elementType=ur,t.lanes=d,t;case or:return t=n(19,i,a,c),t.elementType=or,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ma:v=10;break t;case Gh:v=9;break t;case rr:v=11;break t;case hr:v=14;break t;case pa:v=16,s=null;break t}v=29,i=Error(r(130,t===null?"null":typeof t,"")),s=null}return a=n(v,i,a,c),a.elementType=t,a.type=s,a.lanes=d,a}function ja(t,a,i,s){return t=n(7,t,s,a),t.lanes=i,t}function ar(t,a,i){return t=n(6,t,null,a),t.lanes=i,t}function Ah(t){var a=n(18,null,null,0);return a.stateNode=t,a}function nr(t,a,i){return a=n(4,t.children!==null?t.children:[],t.key,a),a.lanes=i,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}function uf(t,a,i,s,c,d,v,b,G){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Va,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=K(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=K(0),this.hiddenUpdates=K(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function Mh(t,a,i,s,c,d,v,b,G,B,w,X){return t=new uf(t,a,i,v,G,B,w,X,b),a=1,d===!0&&(a|=24),d=n(3,null,null,a),t.current=d,d.stateNode=t,a=ls(),a.refCount++,t.pooledCache=a,a.refCount++,d.memoizedState={element:s,isDehydrated:i,cache:a},os(d),t}function Rh(t){return t?(t=Sn,t):Sn}function Nh(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=f(a),t=t!==null?g(t):null,t===null?null:ai(t.stateNode)}function zh(t,a,i,s,c,d){c=Rh(c),s.context===null?s.context=c:s.pendingContext=c,s=oa(a),s.payload={element:i},d=d===void 0?null:d,d!==null&&(s.callback=d),i=ha(t,s,a),i!==null&&(oe(i,t,a),Qn(i,t,a))}function Oh(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<a?i:a}}function ir(t,a){Oh(t,a),(t=t.alternate)&&Oh(t,a)}var ot={},of=ad(),me=Pc(),lr=Object.assign,hf=Symbol.for("react.element"),fl=Symbol.for("react.transitional.element"),gn=Symbol.for("react.portal"),mn=Symbol.for("react.fragment"),Dh=Symbol.for("react.strict_mode"),sr=Symbol.for("react.profiler"),Gh=Symbol.for("react.consumer"),ma=Symbol.for("react.context"),rr=Symbol.for("react.forward_ref"),ur=Symbol.for("react.suspense"),or=Symbol.for("react.suspense_list"),hr=Symbol.for("react.memo"),pa=Symbol.for("react.lazy"),cr=Symbol.for("react.activity"),cf=Symbol.for("react.memo_cache_sentinel"),Hh=Symbol.iterator,ff=Symbol.for("react.client.reference"),dl=Array.isArray,tt=of.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,df=e.rendererVersion,gf=e.rendererPackageName,Bh=e.extraDevToolsConfig,ai=e.getPublicInstance,mf=e.getRootHostContext,pf=e.getChildHostContext,vf=e.prepareForCommit,yf=e.resetAfterCommit,Sf=e.createInstance;e.cloneMutableInstance;var fr=e.appendInitialChild,Uh=e.finalizeInitialChildren,gl=e.shouldSetTextContent,Lh=e.createTextInstance;e.cloneMutableTextInstance;var _f=e.scheduleTimeout,Cf=e.cancelTimeout,Va=e.noTimeout,We=e.isPrimaryRenderer;e.warnsIfNotActing;var le=e.supportsMutation,Xe=e.supportsPersistence,se=e.supportsHydration,Ef=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var bf=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Ft=e.setCurrentUpdatePriority,ke=e.getCurrentUpdatePriority,xf=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var Tf=e.shouldAttemptEagerTransition,Af=e.detachDeletedInstance;e.requestPostPaintCallback;var Mf=e.maySuspendCommit,Rf=e.maySuspendCommitOnUpdate,dr=e.maySuspendCommitInSyncRender,Yh=e.preloadInstance,Nf=e.startSuspendingCommit,Xh=e.suspendInstance;e.suspendOnActiveViewTransition;var zf=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var pn=e.NotPendingTransition,Ka=e.HostTransitionContext,Of=e.resetFormInstance;e.bindToConsole;var Df=e.supportsMicrotasks,Gf=e.scheduleMicrotask,ni=e.supportsTestSelectors,Hf=e.findFiberRoot,Bf=e.getBoundingRect,Uf=e.getTextContent,ii=e.isHiddenSubtree,Lf=e.matchAccessibilityRole,Yf=e.setFocusIfFocusable,Xf=e.setupIntersectionObserver,qf=e.appendChild,jf=e.appendChildToContainer,Vf=e.commitTextUpdate,Kf=e.commitMount,Qf=e.commitUpdate,wf=e.insertBefore,Zf=e.insertInContainerBefore,Jf=e.removeChild,Pf=e.removeChildFromContainer,qh=e.resetTextContent,Ff=e.hideInstance,Wf=e.hideTextInstance,kf=e.unhideInstance,If=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var $f=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var t1=e.cloneInstance,jh=e.createContainerChildSet,Vh=e.appendChildToContainerChildSet,e1=e.finalizeContainerChildren,Kh=e.replaceContainerChildren,Qh=e.cloneHiddenInstance,wh=e.cloneHiddenTextInstance,gr=e.isSuspenseInstancePending,mr=e.isSuspenseInstanceFallback,a1=e.getSuspenseInstanceFallbackErrorDetails,n1=e.registerSuspenseInstanceRetry,i1=e.canHydrateFormStateMarker,l1=e.isFormStateMarkerMatching,Zh=e.getNextHydratableSibling,s1=e.getNextHydratableSiblingAfterSingleton,r1=e.getFirstHydratableChild,u1=e.getFirstHydratableChildWithinContainer,o1=e.getFirstHydratableChildWithinActivityInstance,h1=e.getFirstHydratableChildWithinSuspenseInstance,c1=e.getFirstHydratableChildWithinSingleton,f1=e.canHydrateInstance,d1=e.canHydrateTextInstance,g1=e.canHydrateActivityInstance,m1=e.canHydrateSuspenseInstance,p1=e.hydrateInstance,v1=e.hydrateTextInstance,y1=e.hydrateActivityInstance,S1=e.hydrateSuspenseInstance,_1=e.getNextHydratableInstanceAfterActivityInstance,C1=e.getNextHydratableInstanceAfterSuspenseInstance,E1=e.commitHydratedInstance,b1=e.commitHydratedContainer,x1=e.commitHydratedActivityInstance,T1=e.commitHydratedSuspenseInstance,A1=e.finalizeHydratedChildren,M1=e.flushHydrationEvents;e.clearActivityBoundary;var R1=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var N1=e.clearSuspenseBoundaryFromContainer,z1=e.hideDehydratedBoundary,O1=e.unhideDehydratedBoundary,Jh=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var D1=e.validateHydratableInstance,G1=e.validateHydratableTextInstance,He=e.supportsResources,Ph=e.isHostHoistableType,pr=e.getHoistableRoot,Fh=e.getResource,Wh=e.acquireResource,kh=e.releaseResource,H1=e.hydrateHoistable,Ih=e.mountHoistable,$h=e.unmountHoistable,B1=e.createHoistableInstance,U1=e.prepareToCommitHoistables,L1=e.mayResourceSuspendCommit,tc=e.preloadResource,Y1=e.suspendResource,Qt=e.supportsSingletons,ec=e.resolveSingletonInstance,X1=e.acquireSingletonInstance,ac=e.releaseSingletonInstance,nc=e.isHostSingletonType,vn=e.isSingletonScope,vr=[],yn=-1,Sn={},pe=Math.clz32?Math.clz32:M,q1=Math.log,j1=Math.LN2,ml=256,pl=262144,vl=4194304,yl=me.unstable_scheduleCallback,yr=me.unstable_cancelCallback,V1=me.unstable_shouldYield,K1=me.unstable_requestPaint,he=me.unstable_now,ic=me.unstable_ImmediatePriority,Q1=me.unstable_UserBlockingPriority,Sr=me.unstable_NormalPriority,w1=me.unstable_IdlePriority,Z1=me.log,J1=me.unstable_setDisableYieldValue,li=null,ve=null,ye=typeof Object.is=="function"?Object.is:ut,lc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},P1=Object.prototype.hasOwnProperty,_r,sc,Cr=!1,rc=new WeakMap,_n=[],Cn=0,Sl=null,si=0,Te=[],Ae=0,va=null,qe=1,je="",ee=y(null),ri=y(null),ya=y(null),_l=y(null),ae=null,Dt=null,gt=!1,Sa=null,Me=!1,Er=Error(r(519)),Cl=y(null),Qa=null,Ie=null,F1=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(i,s){t.push(s)}};this.abort=function(){a.aborted=!0,t.forEach(function(i){return i()})}},W1=me.unstable_scheduleCallback,k1=me.unstable_NormalPriority,Gt={$$typeof:ma,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},El=null,En=null,br=!1,bl=!1,xr=!1,wa=0,ui=null,Tr=0,bn=0,xn=null,uc=tt.S;tt.S=function(t,a){dc=he(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&L0(t,a),uc!==null&&uc(t,a)};var Za=y(null),Tn=Error(r(460)),Ar=Error(r(474)),xl=Error(r(542)),Tl={then:function(){}},Ja=null,An=null,oi=0,Pa=Ou(!0),oc=Ou(!1),Re=[],Mn=0,Mr=0,_a=!1,Rr=!1,Rn=y(null),Al=y(0),Se=y(null),Ne=null,Xt=y(0),$e=0,it=null,xt=null,qt=null,Ml=!1,Nn=!1,Fa=!1,Rl=0,hi=0,zn=null,I1=0,ci={readContext:$t,use:Fi,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};ci.useEffectEvent=Ut;var hc={readContext:$t,use:Fi,useCallback:function(t,a){return re().memoizedState=[t,a===void 0?null:a],t},useContext:$t,useEffect:ao,useImperativeHandle:function(t,a,i){i=i!=null?i.concat([t]):null,ki(4194308,4,so.bind(null,a,t),i)},useLayoutEffect:function(t,a){return ki(4194308,4,t,a)},useInsertionEffect:function(t,a){ki(4,2,t,a)},useMemo:function(t,a){var i=re();a=a===void 0?null:a;var s=t();if(Fa){lt(!0);try{t()}finally{lt(!1)}}return i.memoizedState=[s,a],s},useReducer:function(t,a,i){var s=re();if(i!==void 0){var c=i(a);if(Fa){lt(!0);try{i(a)}finally{lt(!1)}}}else c=a;return s.memoizedState=s.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},s.queue=t,t=t.dispatch=Q0.bind(null,it,t),[s.memoizedState,t]},useRef:function(t){var a=re();return t={current:t},a.memoizedState=t},useState:function(t){t=bs(t);var a=t.queue,i=po.bind(null,it,a);return a.dispatch=i,[t.memoizedState,i]},useDebugValue:As,useDeferredValue:function(t,a){var i=re();return Ms(i,t,a)},useTransition:function(){var t=bs(!1);return t=co.bind(null,it,t.queue,!0,!1),re().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,i){var s=it,c=re();if(gt){if(i===void 0)throw Error(r(407));i=i()}else{if(i=a(),Tt===null)throw Error(r(349));(ft&127)!==0||qu(s,a,i)}c.memoizedState=i;var d={value:i,getSnapshot:a};return c.queue=d,ao(Vu.bind(null,s,d,t),[t]),s.flags|=2048,hn(9,{destroy:void 0},ju.bind(null,s,d,i,a),null),i},useId:function(){var t=re(),a=Tt.identifierPrefix;if(gt){var i=je,s=qe;i=(s&~(1<<32-pe(s)-1)).toString(32)+i,a="_"+a+"R_"+i,i=Rl++,0<i&&(a+="H"+i.toString(32)),a+="_"}else i=I1++,a="_"+a+"r_"+i.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Rs,useFormState:ku,useActionState:ku,useOptimistic:function(t){var a=re();a.memoizedState=a.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=Ns.bind(null,it,!0,i),i.dispatch=a,[t,a]},useMemoCache:_s,useCacheRefresh:function(){return re().memoizedState=K0.bind(null,it)},useEffectEvent:function(t){var a=re(),i={impl:t};return a.memoizedState=i,function(){if((ht&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}},Nr={readContext:$t,use:Fi,useCallback:uo,useContext:$t,useEffect:Ts,useImperativeHandle:ro,useInsertionEffect:io,useLayoutEffect:lo,useMemo:oo,useReducer:Wi,useRef:eo,useState:function(){return Wi(we)},useDebugValue:As,useDeferredValue:function(t,a){var i=Yt();return ho(i,xt.memoizedState,t,a)},useTransition:function(){var t=Wi(we)[0],a=Yt().memoizedState;return[typeof t=="boolean"?t:Jn(t),a]},useSyncExternalStore:Xu,useId:go,useHostTransitionStatus:Rs,useFormState:Iu,useActionState:Iu,useOptimistic:function(t,a){var i=Yt();return wu(i,xt,t,a)},useMemoCache:_s,useCacheRefresh:mo};Nr.useEffectEvent=no;var cc={readContext:$t,use:Fi,useCallback:uo,useContext:$t,useEffect:Ts,useImperativeHandle:ro,useInsertionEffect:io,useLayoutEffect:lo,useMemo:oo,useReducer:Es,useRef:eo,useState:function(){return Es(we)},useDebugValue:As,useDeferredValue:function(t,a){var i=Yt();return xt===null?Ms(i,t,a):ho(i,xt.memoizedState,t,a)},useTransition:function(){var t=Es(we)[0],a=Yt().memoizedState;return[typeof t=="boolean"?t:Jn(t),a]},useSyncExternalStore:Xu,useId:go,useHostTransitionStatus:Rs,useFormState:to,useActionState:to,useOptimistic:function(t,a){var i=Yt();return xt!==null?wu(i,xt,t,a):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:_s,useCacheRefresh:mo};cc.useEffectEvent=no;var zr={enqueueSetState:function(t,a,i){t=t._reactInternals;var s=ge(),c=oa(s);c.payload=a,i!=null&&(c.callback=i),a=ha(t,c,s),a!==null&&(oe(a,t,s),Qn(a,t,s))},enqueueReplaceState:function(t,a,i){t=t._reactInternals;var s=ge(),c=oa(s);c.tag=1,c.payload=a,i!=null&&(c.callback=i),a=ha(t,c,s),a!==null&&(oe(a,t,s),Qn(a,t,s))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var i=ge(),s=oa(i);s.tag=2,a!=null&&(s.callback=a),a=ha(t,s,i),a!==null&&(oe(a,t,i),Qn(a,t,i))}},Or=Error(r(461)),jt=!1,Dr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},ta=!1,Vt=!1,Gr=!1,fc=typeof WeakSet=="function"?WeakSet:Set,Wt=null,Kt=null,ce=!1,Be=null,On=8192,$1={getCacheForType:function(t){var a=$t(Gt),i=a.data.get(t);return i===void 0&&(i=t(),a.data.set(t,i)),i},cacheSignal:function(){return $t(Gt).controller.signal}},Nl=0,zl=1,Ol=2,Dl=3,Gl=4;if(typeof Symbol=="function"&&Symbol.for){var fi=Symbol.for;Nl=fi("selector.component"),zl=fi("selector.has_pseudo_class"),Ol=fi("selector.role"),Dl=fi("selector.test_id"),Gl=fi("selector.text")}var td=typeof WeakMap=="function"?WeakMap:Map,ht=0,Tt=null,ct=null,ft=0,Et=0,_e=null,Ca=!1,Dn=!1,Hr=!1,ea=0,Lt=0,Ea=0,Wa=0,Br=0,Ce=0,Gn=0,di=null,fe=null,Ur=!1,Hl=0,dc=0,gi=1/0,Bl=null,ba=null,wt=0,xa=null,Hn=null,aa=0,Lr=0,Yr=null,gc=null,mi=0,Xr=null;return ot.attemptContinuousHydration=function(t){if(t.tag===13||t.tag===31){var a=La(t,67108864);a!==null&&oe(a,t,67108864),ir(t,67108864)}},ot.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13||t.tag===31){var a=ge();a=rt(a);var i=La(t,a);i!==null&&oe(i,t,a),ir(t,a)}},ot.attemptSynchronousHydration=function(t){switch(t.tag){case 3:if(t=t.stateNode,t.current.memoizedState.isDehydrated){var a=R(t.pendingLanes);if(a!==0){for(t.pendingLanes|=2,t.entangledLanes|=2;a;){var i=1<<31-pe(a);t.entanglements[1]|=i,a&=~i}Le(t),(ht&6)===0&&(gi=he()+500,on(0))}}break;case 31:case 13:a=La(t,2),a!==null&&oe(a,t,2),oh(),ir(t,2)}},ot.batchedUpdates=function(t,a){return t(a)},ot.createComponentSelector=function(t){return{$$typeof:Nl,value:t}},ot.createContainer=function(t,a,i,s,c,d,v,b,G,B){return Mh(t,a,!1,null,i,s,d,null,v,b,G,B)},ot.createHasPseudoClassSelector=function(t){return{$$typeof:zl,value:t}},ot.createHydrationContainer=function(t,a,i,s,c,d,v,b,G,B,w,X,J,nt){return t=Mh(i,s,!0,t,c,d,b,nt,G,B,w,X),t.context=Rh(null),i=t.current,s=ge(),s=rt(s),c=oa(s),c.callback=a??null,ha(i,c,s),a=s,t.current.lanes=a,L(t,a),Le(t),t},ot.createPortal=function(t,a,i){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gn,key:s==null?null:""+s,children:t,containerInfo:a,implementation:i}},ot.createRoleSelector=function(t){return{$$typeof:Ol,value:t}},ot.createTestNameSelector=function(t){return{$$typeof:Dl,value:t}},ot.createTextSelector=function(t){return{$$typeof:Gl,value:t}},ot.defaultOnCaughtError=function(t){console.error(t)},ot.defaultOnRecoverableError=function(t){lc(t)},ot.defaultOnUncaughtError=function(t){lc(t)},ot.deferredUpdates=function(t){var a=tt.T,i=ke();try{return Ft(32),tt.T=null,t()}finally{Ft(i),tt.T=a}},ot.discreteUpdates=function(t,a,i,s,c){var d=tt.T,v=ke();try{return Ft(2),tt.T=null,t(a,i,s,c)}finally{Ft(v),tt.T=d,ht===0&&(gi=he()+500)}},ot.findAllNodes=ks,ot.findBoundingRects=function(t,a){if(!ni)throw Error(r(363));a=ks(t,a),t=[];for(var i=0;i<a.length;i++)t.push(Bf(a[i]));for(a=t.length-1;0<a;a--){i=t[a];for(var s=i.x,c=s+i.width,d=i.y,v=d+i.height,b=a-1;0<=b;b--)if(a!==b){var G=t[b],B=G.x,w=B+G.width,X=G.y,J=X+G.height;if(s>=B&&d>=X&&c<=w&&v<=J){t.splice(a,1);break}else if(s!==B||i.width!==G.width||J<d||X>v){if(!(d!==X||i.height!==G.height||w<s||B>c)){B>s&&(G.width+=B-s,G.x=s),w<c&&(G.width=c-B),t.splice(a,1);break}}else{X>d&&(G.height+=X-d,G.y=d),J<v&&(G.height=v-X),t.splice(a,1);break}}}return t},ot.findHostInstance=Nh,ot.findHostInstanceWithNoPortals=function(t){return t=f(t),t=t!==null?m(t):null,t===null?null:ai(t.stateNode)},ot.findHostInstanceWithWarning=function(t){return Nh(t)},ot.flushPassiveEffects=ei,ot.flushSyncFromReconciler=function(t){var a=ht;ht|=1;var i=tt.T,s=ke();try{if(Ft(2),tt.T=null,t)return t()}finally{Ft(s),tt.T=i,ht=a,(ht&6)===0&&on(0)}},ot.flushSyncWork=oh,ot.focusWithin=function(t,a){if(!ni)throw Error(r(363));for(t=Ps(t),a=lh(t,a),a=Array.from(a),t=0;t<a.length;){var i=a[t++],s=i.tag;if(!ii(i)){if((s===5||s===26||s===27)&&Yf(i.stateNode))return!0;for(i=i.child;i!==null;)a.push(i),i=i.sibling}}return!1},ot.getFindAllNodesFailureDescription=function(t,a){if(!ni)throw Error(r(363));var i=0,s=[];t=[Ps(t),0];for(var c=0;c<t.length;){var d=t[c++],v=d.tag,b=t[c++],G=a[b];if((v!==5&&v!==26&&v!==27||!ii(d))&&(Fs(d,G)&&(s.push(Ws(G)),b++,b>i&&(i=b)),b<a.length))for(d=d.child;d!==null;)t.push(d,b),d=d.sibling}if(i<a.length){for(t=[];i<a.length;i++)t.push(Ws(a[i]));return`findAllNodes was able to match part of the selector:
  `+(s.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},ot.getPublicRootInstance=function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 27:case 5:return ai(t.child.stateNode);default:return t.child.stateNode}},ot.injectIntoDevTools=function(){var t={bundleType:0,version:df,rendererPackageName:gf,currentDispatcherRef:tt,reconcilerVersion:"19.2.0"};if(Bh!==null&&(t.rendererConfig=Bh),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")t=!1;else{var a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(a.isDisabled||!a.supportsFiber)t=!0;else{try{li=a.inject(t),ve=a}catch{}t=!!a.checkDCE}}return t},ot.isAlreadyRendering=function(){return(ht&6)!==0},ot.observeVisibleRects=function(t,a,i,s){if(!ni)throw Error(r(363));t=ks(t,a);var c=Xf(t,i,s).disconnect;return{disconnect:function(){c()}}},ot.shouldError=function(){return null},ot.shouldSuspend=function(){return!1},ot.startHostTransition=function(t,a,i,s){if(t.tag!==5)throw Error(r(476));var c=fo(t).queue;co(t,c,a,pn,i===null?l:function(){var d=fo(t);return d.next===null&&(d=t.alternate.memoizedState),Pn(t,d.next.queue,{},ge()),i(s)})},ot.updateContainer=function(t,a,i,s){var c=a.current,d=ge();return zh(c,d,t,a,i,s),d},ot.updateContainerSync=function(t,a,i,s){return zh(a.current,2,t,a,i,s),2},ot},u.exports.default=u.exports,Object.defineProperty(u.exports,"__esModule",{value:!0})})(Fr)),Fr.exports}var Vc;function R3(){return Vc||(Vc=1,Pr.exports=M3()),Pr.exports}var N3=R3();const z3=nd(N3);var Wr={exports:{}},na={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kc;function O3(){return Kc||(Kc=1,na.ConcurrentRoot=1,na.ContinuousEventPriority=8,na.DefaultEventPriority=32,na.DiscreteEventPriority=2,na.IdleEventPriority=268435456,na.LegacyRoot=0,na.NoEventPriority=0),na}var Qc;function D3(){return Qc||(Qc=1,Wr.exports=O3()),Wr.exports}var $l=D3();const wc={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Zc=!1,Jc=!1;const Fl=".react-konva-event",G3=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,H3=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,B3={};function ts(u,e,n=B3){if(!Zc&&"zIndex"in e&&(console.warn(H3),Zc=!0),!Jc&&e.draggable){var l=e.x!==void 0||e.y!==void 0,r=e.onDragEnd||e.onDragMove;l&&!r&&(console.warn(G3),Jc=!0)}for(var o in n)if(!wc[o]){var h=o.slice(0,2)==="on",f=n[o]!==e[o];if(h&&f){var g=o.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),u.off(g,n[o])}var m=!e.hasOwnProperty(o);m&&u.setAttr(o,void 0)}var p=e._useStrictMode,S={},y=!1;const E={};for(var o in e)if(!wc[o]){var h=o.slice(0,2)==="on",_=n[o]!==e[o];if(h&&_){var g=o.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),e[o]&&(E[g]=e[o])}!h&&(e[o]!==n[o]||p&&e[o]!==u.getAttr(o))&&(y=!0,S[o]=e[o])}y&&(u.setAttrs(S),Ga(u));for(var g in E)u.off(g+Fl),u.on(g+Fl,E[g])}function Ga(u){if(!V.autoDrawEnabled){var e=u.getLayer()||u.getStage();e&&e.batchDraw()}}var kr=Pc();const A0={},U3={};Xn.Node.prototype._applyProps=ts;let M0=$l.DefaultEventPriority;function L3(u,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}u.add(e),Ga(u)}function Y3(u,e,n){let l=Xn[u];l||(console.error(`Konva has no node with the type ${u}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${u}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),l=Xn.Group);const r={},o={};for(var h in e)if(h!=="ref"){var f=h.slice(0,2)==="on";f?o[h]=e[h]:r[h]=e[h]}const g=new l(r);return ts(g,o),g}function X3(u,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${u}"`)}function q3(u,e,n){return!1}function j3(u){return u}function V3(){return null}function K3(){return null}function Q3(u,e,n,l){return U3}function w3(){}function Z3(u){}function J3(u,e){return!1}function P3(){return A0}function F3(){return A0}const W3=setTimeout,k3=clearTimeout,I3=!0,$3=u=>{u()},t5=-1;function e5(u,e){return!1}const a5=!1,n5=!1,i5=!0,l5=!1,s5=!1;function r5(u,e){e.parent===u?e.moveToTop():u.add(e),Ga(u)}function u5(u,e){e.parent===u?e.moveToTop():u.add(e),Ga(u)}function R0(u,e,n){e._remove(),u.add(e),e.setZIndex(n.getZIndex()),Ga(u)}function o5(u,e,n){R0(u,e,n)}function h5(u,e){e.destroy(),e.off(Fl),Ga(u)}function c5(u,e){e.destroy(),e.off(Fl),Ga(u)}function f5(u,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function d5(u,e,n){}function g5(u,e,n,l){ts(u,l,n)}function m5(u){u.hide(),Ga(u)}function p5(u){}function v5(u,e){(e.visible==null||e.visible)&&u.show()}function y5(u,e){}function S5(u){}function _5(){}function C5(){return null}function E5(){}function b5(){}function x5(){return $l.DefaultEventPriority}function T5(){}function A5(){return null}function M5(u){M0=u}function R5(){return M0}function N5(){return $l.DiscreteEventPriority}function z5(){return!1}function O5(){}function D5(){return null}function G5(){return-1.1}function H5(){}function B5(){return!1}function U5(){return!0}function L5(){}function Y5(){}function X5(){return null}const q5=null,j5=Jt.createContext(null);function V5(){}const K5=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:j5,NotPendingTransition:q5,afterActiveInstanceBlur:b5,appendChild:r5,appendChildToContainer:u5,appendInitialChild:L3,beforeActiveInstanceBlur:E5,cancelTimeout:k3,clearContainer:S5,commitMount:d5,commitTextUpdate:f5,commitUpdate:g5,createInstance:Y3,createTextInstance:X3,detachDeletedInstance:_5,finalizeInitialChildren:q3,getChildHostContext:F3,getCurrentEventPriority:x5,getCurrentUpdatePriority:R5,getInstanceFromNode:C5,getInstanceFromScope:A5,getPublicInstance:j3,getRootHostContext:P3,hideInstance:m5,hideTextInstance:p5,idlePriority:kr.unstable_IdlePriority,insertBefore:R0,insertInContainerBefore:o5,isPrimaryRenderer:a5,maySuspendCommit:B5,noTimeout:t5,now:kr.unstable_now,preloadInstance:U5,prepareForCommit:V3,preparePortalMount:K3,prepareScopeUpdate:T5,prepareUpdate:Q3,removeChild:h5,removeChildFromContainer:c5,requestPostPaintCallback:H5,resetAfterCommit:w3,resetFormInstance:V5,resetTextContent:Z3,resolveEventTimeStamp:G5,resolveEventType:D5,resolveUpdatePriority:N5,run:kr.unstable_runWithPriority,scheduleMicrotask:$3,scheduleTimeout:W3,setCurrentUpdatePriority:M5,shouldAttemptEagerTransition:z5,shouldDeprioritizeSubtree:J3,shouldSetTextContent:e5,startSuspendingCommit:L5,supportsHydration:s5,supportsMicrotasks:I3,supportsMutation:i5,supportsPersistence:l5,suspendInstance:Y5,trackSchedulerEvent:O5,unhideInstance:v5,unhideTextInstance:y5,waitForCommitToBeReady:X5,warnsIfNotActing:n5},Symbol.toStringTag,{value:"Module"}));function N0(u,e,n){if(!u)return;if(n(u)===!0)return u;let l=u.child;for(;l;){const r=N0(l,e,n);if(r)return r;l=l.sibling}}function z0(u){try{return Object.defineProperties(u,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return u}}const mu=z0(St.createContext(null));class O0 extends St.Component{render(){return St.createElement(mu.Provider,{value:this._reactInternals},this.props.children)}}function Q5(){const u=St.useContext(mu);if(u===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=St.useId();return St.useMemo(()=>{for(const n of[u,u?.alternate]){if(!n)continue;const l=N0(n,!1,r=>{let o=r.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(l)return l}},[u,e])}const w5=Symbol.for("react.context"),Z5=u=>u!==null&&typeof u=="object"&&"$$typeof"in u&&u.$$typeof===w5;function J5(){const u=Q5(),[e]=St.useState(()=>new Map);e.clear();let n=u;for(;n;){const l=n.type;Z5(l)&&l!==mu&&!e.has(l)&&e.set(l,St.use(z0(l))),n=n.return}return e}function P5(){const u=J5();return St.useMemo(()=>Array.from(u.keys()).reduce((e,n)=>l=>St.createElement(e,null,St.createElement(n.Provider,{...l,value:u.get(n)})),e=>St.createElement(O0,{...e})),[u])}if(Jt.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function F5(u){const e=Jt.useRef({});return Jt.useLayoutEffect(()=>{e.current=u}),Jt.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const W5=()=>{const u=Jt.useRef(0);return Jt.useMemo(()=>{u.current++},[]),u.current>1},k5=u=>{const e=Jt.useRef(null),n=Jt.useRef(null),l=Jt.useRef(null),r=F5(u),o=P5(),h=Jt.useRef(null),f=p=>{const{forwardedRef:S}=u;S&&(typeof S=="function"?S(p):S.current=p)},g=W5(),m=()=>{f(null),bi.updateContainer(null,l.current,null),n.current?.destroy(),n.current=null};return Jt.useLayoutEffect(()=>(h.current&&(clearTimeout(h.current),h.current=null),n.current?f(n.current):(n.current=new Xn.Stage({width:u.width,height:u.height,container:e.current}),f(n.current),l.current=bi.createContainer(n.current,$l.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),bi.updateContainer(Jt.createElement(o,{},u.children),l.current,null,()=>{})),()=>{g?h.current=setTimeout(m,0):m()}),[]),Jt.useLayoutEffect(()=>{f(n.current),ts(n.current,u,r),bi.flushSyncFromReconciler(()=>{bi.updateContainer(Jt.createElement(o,{},u.children),l.current,null)})}),Jt.createElement("div",{ref:e,id:u.id,accessKey:u.accessKey,className:u.className,role:u.role,style:u.style,tabIndex:u.tabIndex,title:u.title})},I5="Layer",$5="RegularPolygon",bi=z3(K5),t4=Jt.forwardRef((u,e)=>Jt.createElement(O0,{},Jt.createElement(k5,{...u,forwardedRef:e}))),e4=u=>3*(u-1)*u+1,D0=u=>6*(u-1)||1,G0=u=>Math.ceil(Math.fround(1/2+Math.sqrt(4*u-1)/(2*Math.sqrt(3)))),H0=({n:u=1,radius:e=10,origin:[n,l]=[0,0],spacing:r=0,rotation:o=0})=>{if(u===1)return[n,l];const h=G0(u),f=e4(h),g=D0(h),m=f-g;u===f?u=m+1:u+=1;const p=u-m-1,S=Math.floor(6*p/g)*60,y=(A,N,H)=>{const[O,K]=H,L=(A+o)*Math.PI/180,P=Math.cos(L),Q=Math.sin(L),F=N*(e*Math.sqrt(3)+r);return[O+P*F,K+Q*F]},[E,_]=y(S,h-1,[n,l]),M=S+120,R=p%(g/6);return y(M,R,[E,_])};function a4({number:u,setNumber:e,play:n}){const l=St.useRef(1);St.useLayoutEffect(()=>{if(!n)return;const r=setTimeout(()=>{e(o=>(o<=1&&(l.current=1),o>=331&&(l.current=-1),o+l.current*1))},1e3/D0(G0(u)));return()=>{clearTimeout(r)}},[n,u,e])}const n4=({x:u,y:e,radius:n,rotation:l,...r})=>{const[o,h]=St.useState(!1),f=o?"#bbb":"#ccc",g=St.useRef(null);return St.useLayoutEffect(()=>{const m=g.current;if(!m||!o)return;const p=m.style.cursor;return m.style.cursor="pointer",()=>{m.style.cursor=p}},[o]),Zt.jsx($5,{ref:m=>{g.current=m?.getStage()?.container()||null},...r,perfectDrawEnabled:!1,x:u,y:e,radius:n,onPointerEnter:({evt:m,pointerId:p})=>{m.target.hasPointerCapture(p)||h(!0)},onPointerLeave:({evt:m,pointerId:p})=>{m.target.hasPointerCapture(p)||h(!1)},sides:6,rotation:l,fill:f})},B0=St.createContext(H0),i4=St.memo(({radius:u,spacing:e,n,x:l,y:r,rotation:o,children:h})=>{const f=St.useContext(B0),[g,m]=f({radius:u,spacing:e,n,origin:[l,r],rotation:o});return h({correctedX:g,correctedY:m})}),l4=({number:u=0,x:e=0,y:n=0,radius:l=0,spacing:r=0,packingFn:o=H0,rotation:h=0,...f})=>{const g=St.useCallback(({correctedX:m,correctedY:p})=>Zt.jsx(n4,{...f,x:m,y:p,radius:l,rotation:h}),[l,h,...Object.entries(f).flat(1)]);return Zt.jsx(B0.Provider,{value:o,children:Array(u).fill(0).map((m,p)=>{const S=p+1;return Zt.jsx(i4,{radius:l,spacing:r,n:S,x:e,y:n,rotation:h,children:g},p)})})};function f4(){const[n,l]=St.useState(1),[r,o]=St.useState(60),[h,f]=St.useState(.5),[g,m]=St.useState(600/4),[p,S]=St.useState(600/4),[y,E]=St.useState(!1);a4({number:n,setNumber:l,play:y});const _=O=>({x:O,y:O}),M=St.useRef(null),R=St.useRef(null),A=St.useRef(void 0),N=St.useDeferredValue(r),H=St.useDeferredValue(n);return Zt.jsxs(Zt.Fragment,{children:[Zt.jsx(t4,{ref:O=>{R.current=O?.container()||null},width:200,height:200,x:g-100,y:p-100,scale:_(h),onPointerDown:({evt:O,pointerId:K})=>{M.current={canvas:{x:g,y:p},event:{x:O.clientX,y:O.clientY}},O.target.setPointerCapture(K)},onPointerUp:({evt:O,pointerId:K})=>{M.current=null,O.target.releasePointerCapture(K),A.current!==void 0&&(R.current.style.cursor=A.current,A.current=void 0)},onPointerMove:({evt:O})=>{O.pressure>0&&(A.current===void 0&&(A.current=R.current.style.cursor,R.current.style.cursor="move"),m(M.current.canvas.x+O.clientX-M.current.event.x),S(M.current.canvas.y+O.clientY-M.current.event.y))},onWheel:({evt:O,currentTarget:K})=>{O.preventDefault();const L=1.1,Q=K.getPointerPosition(),$=(O.deltaY>0?-1:1)>0?h*L:h/L;f($);const rt={x:(Q.x-g+100)/h,y:(Q.y-p+100)/h};m(Q.x-rt.x*$+100),S(Q.y-rt.y*$+100)},children:Zt.jsx(I5,{children:Zt.jsx(l4,{number:H,stroke:"red",strokeWidth:0,radius:10,x:100,y:100,spacing:1,rotation:N})})}),Zt.jsxs("label",{children:["number (",n,"):",Zt.jsx("br",{}),Zt.jsx("input",{type:"range",min:1,max:10331,value:n,onChange:O=>{E(!1),l(Number(O.target.value))}})]}),Zt.jsx("button",{onClick:()=>{E(!1),l(O=>Math.max(1,O-1))},children:"-"}),Zt.jsx("button",{onClick:()=>{E(!1),l(O=>Math.min(311,O+1))},children:"+"}),Zt.jsx("button",{onClick:()=>E(O=>!O),children:y?"":""}),Zt.jsx("br",{}),Zt.jsxs("label",{children:["angle (",r,"):",Zt.jsx("br",{}),Zt.jsx("input",{type:"range",min:0,max:180,value:r,onChange:O=>{o(Number(O.target.value))}})]})]})}export{f4 as PageHexagonsWithoutRules};
//# sourceMappingURL=page-hexagons-without-rules.BBDrn7Xd.js.map
