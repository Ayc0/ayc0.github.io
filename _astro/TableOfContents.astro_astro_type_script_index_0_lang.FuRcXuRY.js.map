{"version":3,"file":"TableOfContents.astro_astro_type_script_index_0_lang.FuRcXuRY.js","sources":["../../node_modules/.pnpm/@astrojs+starlight@0.37.6_astro@5.17.2_@azure+identity@4.12.0_@types+node@25.0.3_rollup_ff909f7c2d121988c85b85defbdc9ae7/node_modules/@astrojs/starlight/constants.ts","../../node_modules/.pnpm/@astrojs+starlight@0.37.6_astro@5.17.2_@azure+identity@4.12.0_@types+node@25.0.3_rollup_ff909f7c2d121988c85b85defbdc9ae7/node_modules/@astrojs/starlight/components/TableOfContents/starlight-toc.ts"],"sourcesContent":["// N.B. THIS FILE IS IMPORTED IN BOTH SERVER- AND CLIENT-SIDE CODE.\n// THINK TWICE BEFORE ADDING STUFF AS IT WILL GET SHIPPED TO THE CLIENT.\n\nexport const PAGE_TITLE_ID = '_top';\n","import { PAGE_TITLE_ID } from '../../constants';\n\nexport class StarlightTOC extends HTMLElement {\n\tprivate _current = this.querySelector<HTMLAnchorElement>('a[aria-current=\"true\"]');\n\tprivate minH = parseInt(this.dataset.minH || '2', 10);\n\tprivate maxH = parseInt(this.dataset.maxH || '3', 10);\n\n\t/**\n\t * CSS selector string that matches only headings that can appear in the table of contents.\n\t * Generates a selector like `h1#_top,:where(h2,h3)[id]`.\n\t */\n\tprivate tocHeadingSelector =\n\t\t`h1#${PAGE_TITLE_ID},` +\n\t\t`:where(${[...Array.from({ length: 1 + this.maxH - this.minH }).map((_, index) => `h${this.minH + index}`)].join()})[id]`;\n\n\tprotected set current(link: HTMLAnchorElement) {\n\t\tif (link === this._current) return;\n\t\tif (this._current) this._current.removeAttribute('aria-current');\n\t\tlink.setAttribute('aria-current', 'true');\n\t\tthis._current = link;\n\t}\n\n\tprivate onIdle = (cb: IdleRequestCallback) =>\n\t\t(window.requestIdleCallback || ((cb) => setTimeout(cb, 1)))(cb);\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.onIdle(() => this.init());\n\t}\n\n\tprivate init = (): void => {\n\t\t/** All the links in the table of contents. */\n\t\tconst links = [...this.querySelectorAll('a')];\n\n\t\t/** Test if an element is a table-of-contents heading. */\n\t\tconst isHeading = (el: Element): el is HTMLHeadingElement =>\n\t\t\tel.matches(this.tocHeadingSelector);\n\n\t\t/** Walk up the DOM to find the nearest heading. */\n\t\tconst getElementHeading = (el: Element | null): HTMLHeadingElement | null => {\n\t\t\tif (!el) return null;\n\t\t\tconst origin = el;\n\t\t\twhile (el) {\n\t\t\t\t// Short circuit if we reach the top-level content container or one of the other containers in main.\n\t\t\t\tif (el.matches('.sl-markdown-content, main > *')) {\n\t\t\t\t\treturn document.getElementById(PAGE_TITLE_ID) as HTMLHeadingElement;\n\t\t\t\t}\n\t\t\t\tif (isHeading(el)) return el;\n\t\t\t\t// Find the first heading that is a child of this element, and return it if there is one.\n\t\t\t\tconst childHeading = el.querySelector<HTMLHeadingElement>(this.tocHeadingSelector);\n\t\t\t\tif (childHeading) return childHeading;\n\t\t\t\t// Assign the previous sibling’s last, most deeply nested child to el.\n\t\t\t\tel = el.previousElementSibling;\n\t\t\t\twhile (el?.lastElementChild) {\n\t\t\t\t\tel = el.lastElementChild;\n\t\t\t\t}\n\t\t\t\t// Look for headings amongst siblings.\n\t\t\t\tconst h = getElementHeading(el);\n\t\t\t\tif (h) return h;\n\t\t\t}\n\t\t\t// Walk back up the parent.\n\t\t\treturn getElementHeading(origin.parentElement);\n\t\t};\n\n\t\t/** Handle intersections and set the current link to the heading for the current intersection. */\n\t\tconst setCurrent: IntersectionObserverCallback = (entries) => {\n\t\t\tfor (const { isIntersecting, target } of entries) {\n\t\t\t\tif (!isIntersecting) continue;\n\t\t\t\tconst heading = getElementHeading(target);\n\t\t\t\tif (!heading) continue;\n\t\t\t\tconst link = links.find((link) => link.hash === '#' + encodeURIComponent(heading.id));\n\t\t\t\tif (link) {\n\t\t\t\t\tthis.current = link;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Observe the following elements:\n\t\t// - headings that appear in the table of contents\n\t\t// - siblings of those headings or of the `.sl-heading-wrapper` added by Starlight’s anchor links feature\n\t\t// - direct children of `.sl-markdown-content` to include elements before the first subheading\n\t\t// - direct children of `main` that don’t include headings (mainly to target Starlight’s banner)\n\t\t// Ignore any elements that themselves contain a table-of-contents heading, as we are already observing those children.\n\t\tconst toObserve = document.querySelectorAll(\n\t\t\t[\n\t\t\t\t`main :where(${this.tocHeadingSelector})`,\n\t\t\t\t`main :where(${this.tocHeadingSelector}, .sl-heading-wrapper) ~ *:not(:has(${this.tocHeadingSelector}))`,\n\t\t\t\t`main .sl-markdown-content > *:not(:has(${this.tocHeadingSelector}))`,\n\t\t\t\t`main > *:not(:has(${this.tocHeadingSelector}))`,\n\t\t\t].join()\n\t\t);\n\n\t\tlet observer: IntersectionObserver | undefined;\n\t\tconst observe = () => {\n\t\t\tif (observer) return;\n\t\t\tobserver = new IntersectionObserver(setCurrent, { rootMargin: this.getRootMargin() });\n\t\t\ttoObserve.forEach((h) => observer!.observe(h));\n\t\t};\n\t\tobserve();\n\n\t\tlet timeout: NodeJS.Timeout;\n\t\twindow.addEventListener('resize', () => {\n\t\t\t// Disable intersection observer while window is resizing.\n\t\t\tif (observer) {\n\t\t\t\tobserver.disconnect();\n\t\t\t\tobserver = undefined;\n\t\t\t}\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(() => this.onIdle(observe), 200);\n\t\t});\n\t};\n\n\tprivate getRootMargin(): `-${number}px 0% ${number}px` {\n\t\tconst navBarHeight = document.querySelector('header')?.getBoundingClientRect().height || 0;\n\t\t// `<summary>` only exists in mobile ToC, so will fall back to 0 in large viewport component.\n\t\tconst mobileTocHeight = this.querySelector('summary')?.getBoundingClientRect().height || 0;\n\t\t/** Start intersections at nav height + 2rem padding. */\n\t\tconst top = navBarHeight + mobileTocHeight + 32;\n\t\t/** End intersections `53px` later. This is slightly more than the maximum `margin-top` in Markdown content. */\n\t\tconst bottom = top + 53;\n\t\tconst height = document.documentElement.clientHeight;\n\t\treturn `-${top}px 0% ${bottom - height}px`;\n\t}\n}\n\ncustomElements.define('starlight-toc', StarlightTOC);\n"],"names":["PAGE_TITLE_ID","StarlightTOC","_","index","cb","links","isHeading","el","getElementHeading","origin","childHeading","h","setCurrent","entries","isIntersecting","target","heading","link","toObserve","observer","observe","timeout","navBarHeight","mobileTocHeight","top","bottom","height"],"mappings":"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","x_google_ignoreList":[0,1]}