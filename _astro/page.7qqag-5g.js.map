{"version":3,"file":"page.7qqag-5g.js","sources":["../../node_modules/astro/dist/prefetch/index.js","../../astro:scripts/page.js"],"sourcesContent":["const debug = import.meta.env.DEV ? console.debug : void 0;\nconst inBrowser = import.meta.env.SSR === false;\nconst prefetchedUrls = /* @__PURE__ */ new Set();\nconst listenedAnchors = /* @__PURE__ */ new WeakSet();\nlet prefetchAll = __PREFETCH_PREFETCH_ALL__;\nlet defaultStrategy = __PREFETCH_DEFAULT_STRATEGY__;\nlet clientPrerender = __EXPERIMENTAL_CLIENT_PRERENDER__;\nlet inited = false;\nfunction init(defaultOpts) {\n  if (!inBrowser) return;\n  if (inited) return;\n  inited = true;\n  debug?.(`[astro] Initializing prefetch script`);\n  prefetchAll ??= defaultOpts?.prefetchAll ?? false;\n  defaultStrategy ??= defaultOpts?.defaultStrategy ?? \"hover\";\n  initTapStrategy();\n  initHoverStrategy();\n  initViewportStrategy();\n  initLoadStrategy();\n}\nfunction initTapStrategy() {\n  for (const event of [\"touchstart\", \"mousedown\"]) {\n    document.body.addEventListener(\n      event,\n      (e) => {\n        if (elMatchesStrategy(e.target, \"tap\")) {\n          prefetch(e.target.href, { ignoreSlowConnection: true });\n        }\n      },\n      { passive: true }\n    );\n  }\n}\nfunction initHoverStrategy() {\n  let timeout;\n  document.body.addEventListener(\n    \"focusin\",\n    (e) => {\n      if (elMatchesStrategy(e.target, \"hover\")) {\n        handleHoverIn(e);\n      }\n    },\n    { passive: true }\n  );\n  document.body.addEventListener(\"focusout\", handleHoverOut, { passive: true });\n  onPageLoad(() => {\n    for (const anchor of document.getElementsByTagName(\"a\")) {\n      if (listenedAnchors.has(anchor)) continue;\n      if (elMatchesStrategy(anchor, \"hover\")) {\n        listenedAnchors.add(anchor);\n        anchor.addEventListener(\"mouseenter\", handleHoverIn, { passive: true });\n        anchor.addEventListener(\"mouseleave\", handleHoverOut, { passive: true });\n      }\n    }\n  });\n  function handleHoverIn(e) {\n    const href = e.target.href;\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      prefetch(href);\n    }, 80);\n  }\n  function handleHoverOut() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = 0;\n    }\n  }\n}\nfunction initViewportStrategy() {\n  let observer;\n  onPageLoad(() => {\n    for (const anchor of document.getElementsByTagName(\"a\")) {\n      if (listenedAnchors.has(anchor)) continue;\n      if (elMatchesStrategy(anchor, \"viewport\")) {\n        listenedAnchors.add(anchor);\n        observer ??= createViewportIntersectionObserver();\n        observer.observe(anchor);\n      }\n    }\n  });\n}\nfunction createViewportIntersectionObserver() {\n  const timeouts = /* @__PURE__ */ new WeakMap();\n  return new IntersectionObserver((entries, observer) => {\n    for (const entry of entries) {\n      const anchor = entry.target;\n      const timeout = timeouts.get(anchor);\n      if (entry.isIntersecting) {\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        timeouts.set(\n          anchor,\n          setTimeout(() => {\n            observer.unobserve(anchor);\n            timeouts.delete(anchor);\n            prefetch(anchor.href);\n          }, 300)\n        );\n      } else {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeouts.delete(anchor);\n        }\n      }\n    }\n  });\n}\nfunction initLoadStrategy() {\n  onPageLoad(() => {\n    for (const anchor of document.getElementsByTagName(\"a\")) {\n      if (elMatchesStrategy(anchor, \"load\")) {\n        prefetch(anchor.href);\n      }\n    }\n  });\n}\nfunction prefetch(url, opts) {\n  url = url.replace(/#.*/, \"\");\n  const ignoreSlowConnection = opts?.ignoreSlowConnection ?? false;\n  if (!canPrefetchUrl(url, ignoreSlowConnection)) return;\n  prefetchedUrls.add(url);\n  if (clientPrerender && HTMLScriptElement.supports?.(\"speculationrules\")) {\n    debug?.(`[astro] Prefetching ${url} with <script type=\"speculationrules\">`);\n    appendSpeculationRules(url, opts?.eagerness ?? \"immediate\");\n  } else if (document.createElement(\"link\").relList?.supports?.(\"prefetch\") && opts?.with !== \"fetch\") {\n    debug?.(`[astro] Prefetching ${url} with <link rel=\"prefetch\">`);\n    const link = document.createElement(\"link\");\n    link.rel = \"prefetch\";\n    link.setAttribute(\"href\", url);\n    document.head.append(link);\n  } else {\n    debug?.(`[astro] Prefetching ${url} with fetch`);\n    fetch(url, { priority: \"low\" });\n  }\n}\nfunction canPrefetchUrl(url, ignoreSlowConnection) {\n  if (!navigator.onLine) return false;\n  if (!ignoreSlowConnection && isSlowConnection()) return false;\n  try {\n    const urlObj = new URL(url, location.href);\n    return location.origin === urlObj.origin && (location.pathname !== urlObj.pathname || location.search !== urlObj.search) && !prefetchedUrls.has(url);\n  } catch {\n  }\n  return false;\n}\nfunction elMatchesStrategy(el, strategy) {\n  if (el?.tagName !== \"A\") return false;\n  const attrValue = el.dataset.astroPrefetch;\n  if (attrValue === \"false\") {\n    return false;\n  }\n  if (strategy === \"tap\" && (attrValue != null || prefetchAll) && isSlowConnection()) {\n    return true;\n  }\n  if (attrValue == null && prefetchAll || attrValue === \"\") {\n    return strategy === defaultStrategy;\n  }\n  if (attrValue === strategy) {\n    return true;\n  }\n  return false;\n}\nfunction isSlowConnection() {\n  if (\"connection\" in navigator) {\n    const conn = navigator.connection;\n    return conn.saveData || /2g/.test(conn.effectiveType);\n  }\n  return false;\n}\nfunction onPageLoad(cb) {\n  cb();\n  let firstLoad = false;\n  document.addEventListener(\"astro:page-load\", () => {\n    if (!firstLoad) {\n      firstLoad = true;\n      return;\n    }\n    cb();\n  });\n}\nfunction appendSpeculationRules(url, eagerness) {\n  const script = document.createElement(\"script\");\n  script.type = \"speculationrules\";\n  script.textContent = JSON.stringify({\n    prerender: [\n      {\n        source: \"list\",\n        urls: [url],\n        eagerness\n      }\n    ],\n    // Currently, adding `prefetch` is required to fallback if `prerender` fails.\n    // Possibly will be automatic in the future, in which case it can be removed.\n    // https://github.com/WICG/nav-speculation/issues/162#issuecomment-1977818473\n    prefetch: [\n      {\n        source: \"list\",\n        urls: [url],\n        eagerness\n      }\n    ]\n  });\n  document.head.append(script);\n}\nexport {\n  init,\n  prefetch\n};\n","import { init } from 'astro/virtual-modules/prefetch.js';init()"],"names":["prefetchedUrls","listenedAnchors","prefetchAll","defaultStrategy","inited","init","defaultOpts","initTapStrategy","initHoverStrategy","initViewportStrategy","initLoadStrategy","event","e","elMatchesStrategy","prefetch","timeout","handleHoverIn","handleHoverOut","onPageLoad","anchor","href","observer","createViewportIntersectionObserver","timeouts","entries","entry","url","opts","ignoreSlowConnection","canPrefetchUrl","link","isSlowConnection","urlObj","el","strategy","attrValue","conn","cb","firstLoad"],"mappings":"AAEA,MAAMA,MAAqC,IACrCC,MAAsC,QAC5C,IAAIC,EAAc,GACdC,EAEAC,EAAS,GACb,SAASC,EAAKC,EAAa,CAErBF,IACKA,EAAA,GAETF,IAA4C,GAC5CC,IAAoD,QACpCI,EAAA,EACEC,EAAA,EACGC,EAAA,EACJC,EAAA,EACnB,CACA,SAASH,GAAkB,CACzB,UAAWI,IAAS,CAAC,aAAc,WAAW,EAC5C,SAAS,KAAK,iBACZA,EACCC,GAAM,CACDC,EAAkBD,EAAE,OAAQ,KAAK,GACnCE,EAASF,EAAE,OAAO,KAAM,CAAE,qBAAsB,GAAM,CAE1D,EACA,CAAE,QAAS,EAAK,CAClB,CAEJ,CACA,SAASJ,GAAoB,CACvB,IAAAO,EACJ,SAAS,KAAK,iBACZ,UACCH,GAAM,CACDC,EAAkBD,EAAE,OAAQ,OAAO,GACrCI,EAAcJ,CAAC,CAEnB,EACA,CAAE,QAAS,EAAK,CAClB,EACA,SAAS,KAAK,iBAAiB,WAAYK,EAAgB,CAAE,QAAS,GAAM,EAC5EC,EAAW,IAAM,CACf,UAAWC,KAAU,SAAS,qBAAqB,GAAG,EAChDlB,EAAgB,IAAIkB,CAAM,GAC1BN,EAAkBM,EAAQ,OAAO,IACnClB,EAAgB,IAAIkB,CAAM,EAC1BA,EAAO,iBAAiB,aAAcH,EAAe,CAAE,QAAS,GAAM,EACtEG,EAAO,iBAAiB,aAAcF,EAAgB,CAAE,QAAS,GAAM,EAE3E,CACD,EACD,SAASD,EAAcJ,EAAG,CAClB,MAAAQ,EAAOR,EAAE,OAAO,KAClBG,GACF,aAAaA,CAAO,EAEtBA,EAAU,WAAW,IAAM,CACzBD,EAASM,CAAI,GACZ,EAAE,CAAA,CAEP,SAASH,GAAiB,CACpBF,IACF,aAAaA,CAAO,EACVA,EAAA,EACZ,CAEJ,CACA,SAASN,GAAuB,CAC1B,IAAAY,EACJH,EAAW,IAAM,CACf,UAAWC,KAAU,SAAS,qBAAqB,GAAG,EAChDlB,EAAgB,IAAIkB,CAAM,GAC1BN,EAAkBM,EAAQ,UAAU,IACtClB,EAAgB,IAAIkB,CAAM,EAC1BE,IAAaC,EAAmC,EAChDD,EAAS,QAAQF,CAAM,EAE3B,CACD,CACH,CACA,SAASG,GAAqC,CACtC,MAAAC,MAA+B,QACrC,OAAO,IAAI,qBAAqB,CAACC,EAASH,IAAa,CACrD,UAAWI,KAASD,EAAS,CAC3B,MAAML,EAASM,EAAM,OACfV,EAAUQ,EAAS,IAAIJ,CAAM,EAC/BM,EAAM,gBACJV,GACF,aAAaA,CAAO,EAEbQ,EAAA,IACPJ,EACA,WAAW,IAAM,CACfE,EAAS,UAAUF,CAAM,EACzBI,EAAS,OAAOJ,CAAM,EACtBL,EAASK,EAAO,IAAI,CAAA,EACnB,GAAG,CACR,GAEIJ,IACF,aAAaA,CAAO,EACpBQ,EAAS,OAAOJ,CAAM,EAE1B,CACF,CACD,CACH,CACA,SAAST,GAAmB,CAC1BQ,EAAW,IAAM,CACf,UAAWC,KAAU,SAAS,qBAAqB,GAAG,EAChDN,EAAkBM,EAAQ,MAAM,GAClCL,EAASK,EAAO,IAAI,CAExB,CACD,CACH,CACA,SAASL,EAASY,EAAKC,EAAM,CACrBD,EAAAA,EAAI,QAAQ,MAAO,EAAE,EACrB,MAAAE,EAAuBD,GAAM,sBAAwB,GAC3D,GAAKE,EAAeH,EAAKE,CAAoB,EAK7C,GAJA5B,EAAe,IAAI0B,CAAG,EAIX,SAAS,cAAc,MAAM,EAAE,SAAS,WAAW,UAAU,GAAKC,GAAM,OAAS,QAAS,CAE7F,MAAAG,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,IAAM,WACNA,EAAA,aAAa,OAAQJ,CAAG,EACpB,SAAA,KAAK,OAAOI,CAAI,CAAA,MAGzB,MAAMJ,EAAK,CAAE,SAAU,KAAA,CAAO,CAElC,CACA,SAASG,EAAeH,EAAKE,EAAsB,CAEjD,GADI,CAAC,UAAU,QACX,CAACA,GAAwBG,EAAiB,EAAU,MAAA,GACpD,GAAA,CACF,MAAMC,EAAS,IAAI,IAAIN,EAAK,SAAS,IAAI,EACzC,OAAO,SAAS,SAAWM,EAAO,SAAW,SAAS,WAAaA,EAAO,UAAY,SAAS,SAAWA,EAAO,SAAW,CAAChC,EAAe,IAAI0B,CAAG,CAAA,MAC7I,CAAA,CAED,MAAA,EACT,CACA,SAASb,EAAkBoB,EAAIC,EAAU,CACnC,GAAAD,GAAI,UAAY,IAAY,MAAA,GAC1B,MAAAE,EAAYF,EAAG,QAAQ,cAC7B,OAAIE,IAAc,QACT,GAELD,IAAa,QAAUC,GAAa,MAAQjC,IAAgB6B,IACvD,GAELI,GAAa,MAAQjC,GAAeiC,IAAc,GAC7CD,IAAa/B,EAElBgC,IAAcD,CAIpB,CACA,SAASH,GAAmB,CAC1B,GAAI,eAAgB,UAAW,CAC7B,MAAMK,EAAO,UAAU,WACvB,OAAOA,EAAK,UAAY,KAAK,KAAKA,EAAK,aAAa,CAAA,CAE/C,MAAA,EACT,CACA,SAASlB,EAAWmB,EAAI,CACnBA,EAAA,EACH,IAAIC,EAAY,GACP,SAAA,iBAAiB,kBAAmB,IAAM,CACjD,GAAI,CAACA,EAAW,CACFA,EAAA,GACZ,MAAA,CAECD,EAAA,CAAA,CACJ,CACH,CCvLyDhC,EAAI","x_google_ignoreList":[0]}